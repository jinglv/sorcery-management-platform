{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js!/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/envDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/envDialog.vue","mtime":1685693281296},{"path":"/Users/lvjing/sorcery-management-platform/front/babel.config.js","mtime":1679466191236},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL2x2amluZy9zb3JjZXJ5LW1hbmFnZW1lbnQtcGxhdGZvcm0vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbHZqaW5nL3NvcmNlcnktbWFuYWdlbWVudC1wbGF0Zm9ybS9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyB1cGRhdGVIdHRwUnVubmVyUHJvamVjdCB9IGZyb20gJ0AvYXBpL2h0dHBydW5uZXInOwppbXBvcnQgQWNlQ29kZUVkaXRvckRpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvSHR0cFJ1bm5lci9hY2VDb2RlRWRpdG9yRGlhbG9nLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRW52RGlhbG9nJywKICBjb21wb25lbnRzOiB7CiAgICBBY2VDb2RlRWRpdG9yRGlhbG9nOiBBY2VDb2RlRWRpdG9yRGlhbG9nCiAgfSwKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgaGlkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIHBpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCiAgICBobmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBkZXNjOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGNvZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgZWNvZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1RpdGxlOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwKICAgICAgbGFuZ3VhZ2U6ICdweXRob24nLAogICAgICBlbnZfY29kZXM6ICcnLAogICAgICBlbnZfY29kZTogJycsCiAgICAgIHNhdmVGbGFnOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy50aXRsZSA9PT0gJ2VudicpIHsKICAgICAgdGhpcy5zaG93VGl0bGUgPSAn546v5aKD5Y+Y6YePJzsKICAgIH0KICAgIHRoaXMuZW52X2NvZGVzID0gdGhpcy5lY29kZTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRGlhbG9nOiBmdW5jdGlvbiBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FuY2VsJywge30pOwogICAgfSwKICAgIGdldENvZGU6IGZ1bmN0aW9uIGdldENvZGUoY29kZSkgewogICAgICB0aGlzLmVudl9jb2RlID0gY29kZTsKICAgIH0sCiAgICAvLyDmm7TmlrAKICAgIHVwZGF0ZUluZm86IGZ1bmN0aW9uIHVwZGF0ZUluZm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlcSwgcmVzcDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZXEgPSB7CiAgICAgICAgICAgICAgICAncHJvamVjdF9pZCc6IF90aGlzLnBpZCwKICAgICAgICAgICAgICAgICdlbnZfY29kZSc6IHR5cGVvZiBfdGhpcy5lbnZfY29kZSA9PT0gJ3VuZGVmaW5lZCcgPyAnJyA6IF90aGlzLmVudl9jb2RlLAogICAgICAgICAgICAgICAgJ25hbWUnOiBfdGhpcy5obmFtZSwKICAgICAgICAgICAgICAgICdkZXNjcmliZSc6IF90aGlzLmRlc2MsCiAgICAgICAgICAgICAgICAnY29kZSc6IF90aGlzLmNvZGUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygncmVxJywgcmVxKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlSHR0cFJ1bm5lclByb2plY3QoX3RoaXMuaGlkLCByZXEpOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgX3RoaXMuY2xvc2VEaWFsb2coKTsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/neWtmOaIkOWKnycpOwogICAgICAgICAgICAgICAgX3RoaXMuc2F2ZUZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgLy8g5bu25pe25ZmoCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign5L+d5a2Y5aSx6LSlJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["updateHttpRunnerProject","AceCodeEditorDialog","name","components","props","title","type","String","default","hid","Number","pid","hname","desc","code","ecode","data","showTitle","dialogVisible","language","env_codes","env_code","saveFlag","mounted","methods","closeDialog","$emit","getCode","updateInfo","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","req","resp","wrap","_callee$","_context","prev","next","console","info","sent","success","$message","setTimeout","error","stop"],"sources":["src/components/HttpRunner/envDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"550px\"\n    :before-close=\"closeDialog\"\n  >\n    <div style=\"margin-top: 10px;\">\n      <ace-code-editor-dialog ref=\"ace\" :value=\"env_codes\" class=\"ace-editor\" :min-lines=\"25\" :mode-path=\"language\" @getCode=\"getCode\" />\n    </div>\n    <div class=\"dialog-footer\" align=\"right\">\n      <el-button @click=\"closeDialog()\">取消</el-button>\n      <el-button\n        type=\"primary\"\n        :disabled=\"saveFlag\"\n        @click=\"updateInfo()\"\n      >保存</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { updateHttpRunnerProject } from '@/api/httprunner'\nimport AceCodeEditorDialog from '@/components/HttpRunner/aceCodeEditorDialog.vue'\n\nexport default {\n  name: 'EnvDialog',\n  components: {\n    AceCodeEditorDialog\n  },\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    hid: {\n      type: Number,\n      default: 1\n    },\n    pid: {\n      type: Number,\n      default: 1\n    },\n    hname: {\n      type: String,\n      default: null\n    },\n    desc: {\n      type: String,\n      default: null\n    },\n    code: {\n      type: String,\n      default: null\n    },\n    ecode: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      language: 'python',\n      env_codes: '',\n      env_code: '',\n      saveFlag: false\n    }\n  },\n  mounted() {\n    if (this.title === 'env') {\n      this.showTitle = '环境变量'\n    }\n    this.env_codes = this.ecode\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    getCode(code) {\n      this.env_code = code\n    },\n    // 更新\n    async updateInfo() {\n      const req = {\n        'project_id': this.pid,\n        'env_code': typeof (this.env_code) === 'undefined' ? '' : this.env_code,\n        'name': this.hname,\n        'describe': this.desc,\n        'code': this.code\n      }\n      console.info('req', req)\n      const resp = await updateHttpRunnerProject(this.hid, req)\n      if (resp.success === true) {\n        this.closeDialog()\n        this.$message.success('保存成功')\n        this.saveFlag = true\n        // 延时器\n        setTimeout(() => {\n          this.$emit('close')\n        }, 500)\n      } else {\n        this.$message.error('保存失败')\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n  .el-row {\n    margin-bottom: 20px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n  .el-col {\n    border-radius: 4px;\n  }\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,SAAAA,uBAAA;AACA,OAAAC,mBAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAF,mBAAA,EAAAA;EACA;EACAG,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,GAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;IACAG,GAAA;MACAL,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;IACAI,KAAA;MACAN,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAK,IAAA;MACAP,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAM,IAAA;MACAR,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAO,KAAA;MACAT,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAQ,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;MACAC,aAAA;MACAC,QAAA;MACAC,SAAA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,SAAAlB,KAAA;MACA,KAAAY,SAAA;IACA;IACA,KAAAG,SAAA,QAAAL,KAAA;EACA;EACAS,OAAA;IACAC,WAAA,WAAAA,YAAA;MACA,KAAAC,KAAA;IACA;IACAC,OAAA,WAAAA,QAAAb,IAAA;MACA,KAAAO,QAAA,GAAAP,IAAA;IACA;IACA;IACAc,UAAA,WAAAA,WAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,GAAA,EAAAC,IAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAN,GAAA;gBACA,cAAAL,KAAA,CAAAlB,GAAA;gBACA,mBAAAkB,KAAA,CAAAR,QAAA,wBAAAQ,KAAA,CAAAR,QAAA;gBACA,QAAAQ,KAAA,CAAAjB,KAAA;gBACA,YAAAiB,KAAA,CAAAhB,IAAA;gBACA,QAAAgB,KAAA,CAAAf;cACA;cACA2B,OAAA,CAAAC,IAAA,QAAAR,GAAA;cAAAI,QAAA,CAAAE,IAAA;cAAA,OACAxC,uBAAA,CAAA6B,KAAA,CAAApB,GAAA,EAAAyB,GAAA;YAAA;cAAAC,IAAA,GAAAG,QAAA,CAAAK,IAAA;cACA,IAAAR,IAAA,CAAAS,OAAA;gBACAf,KAAA,CAAAJ,WAAA;gBACAI,KAAA,CAAAgB,QAAA,CAAAD,OAAA;gBACAf,KAAA,CAAAP,QAAA;gBACA;gBACAwB,UAAA;kBACAjB,KAAA,CAAAH,KAAA;gBACA;cACA;gBACAG,KAAA,CAAAgB,QAAA,CAAAE,KAAA;cACA;YAAA;YAAA;cAAA,OAAAT,QAAA,CAAAU,IAAA;UAAA;QAAA,GAAAf,OAAA;MAAA;IACA;EACA;AACA"}]}