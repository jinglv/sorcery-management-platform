{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js!/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/httpRunnerRunResultDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/httpRunnerRunResultDialog.vue","mtime":1689731650659},{"path":"/Users/lvjing/sorcery-management-platform/front/babel.config.js","mtime":1689577131945},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL2x2amluZy9zb3JjZXJ5LW1hbmFnZW1lbnQtcGxhdGZvcm0vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbHZqaW5nL3NvcmNlcnktbWFuYWdlbWVudC1wbGF0Zm9ybS9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IHsgaHR0cFJ1bm5lclJ1blJlc3VsdCwgaHR0cFJ1bm5lclJlbmRlclJlcG9ydEFwaSB9IGZyb20gJ0AvYXBpL2h0dHBydW5uZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1RpdGxlOiAn5p+l55yL5omn6KGM57uT5p6cJywKICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwKICAgICAgcmVhdWx0RGF0YTogW10sCiAgICAgIHJlcTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogNQogICAgICB9LAogICAgICAvLyDliIbpobXpobXmlbAKICAgICAgdG90YWw6IDUKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0SHR0cFJ1bm5lclJ1blJlc3VsdExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN0YXR1c1R5cGU6IGZ1bmN0aW9uIHN0YXR1c1R5cGUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAnZmFpbCcpIHsKICAgICAgICByZXR1cm4gJ2Rhbmdlcic7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdub24nKSB7CiAgICAgICAgcmV0dXJuICdpbmZvJzsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ2Vycm9yJykgewogICAgICAgIHJldHVybiAnd2FybmluZyc7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdzdWNjZXNzJykgewogICAgICAgIHJldHVybiAnc3VjY2Vzcyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICfmnKrnn6XnirbmgIEnOwogICAgICB9CiAgICB9LAogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCdjYW5jZWwnLCB7fSk7CiAgICB9LAogICAgaW5pdEh0dHBSdW5uZXJSdW5SZXN1bHRMaXN0OiBmdW5jdGlvbiBpbml0SHR0cFJ1bm5lclJ1blJlc3VsdExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3AsIGlkcywgaSwgX2k7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGh0dHBSdW5uZXJSdW5SZXN1bHQoX3RoaXMucmVxLCBfdGhpcy50eXBlKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIGlmIChfdGhpcy50eXBlICE9PSAnQVBJJykgewogICAgICAgICAgICAgICAgICBpZHMgPSBbXTsKICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlc3AuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcC5pdGVtc1tpXS5pZHMubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2gocmVzcC5pdGVtc1tpXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnaWRzOicsIGlkcyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLnJlYXVsdERhdGEgPSBpZHM7CiAgICAgICAgICAgICAgICAgIF90aGlzLnRvdGFsID0gaWRzLmxlbmd0aDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnJlYXVsdERhdGEgPSByZXNwLml0ZW1zOwogICAgICAgICAgICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3AudG90YWw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKF9pID0gMDsgX2kgPCByZXNwLml0ZW1zLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgICAgICByZXNwLml0ZW1zW19pXS5jcmVhdGVfdGltZSA9IF90aGlzLiRtb21lbnQocmVzcC5pdGVtc1tfaV0uY3JlYXRlX3RpbWUpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmn6Xor6LmiJDlip/vvIEnKQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i5aSx6LSl77yBJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2hvd1JlcG9ydDogZnVuY3Rpb24gc2hvd1JlcG9ydChyb3cpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlcG9ydENvbnRlbnQsIG5ld1dpbjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBodHRwUnVubmVyUmVuZGVyUmVwb3J0QXBpKHJvdy5uYW1lKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlcG9ydENvbnRlbnQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAvLyDkv53lrZjov5tsb2NhbFN0b3JhZ2UKICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NhbGxiYWNrSFRNTCcpOwogICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FsbGJhY2tIVE1MJywgcmVwb3J0Q29udGVudCk7CiAgICAgICAgICAgICAgLy8g6K+75Y+W5pys5Zyw5L+d5a2Y55qEaHRtbOaVsOaNru+8jOS9v+eUqOaWsOeql+WPo+aJk+W8gAogICAgICAgICAgICAgIG5ld1dpbiA9IHdpbmRvdy5vcGVuKCdfJywgJ19ibGFuaycpOwogICAgICAgICAgICAgIG5ld1dpbi5kb2N1bWVudC53cml0ZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FsbGJhY2tIVE1MJykpOwogICAgICAgICAgICAgIC8vIOWFs+mXrei+k+WHuua1gQogICAgICAgICAgICAgIG5ld1dpbi5kb2N1bWVudC5jbG9zZSgpOwogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDot7PovazliLDnrKzlh6DpobUKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCJcdTVGNTNcdTUyNERcdTk4NzU6ICIuY29uY2F0KHZhbCkpOwogICAgICB0aGlzLnJlcS5wYWdlID0gdmFsOwogICAgICB0aGlzLmluaXRIdHRwUnVubmVyUnVuUmVzdWx0TGlzdCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["httpRunnerRunResult","httpRunnerRenderReportApi","components","props","type","String","default","data","showTitle","dialogVisible","reaultData","req","page","size","total","mounted","initHttpRunnerRunResultList","methods","statusType","value","closeDialog","$emit","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resp","ids","i","_i","wrap","_callee$","_context","prev","next","sent","success","items","length","push","console","info","create_time","$moment","format","$message","error","stop","showReport","row","_callee2","reportContent","newWin","_callee2$","_context2","name","window","localStorage","removeItem","setItem","open","document","write","getItem","close","handleCurrentChange","val","log","concat"],"sources":["src/components/HttpRunner/httpRunnerRunResultDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1200px\"\n    :before-close=\"closeDialog\"\n  >\n    <div>\n      <el-table :data=\"reaultData\" border style=\"width: 100%\">\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n        <el-table-column prop=\"name\" label=\"报告名称\" />\n        <el-table-column prop=\"name\" label=\"执行内容\" />\n        <el-table-column prop=\"type\" label=\"类型\" />\n        <el-table-column prop=\"result\" label=\"结果\">\n          <template slot-scope=\"{ row }\">\n            <el-tag :type=\"statusType(row.result)\" effect=\"dark\">\n              {{ row.result }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"create_time\" label=\"创建时间\" />\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"showReport(scope.row)\"\n            >查看报告</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div style=\"width: 100%; text-align: right\">\n      <el-pagination\n        background\n        layout=\"prev, pager, next\"\n        :page-size=\"req.size\"\n        :total=\"total\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { httpRunnerRunResult, httpRunnerRenderReportApi } from '@/api/httprunner'\n\nexport default {\n  components: {},\n  props: {\n    type: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: '查看执行结果',\n      dialogVisible: true,\n      reaultData: [],\n      req: {\n        page: 1,\n        size: 5\n      },\n      // 分页页数\n      total: 5\n    }\n  },\n  mounted() {\n    this.initHttpRunnerRunResultList()\n  },\n  methods: {\n    statusType(value) {\n      if (value === 'fail') {\n        return 'danger'\n      } else if (value === 'non') {\n        return 'info'\n      } else if (value === 'error') {\n        return 'warning'\n      } else if (value === 'success') {\n        return 'success'\n      } else {\n        return '未知状态'\n      }\n    },\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    async initHttpRunnerRunResultList() {\n      const resp = await httpRunnerRunResult(this.req, this.type)\n      if (resp.success === true) {\n        if (this.type !== 'API') {\n          const ids = []\n          for (let i = 0; i < resp.items.length; i++) {\n            if (resp.items[i].ids.length > 1) {\n              ids.push(resp.items[i])\n            }\n          }\n          console.info('ids:', ids)\n          this.reaultData = ids\n          this.total = ids.length\n        } else {\n          this.reaultData = resp.items\n          this.total = resp.total\n        }\n        for (let i = 0; i < resp.items.length; i++) {\n          resp.items[i].create_time = this.$moment(\n            resp.items[i].create_time\n          ).format('YYYY-MM-DD HH:mm:ss')\n        }\n        // this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    async showReport(row) {\n      const reportContent = await httpRunnerRenderReportApi(row.name)\n      // 保存进localStorage\n      window.localStorage.removeItem('callbackHTML')\n      window.localStorage.setItem('callbackHTML', reportContent)\n      // 读取本地保存的html数据，使用新窗口打开\n      const newWin = window.open('_', '_blank')\n      newWin.document.write(localStorage.getItem('callbackHTML'))\n      // 关闭输出流\n      newWin.document.close()\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`)\n      this.req.page = val\n      this.initHttpRunnerRunResultList()\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n</style>\n"],"mappings":"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"}]}