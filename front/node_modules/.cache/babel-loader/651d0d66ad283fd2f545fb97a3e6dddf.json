{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js!/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/demandListDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/demandListDialog.vue","mtime":1702434625769},{"path":"/Users/jeanlv/sorcery-management-platform/front/babel.config.js","mtime":1698032213828},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL2plYW5sdi9zb3JjZXJ5LW1hbmFnZW1lbnQtcGxhdGZvcm0vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvamVhbmx2L3NvcmNlcnktbWFuYWdlbWVudC1wbGF0Zm9ybS9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBnZXREZW1hbmRMaXN0IGFzIF9nZXREZW1hbmRMaXN0IH0gZnJvbSAnQC9hcGkvY2FzZXMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0RlbWFuZExpc3QnLAogIGNvbXBvbmVudHM6IHt9LAogIGZpbHRlcnM6IHsKICAgIHJlcXVpcmVtZW50c1R5cGU6IGZ1bmN0aW9uIHJlcXVpcmVtZW50c1R5cGUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAnYnVzaW5lc3MnKSB7CiAgICAgICAgcmV0dXJuICfkuJrliqHnsbvpnIDmsYInOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnaW1wcm92ZScpIHsKICAgICAgICByZXR1cm4gJ+aUuei/m+exu+mcgOaxgic7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICd0ZWNobmljYWwnKSB7CiAgICAgICAgcmV0dXJuICfmioDmnK/nsbvpnIDmsYInOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAn5pyq55+l57G75Z6LJzsKICAgICAgfQogICAgfQogIH0sCiAgcHJvcHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93VGl0bGU6ICfpnIDmsYLliJfooagnLAogICAgICBkaWFsb2dWaXNpYmxlOiB0cnVlLAogICAgICBkZW1hbmREYXRhOiBbXSwKICAgICAgZGVtYW5kU2VhcmNoRnJvbTogewogICAgICAgICduYW1lJzogJycsCiAgICAgICAgJ3Byb2plY3RfaWQnOiAwLAogICAgICAgICd2ZXJzaW9uX251bWJlcic6ICcnLAogICAgICAgICdyZXF1aXJlbWVudHNfdHlwZSc6ICcnLAogICAgICAgICdjcmVhdGVfdGltZSc6ICcnCiAgICAgIH0sCiAgICAgIHJlcTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogMTAKICAgICAgfSwKICAgICAgLy8g5YiG6aG16aG15pWwCiAgICAgIHRvdGFsOiAxMCwKICAgICAgZHJhd2VyOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldERlbWFuZExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRGlhbG9nOiBmdW5jdGlvbiBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FuY2VsJywge30pOwogICAgfSwKICAgIC8vIOiOt+WPlumcgOaxguWIl+ihqAogICAgZ2V0RGVtYW5kTGlzdDogZnVuY3Rpb24gZ2V0RGVtYW5kTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcCwgaTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX2dldERlbWFuZExpc3QoX3RoaXMucmVxLCBKU09OLnN0cmluZ2lmeShfdGhpcy5kZW1hbmRTZWFyY2hGcm9tKSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3AudG90YWw7CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcmVzcC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICByZXNwLml0ZW1zW2ldLmNyZWF0ZV90aW1lID0gX3RoaXMuJG1vbWVudChyZXNwLml0ZW1zW2ldLmNyZWF0ZV90aW1lKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLmRlbWFuZERhdGEgPSByZXNwLml0ZW1zOwogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5p+l6K+i5oiQ5Yqf77yBJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LlpLHotKXvvIEnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZWxlY3REZW1hbmQ6IGZ1bmN0aW9uIHNlbGVjdERlbWFuZChyb3cpIHsKICAgICAgdmFyIGRlbWFuZEluZm8gPSB7CiAgICAgICAgaWQ6IHJvdy5pZCwKICAgICAgICBuYW1lOiByb3cubmFtZSwKICAgICAgICBwcm9qZWN0X25hbWU6IHJvdy5wcm9qZWN0Lm5hbWUsCiAgICAgICAgdmVyc2lvbl9udW1iZXI6IHJvdy52ZXJzaW9uX251bWJlciwKICAgICAgICByZXF1aXJlbWVudHNfdHlwZTogcm93LnJlcXVpcmVtZW50c190eXBlCiAgICAgIH07CiAgICAgIHRoaXMuJGVtaXQoJ2dldERlbWFuZEluZm8nLCBkZW1hbmRJbmZvKTsKICAgICAgdGhpcy5jbG9zZURpYWxvZygpOwogICAgfSwKICAgIC8vIOi3s+i9rOWIsOesrOWHoOmhtQogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2coIlx1NUY1M1x1NTI0RFx1OTg3NTogIi5jb25jYXQodmFsKSk7CiAgICAgIHRoaXMucmVxLnBhZ2UgPSB2YWw7CiAgICAgIHRoaXMuZ2V0RGVtYW5kTGlzdCgpOwogICAgfSwKICAgIGNsZWFyU2VhcmNoOiBmdW5jdGlvbiBjbGVhclNlYXJjaCgpIHsKICAgICAgdGhpcy5kZW1hbmRTZWFyY2hGcm9tLm5hbWUgPSAnJzsKICAgICAgdGhpcy5kZW1hbmRTZWFyY2hGcm9tLnZlcnNpb25fbnVtYmVyID0gJyc7CiAgICAgIHRoaXMuZ2V0RGVtYW5kTGlzdCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["getDemandList","name","components","filters","requirementsType","value","props","data","showTitle","dialogVisible","demandData","demandSearchFrom","req","page","size","total","drawer","mounted","methods","closeDialog","$emit","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resp","i","wrap","_callee$","_context","prev","next","JSON","stringify","sent","success","items","length","create_time","$moment","format","$message","error","stop","selectDemand","row","demandInfo","id","project_name","project","version_number","requirements_type","handleCurrentChange","val","console","log","concat","clearSearch"],"sources":["src/components/Cases/demandListDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"900px\"\n    :before-close=\"closeDialog\"\n    :append-to-body=\"true\"\n  >\n    <div class=\"filter-container\">\n      <el-row :gutter=\"24\">\n        <el-col :span=\"8\">\n          <div class=\"demo-input-suffix\">\n            需求名称:\n            <el-input v-model=\"demandSearchFrom.name\" size=\"mini\" placeholder=\"请输入需求名称\" style=\"width: 70%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n        <el-col :span=\"8\">\n          <div class=\"demo-input-suffix\">\n            版本号:\n            <el-input v-model=\"demandSearchFrom.version_number\" size=\"mini\" placeholder=\"请输入版本号\" style=\"width: 70%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n      </el-row>\n      <div style=\"text-align: right;margin-top: 10px;\">\n        <el-button class=\"filter-item\" size=\"mini\" icon=\"el-icon-delete\" @click=\"clearSearch()\">重置</el-button>\n        <el-button class=\"filter-item\" size=\"mini\" type=\"primary\" icon=\"el-icon-search\" @click=\"getAllApisList()\">搜索</el-button>\n      </div>\n    </div>\n    <el-table\n      :data=\"demandData\"\n      border\n      style=\"width: 100%;margin-top: 10px;\"\n      @cell-click=\"selectDemand\"\n    >\n      <el-table-column label=\"ID\" type=\"index\" width=\"80\" />\n      <el-table-column prop=\"name\" label=\"需求名称\" width=\"180\" />\n      <el-table-column prop=\"project.name\" label=\"项目\" idth=\"250\" />\n      <el-table-column prop=\"version_number\" label=\"版本号\" width=\"100\" />\n      <el-table-column prop=\"requirements_type\" label=\"需求类型\" width=\"100\">\n        <template slot-scope=\"{ row }\">\n          {{ row.requirements_type | requirementsType }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"create_time\" label=\"创建时间\" width=\"200\" />\n    </el-table>\n    <!--分页-->\n    <div style=\"width: 100%; text-align: right\">\n      <el-pagination\n        background\n        :total=\"total\"\n        :page-size=\"req.size\"\n        layout=\"total, prev, pager, next\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { getDemandList } from '@/api/cases'\n\nexport default {\n  name: 'DemandList',\n  components: { },\n  filters: {\n    requirementsType(value) {\n      if (value === 'business') {\n        return '业务类需求'\n      } else if (value === 'improve') {\n        return '改进类需求'\n      } else if (value === 'technical') {\n        return '技术类需求'\n      } else {\n        return '未知类型'\n      }\n    }\n  },\n  props: {},\n  data() {\n    return {\n      showTitle: '需求列表',\n      dialogVisible: true,\n      demandData: [],\n      demandSearchFrom: {\n        'name': '',\n        'project_id': 0,\n        'version_number': '',\n        'requirements_type': '',\n        'create_time': ''\n      },\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 10,\n      drawer: false\n    }\n  },\n  mounted() {\n    this.getDemandList()\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    // 获取需求列表\n    async getDemandList() {\n      const resp = await getDemandList(this.req, JSON.stringify(this.demandSearchFrom))\n      if (resp.success === true) {\n        this.total = resp.total\n        for (let i = 0; i < resp.items.length; i++) {\n          resp.items[i].create_time = this.$moment(\n            resp.items[i].create_time\n          ).format('YYYY-MM-DD HH:mm:ss')\n        }\n        this.demandData = resp.items\n        this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    selectDemand(row) {\n      const demandInfo = {\n        id: row.id,\n        name: row.name,\n        project_name: row.project.name,\n        version_number: row.version_number,\n        requirements_type: row.requirements_type\n      }\n      this.$emit('getDemandInfo', demandInfo)\n      this.closeDialog()\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`)\n      this.req.page = val\n      this.getDemandList()\n    },\n    clearSearch() {\n      this.demandSearchFrom.name = ''\n      this.demandSearchFrom.version_number = ''\n      this.getDemandList()\n    }\n  }\n}\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA,SAAAA,aAAA,IAAAA,cAAA;AAEA;EACAC,IAAA;EACAC,UAAA;EACAC,OAAA;IACAC,gBAAA,WAAAA,iBAAAC,KAAA;MACA,IAAAA,KAAA;QACA;MACA,WAAAA,KAAA;QACA;MACA,WAAAA,KAAA;QACA;MACA;QACA;MACA;IACA;EACA;EACAC,KAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;MACAC,aAAA;MACAC,UAAA;MACAC,gBAAA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC,GAAA;QACAC,IAAA;QACAC,IAAA;MACA;MACA;MACAC,KAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAjB,aAAA;EACA;EACAkB,OAAA;IACAC,WAAA,WAAAA,YAAA;MACA,KAAAC,KAAA;IACA;IACA;IACApB,aAAA,WAAAA,cAAA;MAAA,IAAAqB,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,IAAA,EAAAC,CAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACAhC,cAAA,CAAAqB,KAAA,CAAAT,GAAA,EAAAqB,IAAA,CAAAC,SAAA,CAAAb,KAAA,CAAAV,gBAAA;YAAA;cAAAe,IAAA,GAAAI,QAAA,CAAAK,IAAA;cACA,IAAAT,IAAA,CAAAU,OAAA;gBACAf,KAAA,CAAAN,KAAA,GAAAW,IAAA,CAAAX,KAAA;gBACA,KAAAY,CAAA,MAAAA,CAAA,GAAAD,IAAA,CAAAW,KAAA,CAAAC,MAAA,EAAAX,CAAA;kBACAD,IAAA,CAAAW,KAAA,CAAAV,CAAA,EAAAY,WAAA,GAAAlB,KAAA,CAAAmB,OAAA,CACAd,IAAA,CAAAW,KAAA,CAAAV,CAAA,EAAAY,WAAA,CACA,CAAAE,MAAA;gBACA;gBACApB,KAAA,CAAAX,UAAA,GAAAgB,IAAA,CAAAW,KAAA;gBACAhB,KAAA,CAAAqB,QAAA,CAAAN,OAAA;cACA;gBACAf,KAAA,CAAAqB,QAAA,CAAAC,KAAA;cACA;YAAA;YAAA;cAAA,OAAAb,QAAA,CAAAc,IAAA;UAAA;QAAA,GAAAnB,OAAA;MAAA;IACA;IACAoB,YAAA,WAAAA,aAAAC,GAAA;MACA,IAAAC,UAAA;QACAC,EAAA,EAAAF,GAAA,CAAAE,EAAA;QACA/C,IAAA,EAAA6C,GAAA,CAAA7C,IAAA;QACAgD,YAAA,EAAAH,GAAA,CAAAI,OAAA,CAAAjD,IAAA;QACAkD,cAAA,EAAAL,GAAA,CAAAK,cAAA;QACAC,iBAAA,EAAAN,GAAA,CAAAM;MACA;MACA,KAAAhC,KAAA,kBAAA2B,UAAA;MACA,KAAA5B,WAAA;IACA;IACA;IACAkC,mBAAA,WAAAA,oBAAAC,GAAA;MACAC,OAAA,CAAAC,GAAA,wBAAAC,MAAA,CAAAH,GAAA;MACA,KAAA1C,GAAA,CAAAC,IAAA,GAAAyC,GAAA;MACA,KAAAtD,aAAA;IACA;IACA0D,WAAA,WAAAA,YAAA;MACA,KAAA/C,gBAAA,CAAAV,IAAA;MACA,KAAAU,gBAAA,CAAAwC,cAAA;MACA,KAAAnD,aAAA;IACA;EACA;AACA"}]}