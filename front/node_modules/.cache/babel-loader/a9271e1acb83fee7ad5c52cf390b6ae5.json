{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js!/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/Envs/envsDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/Envs/envsDialog.vue","mtime":1685671628987},{"path":"/Users/lvjing/sorcery-management-platform/front/babel.config.js","mtime":1679466191236},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL2x2amluZy9zb3JjZXJ5LW1hbmFnZW1lbnQtcGxhdGZvcm0vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbHZqaW5nL3NvcmNlcnktbWFuYWdlbWVudC1wbGF0Zm9ybS9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBwcm9qZWN0TGlzdCB9IGZyb20gJ0AvYXBpL3Byb2plY3RzJzsKaW1wb3J0IHsgY3JlYXRlRW52cywgdXBkYXRlRW52cywgZ2V0RW52c0luZm8gYXMgX2dldEVudnNJbmZvIH0gZnJvbSAnQC9hcGkvZW52cyc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgcGlkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIGVpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93VGl0bGU6ICcnLAogICAgICBkaWFsb2dWaXNpYmxlOiB0cnVlLAogICAgICBlbnZGb3JtOiB7CiAgICAgICAgcHJvamVjdF9pZDogMCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBlbnY6ICcnLAogICAgICAgIGJyb3dzZXI6ICcnLAogICAgICAgIHByb3RvY29sOiAnJywKICAgICAgICBiYXNlX3VybDogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl546v5aKD55qE5ZCN56ewJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGVudjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeeOr+Wig+eahOWAvCzlpoI6ZGV244CBdGVzdOOAgXByb2QnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgYmFzZV91cmw6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnjq/looPnmoTln7rnoYBVUkwnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgaHR0cFZhbHVlOiAxLAogICAgICBodHRwTGFiZWw6ICdodHRwOi8vJywKICAgICAgaHR0cE9wdGlvbjogW3sKICAgICAgICB2YWx1ZTogMSwKICAgICAgICBsYWJlbDogJ2h0dHA6Ly8nCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMiwKICAgICAgICBsYWJlbDogJ2h0dHBzOi8vJwogICAgICB9XSwKICAgICAgc2F2ZUZsYWc6IGZhbHNlLAogICAgICBwcm9qZWN0VmFsdWU6ICcnLAogICAgICBwcm9qZWN0TGFiZWw6ICcnLAogICAgICBwcm9qZWN0T3B0aW9uOiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRQcm9qZWN0TGlzdCgpOwogICAgaWYgKHRoaXMudGl0bGUgPT09ICdjcmVhdGUnKSB7CiAgICAgIHRoaXMuc2hvd1RpdGxlID0gJ+WIm+W7uueOr+Wig+ivpuaDhSc7CiAgICB9IGVsc2UgaWYgKHRoaXMudGl0bGUgPT09ICdlZGl0JykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfnvJbovpHnjq/looPor6bmg4UnOwogICAgICB0aGlzLmdldEVudnNJbmZvKCk7CiAgICB9IGVsc2UgaWYgKHRoaXMudGl0bGUgPT09ICd2aWV3JykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfmn6XnnIvnjq/looPor6bmg4UnOwogICAgICB0aGlzLmdldEVudnNJbmZvKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZURpYWxvZzogZnVuY3Rpb24gY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NhbmNlbCcsIHt9KTsKICAgIH0sCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKF90aGlzLnRpdGxlID09PSAnY3JlYXRlJykgewogICAgICAgICAgICBpZiAoX3RoaXMucGlkICE9PSAwKSB7CiAgICAgICAgICAgICAgX3RoaXMuZW52Rm9ybS5wcm9qZWN0X2lkID0gX3RoaXMucGlkOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLmVudkZvcm0ucHJvamVjdF9pZCA9IF90aGlzLnByb2plY3RWYWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpcy5lbnZGb3JtLnByb3RvY29sID0gX3RoaXMuaHR0cExhYmVsOwogICAgICAgICAgICBjcmVhdGVFbnZzKF90aGlzLmVudkZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAvLyDlu7bml7blmagKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zYXZlRmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICAgICAgX3RoaXMuY2xvc2VEaWFsb2coKTsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIm+W7uuaIkOWKn++8gScpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnRpdGxlID09PSAnZWRpdCcpIHsKICAgICAgICAgICAgX3RoaXMuZW52Rm9ybS5wcm9qZWN0X2lkID0gX3RoaXMucHJvamVjdFZhbHVlOwogICAgICAgICAgICBfdGhpcy5lbnZGb3JtLnByb3RvY29sID0gX3RoaXMuaHR0cExhYmVsOwogICAgICAgICAgICB1cGRhdGVFbnZzKF90aGlzLmVpZCwgX3RoaXMuZW52Rm9ybSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIC8vIOW7tuaXtuWZqAogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnNhdmVGbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZURpYWxvZygpOwogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pu05paw5oiQ5Yqf77yBJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W6YCJ5Lit55qE5Y2P6K6u5YC8CiAgICBjaGFuZ2VQcm90b2NvbDogZnVuY3Rpb24gY2hhbmdlUHJvdG9jb2wodmFsdWUpIHsKICAgICAgdGhpcy5odHRwVmFsdWUgPSB2YWx1ZTsKICAgICAgdGhpcy5odHRwTGFiZWwgPSB0aGlzLmh0dHBPcHRpb24uZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnZhbHVlID09PSB2YWx1ZTsKICAgICAgfSkubGFiZWw7CiAgICAgIGNvbnNvbGUubG9nKCfpgInkuK3lkI3np7AnLCB0aGlzLmh0dHBMYWJlbCk7CiAgICB9LAogICAgLy8g5Yid5aeL5YyW6aG555uu5YiX6KGoCiAgICBpbml0UHJvamVjdExpc3Q6IGZ1bmN0aW9uIGluaXRQcm9qZWN0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlcV9ib2R5LCByZXNwLCBpOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJlcV9ib2R5ID0gewogICAgICAgICAgICAgICAgJ25hbWUnOiAnJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHByb2plY3RMaXN0KF90aGlzMi5yZXEsIHJlcV9ib2R5KTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCByZXNwLml0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5wcm9qZWN0T3B0aW9uLnB1c2goewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXNwLml0ZW1zW2ldLmlkLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiByZXNwLml0ZW1zW2ldLm5hbWUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuafpeivouaIkOWKn++8gSIpCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcign5p+l6K+i5aSx6LSl77yBJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5L+u5pS56YCJ5Lit6aG555uuCiAgICBjaGFuZ2VQcm9qZWN0OiBmdW5jdGlvbiBjaGFuZ2VQcm9qZWN0KHZhbHVlKSB7CiAgICAgIHRoaXMucHJvamVjdFZhbHVlID0gdmFsdWU7CiAgICAgIHRoaXMucHJvamVjdExhYmVsID0gdGhpcy5wcm9qZWN0T3B0aW9uLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS52YWx1ZSA9PT0gdmFsdWU7CiAgICAgIH0pLmxhYmVsOwogICAgfSwKICAgIGdldEVudnNJbmZvOiBmdW5jdGlvbiBnZXRFbnZzSW5mbygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXNwOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF9nZXRFbnZzSW5mbyhfdGhpczMuZWlkKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBfdGhpczMuZW52Rm9ybSA9IHJlc3AucmVzdWx0OwogICAgICAgICAgICAgICAgX3RoaXMzLnByb2plY3RWYWx1ZSA9IHJlc3AucmVzdWx0LnByb2plY3RfaWQ7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAganVtcEVudnM6IGZ1bmN0aW9uIGp1bXBFbnZzKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2VudnMvaW5kZXgnKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["projectList","createEnvs","updateEnvs","getEnvsInfo","props","title","type","String","default","pid","Number","eid","data","showTitle","dialogVisible","envForm","project_id","name","env","browser","protocol","base_url","rules","required","message","trigger","httpValue","httpLabel","httpOption","value","label","saveFlag","projectValue","projectLabel","projectOption","mounted","initProjectList","methods","closeDialog","$emit","submitForm","formName","_this","$refs","validate","valid","then","resp","success","setTimeout","$message","error","changeProtocol","find","item","console","log","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","req_body","i","wrap","_callee$","_context","prev","next","req","sent","items","length","push","id","stop","changeProject","_this3","_callee2","_callee2$","_context2","result","jumpEnvs","$router"],"sources":["src/components/Envs/envsDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1000px\"\n    :before-close=\"closeDialog\"\n  >\n    <div v-if=\"title === 'view'\">\n      <el-form\n        :model=\"envForm\"\n        label-width=\"100px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item label=\"项目名称：\" prop=\"project_name\">{{ envForm.project_name }}</el-form-item>\n        <el-form-item label=\"环境名称：\" prop=\"name\">{{ envForm.name }}</el-form-item>\n        <el-form-item label=\"环境值：\" prop=\"env\">{{ envForm.env }}</el-form-item>\n        <el-form-item label=\"浏览器：\" prop=\"browser\">{{ envForm.browser }}</el-form-item>\n        <el-form-item label=\"请求协议：\" prop=\"protocol\">{{ envForm.protocol }}</el-form-item>\n        <el-form-item label=\"基础URL:\" prop=\"base_url\">{{ envForm.base_url }}</el-form-item>\n        <el-form-item style=\"text-align: right\">\n          <el-button @click=\"closeDialog()\">返回</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div v-if=\"title !== 'view'\">\n      <el-form\n        ref=\"ruleForm\"\n        :model=\"envForm\"\n        :rules=\"rules\"\n        label-width=\"100px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item v-if=\"pid===0\" label=\"请选择项目\" prop=\"name\">\n          <el-select\n            v-model=\"projectValue\"\n            placeholder=\"请选择项目\"\n            style=\"width: 100%;\"\n            @change=\"changeProject\"\n          >\n            <el-option\n              v-for=\"item in projectOption\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"环境名称\" prop=\"name\">\n          <el-input v-model=\"envForm.name\" />\n        </el-form-item>\n        <el-form-item label=\"环境值\" prop=\"env\">\n          <el-input v-model=\"envForm.env\" />\n        </el-form-item>\n        <el-form-item label=\"浏览器\">\n          <el-input v-model=\"envForm.browser\" />\n        </el-form-item>\n        <el-form-item label=\"基础URL\" prop=\"base_url\" :inline=\"true\">\n          <el-select\n            v-model=\"httpValue\"\n            style=\"width: 15%; float: left\"\n            @change=\"changeProtocol\"\n          >\n            <el-option\n              v-for=\"item in httpOption\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n          <el-input v-model=\"envForm.base_url\" style=\"width:85%\" />\n        </el-form-item>\n        <el-form-item>\n          <div class=\"dialog-footer\" style=\"text-align: right\">\n            <el-button v-if=\"pid!==0\" type=\"primary\" @click=\"jumpEnvs()\">查看环境列表</el-button>\n            <el-button @click=\"closeDialog()\">取消</el-button>\n            <el-button\n              type=\"primary\"\n              :disabled=\"saveFlag\"\n              @click=\"submitForm('ruleForm')\"\n            >保存</el-button>\n          </div>\n        </el-form-item>\n      </el-form>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { projectList } from '@/api/projects'\nimport { createEnvs, updateEnvs, getEnvsInfo } from '@/api/envs'\n\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    pid: {\n      type: Number,\n      default: 0\n    },\n    eid: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      envForm: {\n        project_id: 0,\n        name: '',\n        env: '',\n        browser: '',\n        protocol: '',\n        base_url: ''\n      },\n      rules: {\n        name: [\n          { required: true, message: '请输入环境的名称', trigger: 'blur' }\n        ],\n        env: [\n          { required: true, message: '请输入环境的值,如:dev、test、prod', trigger: 'blur' }\n        ],\n        base_url: [\n          { required: true, message: '请输入环境的基础URL', trigger: 'blur' }\n        ]\n      },\n      httpValue: 1,\n      httpLabel: 'http://',\n      httpOption: [\n        {\n          value: 1,\n          label: 'http://'\n        },\n        {\n          value: 2,\n          label: 'https://'\n        }\n      ],\n      saveFlag: false,\n      projectValue: '',\n      projectLabel: '',\n      projectOption: []\n    }\n  },\n  mounted() {\n    this.initProjectList()\n    if (this.title === 'create') {\n      this.showTitle = '创建环境详情'\n    } else if (this.title === 'edit') {\n      this.showTitle = '编辑环境详情'\n      this.getEnvsInfo()\n    } else if (this.title === 'view') {\n      this.showTitle = '查看环境详情'\n      this.getEnvsInfo()\n    }\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.title === 'create') {\n            if (this.pid !== 0) {\n              this.envForm.project_id = this.pid\n            } else {\n              this.envForm.project_id = this.projectValue\n            }\n            this.envForm.protocol = this.httpLabel\n            createEnvs(this.envForm).then((resp) => {\n              if (resp.success === true) {\n                // 延时器\n                setTimeout(() => {\n                  this.saveFlag = true\n                }, 500)\n                this.closeDialog()\n                this.$message.success('创建成功！')\n              } else {\n                this.$message.error(resp.error.message)\n              }\n            })\n          } else if (this.title === 'edit') {\n            this.envForm.project_id = this.projectValue\n            this.envForm.protocol = this.httpLabel\n            updateEnvs(this.eid, this.envForm).then((resp) => {\n              if (resp.success === true) {\n                // 延时器\n                setTimeout(() => {\n                  this.saveFlag = true\n                }, 500)\n                this.closeDialog()\n                this.$message.success('更新成功！')\n              } else {\n                this.$message.error(resp.error.message)\n              }\n            })\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    // 获取选中的协议值\n    changeProtocol(value) {\n      this.httpValue = value\n      this.httpLabel = this.httpOption.find(\n        (item) => item.value === value\n      ).label\n      console.log('选中名称', this.httpLabel)\n    },\n    // 初始化项目列表\n    async initProjectList() {\n      const req_body = {\n        'name': ''\n      }\n      const resp = await projectList(this.req, req_body)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name\n          })\n        }\n        // this.$message.success(\"查询成功！\")\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 修改选中项目\n    changeProject(value) {\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    async getEnvsInfo() {\n      const resp = await getEnvsInfo(this.eid)\n      if (resp.success === true) {\n        this.envForm = resp.result\n        this.projectValue = resp.result.project_id\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n    jumpEnvs() {\n      this.$router.push('/envs/index')\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA,SAAAA,WAAA;AACA,SAAAC,UAAA,EAAAC,UAAA,EAAAC,WAAA,IAAAA,YAAA;AAEA;EACAC,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,GAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;IACAG,GAAA;MACAL,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;EACA;EACAI,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;MACAC,aAAA;MACAC,OAAA;QACAC,UAAA;QACAC,IAAA;QACAC,GAAA;QACAC,OAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAL,IAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAP,GAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAC,SAAA;MACAC,SAAA;MACAC,UAAA,GACA;QACAC,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,EACA;MACAC,QAAA;MACAC,YAAA;MACAC,YAAA;MACAC,aAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,eAAA;IACA,SAAA/B,KAAA;MACA,KAAAQ,SAAA;IACA,gBAAAR,KAAA;MACA,KAAAQ,SAAA;MACA,KAAAV,WAAA;IACA,gBAAAE,KAAA;MACA,KAAAQ,SAAA;MACA,KAAAV,WAAA;IACA;EACA;EACAkC,OAAA;IACAC,WAAA,WAAAA,YAAA;MACA,KAAAC,KAAA;IACA;IACAC,UAAA,WAAAA,WAAAC,QAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,CAAAF,QAAA,EAAAG,QAAA,WAAAC,KAAA;QACA,IAAAA,KAAA;UACA,IAAAH,KAAA,CAAArC,KAAA;YACA,IAAAqC,KAAA,CAAAjC,GAAA;cACAiC,KAAA,CAAA3B,OAAA,CAAAC,UAAA,GAAA0B,KAAA,CAAAjC,GAAA;YACA;cACAiC,KAAA,CAAA3B,OAAA,CAAAC,UAAA,GAAA0B,KAAA,CAAAV,YAAA;YACA;YACAU,KAAA,CAAA3B,OAAA,CAAAK,QAAA,GAAAsB,KAAA,CAAAf,SAAA;YACA1B,UAAA,CAAAyC,KAAA,CAAA3B,OAAA,EAAA+B,IAAA,WAAAC,IAAA;cACA,IAAAA,IAAA,CAAAC,OAAA;gBACA;gBACAC,UAAA;kBACAP,KAAA,CAAAX,QAAA;gBACA;gBACAW,KAAA,CAAAJ,WAAA;gBACAI,KAAA,CAAAQ,QAAA,CAAAF,OAAA;cACA;gBACAN,KAAA,CAAAQ,QAAA,CAAAC,KAAA,CAAAJ,IAAA,CAAAI,KAAA,CAAA3B,OAAA;cACA;YACA;UACA,WAAAkB,KAAA,CAAArC,KAAA;YACAqC,KAAA,CAAA3B,OAAA,CAAAC,UAAA,GAAA0B,KAAA,CAAAV,YAAA;YACAU,KAAA,CAAA3B,OAAA,CAAAK,QAAA,GAAAsB,KAAA,CAAAf,SAAA;YACAzB,UAAA,CAAAwC,KAAA,CAAA/B,GAAA,EAAA+B,KAAA,CAAA3B,OAAA,EAAA+B,IAAA,WAAAC,IAAA;cACA,IAAAA,IAAA,CAAAC,OAAA;gBACA;gBACAC,UAAA;kBACAP,KAAA,CAAAX,QAAA;gBACA;gBACAW,KAAA,CAAAJ,WAAA;gBACAI,KAAA,CAAAQ,QAAA,CAAAF,OAAA;cACA;gBACAN,KAAA,CAAAQ,QAAA,CAAAC,KAAA,CAAAJ,IAAA,CAAAI,KAAA,CAAA3B,OAAA;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACA4B,cAAA,WAAAA,eAAAvB,KAAA;MACA,KAAAH,SAAA,GAAAG,KAAA;MACA,KAAAF,SAAA,QAAAC,UAAA,CAAAyB,IAAA,CACA,UAAAC,IAAA;QAAA,OAAAA,IAAA,CAAAzB,KAAA,KAAAA,KAAA;MAAA,EACA,CAAAC,KAAA;MACAyB,OAAA,CAAAC,GAAA,cAAA7B,SAAA;IACA;IACA;IACAS,eAAA,WAAAA,gBAAA;MAAA,IAAAqB,MAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,QAAA,EAAAf,IAAA,EAAAgB,CAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAN,QAAA;gBACA;cACA;cAAAI,QAAA,CAAAE,IAAA;cAAA,OACApE,WAAA,CAAAyD,MAAA,CAAAY,GAAA,EAAAP,QAAA;YAAA;cAAAf,IAAA,GAAAmB,QAAA,CAAAI,IAAA;cACA,IAAAvB,IAAA,CAAAC,OAAA;gBACA,KAAAe,CAAA,MAAAA,CAAA,GAAAhB,IAAA,CAAAwB,KAAA,CAAAC,MAAA,EAAAT,CAAA;kBACAN,MAAA,CAAAvB,aAAA,CAAAuC,IAAA;oBACA5C,KAAA,EAAAkB,IAAA,CAAAwB,KAAA,CAAAR,CAAA,EAAAW,EAAA;oBACA5C,KAAA,EAAAiB,IAAA,CAAAwB,KAAA,CAAAR,CAAA,EAAA9C;kBACA;gBACA;gBACA;cACA;gBACAwC,MAAA,CAAAP,QAAA,CAAAC,KAAA;cACA;YAAA;YAAA;cAAA,OAAAe,QAAA,CAAAS,IAAA;UAAA;QAAA,GAAAd,OAAA;MAAA;IACA;IACA;IACAe,aAAA,WAAAA,cAAA/C,KAAA;MACA,KAAAG,YAAA,GAAAH,KAAA;MACA,KAAAI,YAAA,QAAAC,aAAA,CAAAmB,IAAA,CACA,UAAAC,IAAA;QAAA,OAAAA,IAAA,CAAAzB,KAAA,KAAAA,KAAA;MAAA,EACA,CAAAC,KAAA;IACA;IACA3B,WAAA,WAAAA,YAAA;MAAA,IAAA0E,MAAA;MAAA,OAAAnB,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAkB,SAAA;QAAA,IAAA/B,IAAA;QAAA,OAAAY,mBAAA,GAAAK,IAAA,UAAAe,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAb,IAAA,GAAAa,SAAA,CAAAZ,IAAA;YAAA;cAAAY,SAAA,CAAAZ,IAAA;cAAA,OACAjE,YAAA,CAAA0E,MAAA,CAAAlE,GAAA;YAAA;cAAAoC,IAAA,GAAAiC,SAAA,CAAAV,IAAA;cACA,IAAAvB,IAAA,CAAAC,OAAA;gBACA6B,MAAA,CAAA9D,OAAA,GAAAgC,IAAA,CAAAkC,MAAA;gBACAJ,MAAA,CAAA7C,YAAA,GAAAe,IAAA,CAAAkC,MAAA,CAAAjE,UAAA;cACA;gBACA6D,MAAA,CAAA3B,QAAA,CAAAC,KAAA,CAAAJ,IAAA,CAAAI,KAAA,CAAA3B,OAAA;cACA;YAAA;YAAA;cAAA,OAAAwD,SAAA,CAAAL,IAAA;UAAA;QAAA,GAAAG,QAAA;MAAA;IACA;IACAI,QAAA,WAAAA,SAAA;MACA,KAAAC,OAAA,CAAAV,IAAA;IACA;EACA;AACA"}]}