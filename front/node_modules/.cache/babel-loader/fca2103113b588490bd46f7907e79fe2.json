{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js!/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/createProjectDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/createProjectDialog.vue","mtime":1685691625967},{"path":"/Users/lvjing/sorcery-management-platform/front/babel.config.js","mtime":1679466191236},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL2x2amluZy9zb3JjZXJ5LW1hbmFnZW1lbnQtcGxhdGZvcm0vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbHZqaW5nL3NvcmNlcnktbWFuYWdlbWVudC1wbGF0Zm9ybS9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBwcm9qZWN0TGlzdCBhcyBfcHJvamVjdExpc3QgfSBmcm9tICdAL2FwaS9wcm9qZWN0cyc7CmltcG9ydCB7IGNyZWF0ZUh0dHBSdW5uZXJQcm9qZWN0IH0gZnJvbSAnQC9hcGkvaHR0cHJ1bm5lcic7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1RpdGxlOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwKICAgICAgcHJvamVjdEZvcm06IHsKICAgICAgICBwcm9qZWN0X2lkOiAwLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNvZGU6ICcnLAogICAgICAgIGVudl9jb2RlOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaVIdHRwUnVubmVy5bel56iL5ZCN56ewJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHJlcTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogMTAKICAgICAgfSwKICAgICAgLy8g5YiG6aG16aG15pWwCiAgICAgIHRvdGFsOiA2LAogICAgICBwcm9qZWN0T3B0aW9uOiBbXSwKICAgICAgc2F2ZUZsYWc6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMucHJvamVjdExpc3QoKTsKICAgIGlmICh0aGlzLnRpdGxlID09PSAnY3JlYXRlUHJvamVjdCcpIHsKICAgICAgdGhpcy5zaG93VGl0bGUgPSAn5Yib5bu6SFRUcFJ1bm5lcumhueebric7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliJ3lp4vljJbpobnnm67liJfooagKICAgIHByb2plY3RMaXN0OiBmdW5jdGlvbiBwcm9qZWN0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcCwgaTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3Byb2plY3RMaXN0KF90aGlzLnJlcSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5wcm9qZWN0VmFsdWUgPSByZXNwLml0ZW1zWzBdLmlkOwogICAgICAgICAgICAgICAgX3RoaXMucHJvamVjdExhYmVsID0gcmVzcC5pdGVtc1swXS5uYW1lOwogICAgICAgICAgICAgICAgX3RoaXMucHJvamVjdEZvcm0ucHJvamVjdF9pZCA9IHJlc3AuaXRlbXNbMF0uaWQ7CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcmVzcC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBfdGhpcy5wcm9qZWN0T3B0aW9uLnB1c2goewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXNwLml0ZW1zW2ldLmlkLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiByZXNwLml0ZW1zW2ldLm5hbWUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LlpLHotKXvvIEnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDkv67mlLnpgInkuK3pobnnm64KICAgIGNoYW5nZVByb2plY3Q6IGZ1bmN0aW9uIGNoYW5nZVByb2plY3QodmFsdWUpIHsKICAgICAgdGhpcy5wcm9qZWN0VmFsdWUgPSB2YWx1ZTsKICAgICAgdGhpcy5wcm9qZWN0TGFiZWwgPSB0aGlzLnByb2plY3RPcHRpb24uZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnZhbHVlID09PSB2YWx1ZTsKICAgICAgfSkubGFiZWw7CiAgICB9LAogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCdjYW5jZWwnLCB7fSk7CiAgICB9LAogICAgLy8g5Yib5bu66aG555uuCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGNyZWF0ZUh0dHBSdW5uZXJQcm9qZWN0KF90aGlzMi5wcm9qZWN0Rm9ybSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgLy8g5Yib5bu65oiQ5Yqf77yM5YWz6Zet5by556qXCiAgICAgICAgICAgICAgX3RoaXMyLmNsb3NlRGlhbG9nKCk7CiAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoJ+mhueebruWIm+W7uuaIkOWKn++8gScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["projectList","createHttpRunnerProject","props","title","type","String","default","data","showTitle","dialogVisible","projectForm","project_id","name","code","env_code","rules","required","message","trigger","req","page","size","total","projectOption","saveFlag","mounted","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resp","i","wrap","_callee$","_context","prev","next","sent","success","projectValue","items","id","projectLabel","length","push","value","label","$message","error","stop","changeProject","find","item","closeDialog","$emit","submitForm","formName","_this2","$refs","validate","valid","then"],"sources":["src/components/HttpRunner/createProjectDialog.vue"],"sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1000px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-form\n      ref=\"ruleForm\"\n      :rules=\"rules\"\n      :model=\"projectForm\"\n      label-width=\"200px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"项目名称\" prop=\"project_id\">\n        <el-select\n          v-model=\"projectForm.project_id\"\n          style=\"width: 760px;\"\n          @change=\"changeProject\"\n        >\n          <el-option\n            v-for=\"item in projectOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"HttpRunner工程名称\" prop=\"name\">\n        <el-input v-model=\"projectForm.name\" />\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <div class=\"dialog-footer\">\n          <el-button @click=\"closeDialog()\">取消</el-button>\n          <el-button\n            type=\"primary\"\n            :disabled=\"saveFlag\"\n            @click=\"submitForm('ruleForm')\"\n          >保存</el-button>\n        </div>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport { projectList } from '@/api/projects'\nimport { createHttpRunnerProject } from '@/api/httprunner'\n\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      projectForm: {\n        project_id: 0,\n        name: '',\n        code: '',\n        env_code: ''\n      },\n      rules: {\n        name: [\n          { required: true, message: '请输入HttpRunner工程名称', trigger: 'blur' }\n        ]\n      },\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 6,\n      projectOption: [],\n      saveFlag: false\n    }\n  },\n  mounted() {\n    this.projectList()\n    if (this.title === 'createProject') {\n      this.showTitle = '创建HTTpRunner项目'\n    }\n  },\n  methods: {\n    // 初始化项目列表\n    async projectList() {\n      const resp = await projectList(this.req)\n      if (resp.success === true) {\n        this.projectValue = resp.items[0].id\n        this.projectLabel = resp.items[0].name\n        this.projectForm.project_id = resp.items[0].id\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name\n          })\n        }\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 修改选中项目\n    changeProject(value) {\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    // 创建项目\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          createHttpRunnerProject(this.projectForm).then((resp) => {\n            if (resp.success === true) {\n              // 创建成功，关闭弹窗\n              this.closeDialog()\n              this.$message.success('项目创建成功！')\n            } else {\n              this.$message.error(resp.error.message)\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n</style>\n"],"mappings":"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"}]}