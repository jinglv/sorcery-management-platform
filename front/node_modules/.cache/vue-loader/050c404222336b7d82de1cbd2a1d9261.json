{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/views/envs/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/views/envs/index.vue","mtime":1703051945399},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHByb2plY3RMaXN0IH0gZnJvbSAnQC9hcGkvcHJvamVjdHMnCmltcG9ydCB7IGVudnNMaXN0LCBkZWxldGVFbnZzIH0gZnJvbSAnQC9hcGkvZW52cycKaW1wb3J0IEVudnNEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0VudnMvZW52c0RpYWxvZycKCmV4cG9ydCBkZWZhdWx0ICh7CiAgbmFtZTogJ0VudnMnLAogIGNvbXBvbmVudHM6IHsKICAgIEVudnNEaWFsb2cKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9qYWN0Q3JydWVudElkOiAwLAogICAgICBwcm9qZWN0VmFsdWU6ICcnLAogICAgICBwcm9qZWN0TGFiZWw6ICcnLAogICAgICBwcm9qZWN0T3B0aW9uOiBbXSwKICAgICAgZW52c0Zyb206IHsKICAgICAgICAnbmFtZSc6ICcnLAogICAgICAgICdwcm9qZWN0X2lkJzogMCwKICAgICAgICAnZW52JzogJycsCiAgICAgICAgJ2Jyb3dzZXInOiAnJywKICAgICAgICAncHJvdG9jb2wnOiAnJywKICAgICAgICAnYmFzZV91cmwnOiAnJwogICAgICB9LAogICAgICBodHRwVmFsdWU6IHVuZGVmaW5lZCwKICAgICAgaHR0cExhYmVsOiAnJywKICAgICAgaHR0cE9wdGlvbjogWwogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAxLAogICAgICAgICAgbGFiZWw6ICdodHRwOi8vJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgICBsYWJlbDogJ2h0dHBzOi8vJwogICAgICAgIH0KICAgICAgXSwKICAgICAgcmVxOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBzaXplOiAxMAogICAgICB9LAogICAgICB0b3RhbDogMTAsCiAgICAgIGVudnNEYXRhOiBbXSwKICAgICAgZGlhbG9nRW52c0ZsYWc6IGZhbHNlLAogICAgICBjdXJyZW50RW52czogMCwgLy8g5b2T5YmN6YCJ5Lit55qE546v5aKD5L+h5oGvCiAgICAgIGVudnNUaXRsZTogJ2NyZWF0ZScKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRQcm9qZWN0TGlzdCgpCiAgICB0aGlzLmluaXRFbnZzTGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliJ3lp4vljJbpobnnm67liJfooagKICAgIGFzeW5jIGluaXRQcm9qZWN0TGlzdCgpIHsKICAgICAgY29uc3QgcmVxX2JvZHkgPSB7CiAgICAgICAgJ25hbWUnOiAnJwogICAgICB9CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBwcm9qZWN0TGlzdCh0aGlzLnJlcSwgcmVxX2JvZHkpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMucHJvamVjdE9wdGlvbi5wdXNoKHsKICAgICAgICAgICAgdmFsdWU6IHJlc3AuaXRlbXNbaV0uaWQsCiAgICAgICAgICAgIGxhYmVsOiByZXNwLml0ZW1zW2ldLm5hbWUKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5p+l6K+i5oiQ5Yqf77yBIikKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LlpLHotKXvvIEnKQogICAgICB9CiAgICB9LAogICAgLy8g5L+u5pS56YCJ5Lit6aG555uuCiAgICBjaGFuZ2VQcm9qZWN0KHZhbHVlKSB7CiAgICAgIHRoaXMucHJvamVjdFZhbHVlID0gdmFsdWUKICAgICAgdGhpcy5wcm9qZWN0TGFiZWwgPSB0aGlzLnByb2plY3RPcHRpb24uZmluZCgKICAgICAgICAoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gdmFsdWUKICAgICAgKS5sYWJlbAogICAgfSwKICAgIC8vIOiOt+WPlumAieS4reeahOWNj+iuruWAvAogICAgY2hhbmdlUHJvdG9jb2wodmFsdWUpIHsKICAgICAgdGhpcy5odHRwVmFsdWUgPSB2YWx1ZQogICAgICB0aGlzLmh0dHBMYWJlbCA9IHRoaXMuaHR0cE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLmxhYmVsCiAgICB9LAogICAgLy8g5YiG6aG15p+l6K+i6aG555uu5YiX6KGoCiAgICBhc3luYyBpbml0RW52c0xpc3QoKSB7CiAgICAgIHRoaXMuZW52c0Zyb20ucHJvamVjdF9pZCA9IHRoaXMucHJvamVjdFZhbHVlID09PSAnJyA/IDAgOiB0aGlzLnByb2plY3RWYWx1ZQogICAgICB0aGlzLmVudnNGcm9tLnByb3RvY29sID0gdGhpcy5odHRwTGFiZWwKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGVudnNMaXN0KHRoaXMucmVxLCBKU09OLnN0cmluZ2lmeSh0aGlzLmVudnNGcm9tKSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIGNvbnN0IHJlc0RhdGEgPSByZXNwLml0ZW1zCiAgICAgICAgdGhpcy5lbnZzRGF0YSA9IHJlc0RhdGEKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc0RhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJlc0RhdGFbaV0uY3JlYXRlX3RpbWUgPSB0aGlzLiRtb21lbnQoCiAgICAgICAgICAgIHJlc0RhdGFbaV0uY3JlYXRlX3RpbWUKICAgICAgICAgICkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykKICAgICAgICB9CiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AudG90YWwKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+afpeivouaIkOWKn++8gScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIC8vIOa4hemZpOaQnOe0ogogICAgY2xlYXJTZWFyY2goKSB7CiAgICAgIHRoaXMucHJvamVjdFZhbHVlID0gMAogICAgICBpZiAodGhpcy5wcm9qZWN0VmFsdWUgPT09IDApIHsKICAgICAgICB0aGlzLnByb2plY3RWYWx1ZSA9ICcnCiAgICAgIH0KICAgICAgdGhpcy5lbnZzRnJvbS5uYW1lID0gJycKICAgICAgdGhpcy5lbnZzRnJvbS5lbnYgPSAnJwogICAgICB0aGlzLmh0dHBMYWJlbCA9ICcnCiAgICAgIHRoaXMuaHR0cFZhbHVlID0gdW5kZWZpbmVkCiAgICAgIHRoaXMuaW5pdEVudnNMaXN0KCkKICAgIH0sCiAgICAvLyDliJvlu7rmqKHlnZcKICAgIGNyZWF0ZUVudigpIHsKICAgICAgdGhpcy5kaWFsb2dFbnZzRmxhZyA9IHRydWUKICAgIH0sCiAgICAvLyDliJvlu7rmqKHlnZflhbPpl60KICAgIGNsb3NlRW52RGlhbG9nKCkgewogICAgICB0aGlzLmRpYWxvZ0VudnNGbGFnID0gZmFsc2UKICAgICAgdGhpcy5pbml0RW52c0xpc3QoKQogICAgfSwKICAgIC8vIOafpeeci+eUqOS+i+ivpuaDhQogICAgdmlld1Jvd0VudnNJbmZvKHJvdykgewogICAgICAvLyDngrnlh7vnlKjkvovvvIzojrflj5bnlKjkvotpZAogICAgICB0aGlzLmN1cnJlbnRFbnZzID0gcm93LmlkCiAgICAgIHRoaXMuZGlhbG9nRW52c0ZsYWcgPSB0cnVlCiAgICAgIHRoaXMuZW52c1RpdGxlID0gJ3ZpZXcnCiAgICB9LAogICAgLy8g57yW6L6R5rWL6K+V55So5L6LCiAgICBlZGl0Um93RW52c0VkaXQocm93KSB7CiAgICAgIC8vIOeCueWHu+eUqOS+i++8jOiOt+WPlueUqOS+i2lkCiAgICAgIHRoaXMuY3VycmVudEVudnMgPSByb3cuaWQKICAgICAgdGhpcy5kaWFsb2dFbnZzRmxhZyA9IHRydWUKICAgICAgdGhpcy5lbnZzVGl0bGUgPSAnZWRpdCcKICAgIH0sCiAgICAvLyDliKDpmaTmtYvor5XnlKjkvosKICAgIGFzeW5jIGRlbGV0ZVJvd0VudnMocm93KSB7CiAgICAgIGF3YWl0IGRlbGV0ZUVudnMocm93LmlkKS50aGVuKChyZXNwKSA9PiB7CiAgICAgICAgdGhpcy4kY29uZmlybSgn5Yig6Zmk5Lu75YqhLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgY2VudGVyOiB0cnVlCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuaW5pdEVudnNMaXN0KCkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5lcnJvci5tc2cpCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgIH0pCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0KICB9Cn0pCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/envs","sourcesContent":["<template>\n  <div class=\"evns\">\n    <div class=\"filter-container\">\n      <el-row :gutter=\"24\">\n        <el-col :span=\"6\">\n          <div class=\"demo-input-suffix\">\n            项目名称:\n            <el-select\n              v-model=\"projectValue\"\n              placeholder=\"请选择项目\"\n              @change=\"changeProject\"\n            >\n              <el-option\n                v-for=\"item in projectOption\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"demo-input-suffix\">\n            环境名称:\n            <el-input v-model=\"envsFrom.name\" placeholder=\"请输入环境名称\" style=\"width: 60%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"demo-input-suffix\">\n            环境标识:\n            <el-input v-model=\"envsFrom.env\" placeholder=\"请输入环境标识\" style=\"width: 60%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"demo-input-suffix\">\n            请求协议:\n            <el-select\n              v-model=\"httpValue\"\n              placeholder=\"请选择协议\"\n              @change=\"changeProtocol\"\n            >\n              <el-option\n                v-for=\"item in httpOption\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </div>\n        </el-col>\n      </el-row>\n      <div style=\"text-align: right;margin-top: 10px;\">\n        <el-button class=\"filter-item\" icon=\"el-icon-delete\" @click=\"clearSearch()\">重置</el-button>\n        <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"initEnvsList()\">搜索</el-button>\n      </div>\n    </div>\n    <div class=\"envs-create\" style=\"margin-top: 10px;\">\n      <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-circle-plus-outline\" @click=\"createEnv()\">创建</el-button>\n    </div>\n    <div class=\"envs-list\" style=\"margin-top: 10px;\">\n      <el-table\n        :data=\"envsData\"\n        border\n        style=\"width: 100%\"\n      >\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n        <el-table-column prop=\"name\" label=\"环境名称\" width=\"auto\" />\n        <el-table-column prop=\"project_name\" label=\"项目名称\" width=\"auto\" />\n        <el-table-column prop=\"env\" label=\"环境标识\" width=\"auto\" />\n        <el-table-column prop=\"protocol\" label=\"请求协议\" width=\"auto\" />\n        <el-table-column prop=\"base_url\" label=\"URL\" width=\"auto\" />\n        <el-table-column prop=\"create_time\" label=\"创建时间\" width=\"auto\" />\n        <el-table-column fixed=\"right\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              @click=\"viewRowEnvsInfo(scope.row)\"\n            >查看</el-button>\n            <el-button\n              type=\"text\"\n              @click=\"editRowEnvsEdit(scope.row)\"\n            >编辑</el-button>\n            <el-button\n              type=\"text\"\n              @click=\"deleteRowEnvs(scope.row)\"\n            >删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <!--环境模块-->\n    <envs-dialog v-if=\"dialogEnvsFlag\" :title=\"envsTitle\" :eid=\"currentEnvs\" :pid=\"projactCrruentId\" @cancel=\"closeEnvDialog\" />\n  </div>\n</template>\n\n<script>\nimport { projectList } from '@/api/projects'\nimport { envsList, deleteEnvs } from '@/api/envs'\nimport EnvsDialog from '@/components/Envs/envsDialog'\n\nexport default ({\n  name: 'Envs',\n  components: {\n    EnvsDialog\n  },\n  data() {\n    return {\n      projactCrruentId: 0,\n      projectValue: '',\n      projectLabel: '',\n      projectOption: [],\n      envsFrom: {\n        'name': '',\n        'project_id': 0,\n        'env': '',\n        'browser': '',\n        'protocol': '',\n        'base_url': ''\n      },\n      httpValue: undefined,\n      httpLabel: '',\n      httpOption: [\n        {\n          value: 1,\n          label: 'http://'\n        },\n        {\n          value: 2,\n          label: 'https://'\n        }\n      ],\n      req: {\n        page: 1,\n        size: 10\n      },\n      total: 10,\n      envsData: [],\n      dialogEnvsFlag: false,\n      currentEnvs: 0, // 当前选中的环境信息\n      envsTitle: 'create'\n    }\n  },\n  mounted() {\n    this.initProjectList()\n    this.initEnvsList()\n  },\n  methods: {\n    // 初始化项目列表\n    async initProjectList() {\n      const req_body = {\n        'name': ''\n      }\n      const resp = await projectList(this.req, req_body)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name\n          })\n        }\n        // this.$message.success(\"查询成功！\")\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 修改选中项目\n    changeProject(value) {\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    // 获取选中的协议值\n    changeProtocol(value) {\n      this.httpValue = value\n      this.httpLabel = this.httpOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    // 分页查询项目列表\n    async initEnvsList() {\n      this.envsFrom.project_id = this.projectValue === '' ? 0 : this.projectValue\n      this.envsFrom.protocol = this.httpLabel\n      const resp = await envsList(this.req, JSON.stringify(this.envsFrom))\n      if (resp.success === true) {\n        const resData = resp.items\n        this.envsData = resData\n        for (let i = 0; i < resData.length; i++) {\n          resData[i].create_time = this.$moment(\n            resData[i].create_time\n          ).format('YYYY-MM-DD HH:mm:ss')\n        }\n        this.total = resp.total\n        this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 清除搜索\n    clearSearch() {\n      this.projectValue = 0\n      if (this.projectValue === 0) {\n        this.projectValue = ''\n      }\n      this.envsFrom.name = ''\n      this.envsFrom.env = ''\n      this.httpLabel = ''\n      this.httpValue = undefined\n      this.initEnvsList()\n    },\n    // 创建模块\n    createEnv() {\n      this.dialogEnvsFlag = true\n    },\n    // 创建模块关闭\n    closeEnvDialog() {\n      this.dialogEnvsFlag = false\n      this.initEnvsList()\n    },\n    // 查看用例详情\n    viewRowEnvsInfo(row) {\n      // 点击用例，获取用例id\n      this.currentEnvs = row.id\n      this.dialogEnvsFlag = true\n      this.envsTitle = 'view'\n    },\n    // 编辑测试用例\n    editRowEnvsEdit(row) {\n      // 点击用例，获取用例id\n      this.currentEnvs = row.id\n      this.dialogEnvsFlag = true\n      this.envsTitle = 'edit'\n    },\n    // 删除测试用例\n    async deleteRowEnvs(row) {\n      await deleteEnvs(row.id).then((resp) => {\n        this.$confirm('删除任务, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning',\n          center: true\n        }).then(() => {\n          if (resp.success === true) {\n            this.initEnvsList()\n          } else {\n            this.$message.error(resp.error.msg)\n          }\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          })\n        })\n      })\n    }\n  }\n})\n</script>\n"]}]}