{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/Infos/harApiInfoDialog.vue?vue&type=style&index=0&id=30b76831&scoped=true&lang=css&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/Infos/harApiInfoDialog.vue","mtime":1685670420137},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/css-loader/dist/cjs.js","mtime":1679466708477},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1679466707591},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/postcss-loader/src/index.js","mtime":1679466707836},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2ltYWdlIHsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9Cg=="},{"version":3,"sources":["harApiInfoDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA","file":"harApiInfoDialog.vue","sourceRoot":"src/components/Infos","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1200px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-form\n      ref=\"ruleForm\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item>\n        <el-table\n          :data=\"apiData\"\n          style=\"width: 100%\"\n        >\n          <el-table-column type=\"expand\">\n            <template slot-scope=\"props\">\n              <el-form label-position=\"left\" inline class=\"demo-table-expand\">\n                <el-form-item label=\"接口URL:\" :inline=\"true\">\n                  <span>{{ props.row.url }}</span>\n                </el-form-item>\n                <br>\n                <el-form-item label=\"接口请求方式:\" style=\"margin-top: 10px;\" :inline=\"true\">\n                  <span>{{ props.row.method }}</span>\n                </el-form-item>\n                <br>\n                <el-form-item label=\"接口请求头信息:\" style=\"margin-top: 10px;\" :inline=\"true\">\n                  <el-table\n                    :data=\"props.row.request_headers\"\n                    border\n                    style=\"width: 600px\"\n                  >\n                    <el-table-column\n                      prop=\"name\"\n                      label=\"name\"\n                      width=\"200\"\n                    />\n                    <el-table-column\n                      prop=\"value\"\n                      label=\"value\"\n                    />\n                    <el-table-column prop=\"操作\" label=\"操作\">\n                      <template slot-scope=\"scope\">\n                        <el-button\n                          type=\"text\"\n                          @click.native.prevent=\"deleteRow(scope.$index, props.row.request_headers)\"\n                        >\n                          <i class=\"el-icon-delete\" />\n                        </el-button>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </el-form-item>\n                <br>\n                <el-form-item label=\"接口请求参数:\" style=\"margin-top: 10px;\" :inline=\"true\">\n                  <el-table\n                    :data=\"props.row.request_params\"\n                    border\n                    style=\"width: 600px; margin-left: 13px;\"\n                  >\n                    <el-table-column\n                      prop=\"name\"\n                      label=\"name\"\n                      width=\"200\"\n                    />\n                    <el-table-column\n                      prop=\"value\"\n                      label=\"value\"\n                    />\n                  </el-table>\n                </el-form-item>\n                <br>\n                <el-form-item label=\"接口请求主体:\" style=\"margin-top: 10px;\" :inline=\"true\">\n                  <json-viewer :value=\"props.row.request_body\" :expand-depth=\"3\" />\n                </el-form-item>\n                <br>\n                <el-form-item label=\"接口响应头信息:\" style=\"margin-top: 10px;\" :inline=\"true\">\n                  <el-table\n                    :data=\"props.row.response_headers\"\n                    border\n                    style=\"width: 600px\"\n                  >\n                    <el-table-column\n                      prop=\"name\"\n                      label=\"name\"\n                      width=\"200\"\n                    />\n                    <el-table-column\n                      prop=\"value\"\n                      label=\"value\"\n                    />\n                  </el-table>\n                </el-form-item>\n                <br>\n                <el-form-item label=\"接口响应主体:\" style=\"margin-top: 10px;\" :inline=\"true\">\n                  <json-viewer :value=\"props.row.response_body\" :expand-depth=\"3\" />\n                </el-form-item>\n              </el-form>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"url\" label=\"接口URL\" width=\"600\" />\n          <el-table-column prop=\"method\" label=\"接口请求方式\" />\n          <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button\n                type=\"text\"\n                @click.native.prevent=\"deleteRow(scope.$index, apiData)\"\n              >\n                <i class=\"el-icon-delete\" />\n              </el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-form-item>\n    </el-form>\n    <div class=\"dialog-footer\" style=\"text-align: right\">\n      <el-button @click=\"closeDialog()\">返回</el-button>\n      <el-button\n        type=\"primary\"\n        @click=\"saveApis()\"\n      >保存</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { harApiInfo, saveApiInfo } from '@/api/infos'\nimport jsonViewer from 'vue-json-viewer'\n\nexport default {\n  components: {\n    jsonViewer\n  },\n  props: {\n    fn: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      apiData: [],\n      apiFrom: {\n        name: '',\n        url: '',\n        method: '',\n        request_headers: [],\n        request_params: [],\n        request_body: '',\n        response_body: ''\n      }\n    }\n  },\n  mounted() {\n    this.harApiInfo()\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    async harApiInfo() {\n      const req = {\n        'har_file': this.fn\n      }\n      const resp = await harApiInfo(req)\n      if (resp.success === true) {\n        this.apiData = resp.result\n        this.$message.success('Har文件解析成功!')\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n    deleteRow(index, rows) {\n      rows.splice(index, 1)\n    },\n    async saveApis() {\n      const data = this.apiData\n      for (let i = 0; i < data.length; i++) {\n        this.apiFrom.name = this.fn\n        this.apiFrom.url = data[i].url\n        this.apiFrom.method = data[i].method\n        this.apiFrom.request_headers = data[i].request_headers\n        this.apiFrom.request_params = data[i].request_params\n        this.apiFrom.request_body = data[i].request_body\n        this.apiFrom.response_body = data[i].response_body\n        console.info('接口信息：', this.apiFrom)\n        const resp = await saveApiInfo(this.apiFrom)\n        if (resp.success === true) {\n          this.$message.success('接口保存成功!')\n        } else {\n          this.$message.error(resp.error.message)\n        }\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n</style>\n"]}]}