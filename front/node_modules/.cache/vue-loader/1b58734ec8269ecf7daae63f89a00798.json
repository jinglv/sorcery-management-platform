{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/components/HttpRunner/httpRunnerTestCaseDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/components/HttpRunner/httpRunnerTestCaseDialog.vue","mtime":1698032217391},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGh0dHBSdW5uZXJQcm9qZWN0TGlzdCwgcnVuLCBnZXRIdHRwUnVubmVyQXBpSWRzLCBjcmVhdGVIdHRwUnVubmVyVGVzdENhc2UsIGh0dHBSdW5uZXJUZXN0Q2FzZURldGFpbCwgdXBkYXRlSHR0cFJ1bm5lclRlc3RDYXNlIH0gZnJvbSAnQC9hcGkvaHR0cHJ1bm5lcicKaW1wb3J0IGFjZUNvZGVFZGl0b3JEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0h0dHBSdW5uZXIvYWNlQ29kZUVkaXRvckRpYWxvZycKaW1wb3J0IGRpY3REaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0FwaS9kaWN0RGlhbG9nJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIGFjZUNvZGVFZGl0b3JEaWFsb2csCiAgICBkaWN0RGlhbG9nCiAgfSwKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgY2lkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpbWVMaW5lSGVpZ2h0OiAnJywKICAgICAgcHJvamVjdFZhbHVlOiAnJywKICAgICAgcHJvamVjdExhYmVsOiAnJywKICAgICAgcHJvamVjdE9wdGlvbjogW10sCiAgICAgIGFwaURldGFpbEluZm86IHt9LAogICAgICB0ZXN0U3RlcExpc3Q6IFt7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgYXBpX2lkOiAnJywKICAgICAgICB2YXJpYWJsZXM6IFtdLAogICAgICAgIGV4dHJhY3RzOiBbXSwKICAgICAgICB2YWxpZGF0ZXM6IFtdLAogICAgICAgIC8vIOaYr+WQpuaYvuekuuaWsOWinuaMiemSrgogICAgICAgIHNob3c6ICd0cnVlJwogICAgICB9XSwKICAgICAgYXBpVmFsdWU6ICcnLAogICAgICBhcGlMYWJlbDogJycsCiAgICAgIGFwaU9wdGlvbjogW10sCiAgICAgIGNhc2VzRnJvbTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGh0dHBydW5uZXJfcHJvamVjdF9pZDogJycsCiAgICAgICAgcHVibGljX3ZhcmlhYmxlczogJycsCiAgICAgICAgdGVzdF9jYXNlX2luZm9zOiBbXSwKICAgICAgICBwcmVfcHJvY2Vzc29yOiAnJywKICAgICAgICBwb3N0X3Byb2Nlc3NvcjogJycKICAgICAgfSwKICAgICAgcHVibGljVmFyaWFibGU6IFt7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIC8vIOaYr+WQpuaYvuekuuaWsOWinuaMiemSrgogICAgICAgIHNob3c6ICd0cnVlJwogICAgICB9XSwKICAgICAgYXNzZXJ0TGFiZWw6ICcnLAogICAgICBhc3NlcnRPcHRpb246IFsKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2NvbnRhaW5zJywKICAgICAgICAgIGxhYmVsOiAnQ09OVEFJTlMnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2VxJywKICAgICAgICAgIGxhYmVsOiAnRVFVQUwnCiAgICAgICAgfQogICAgICBdLAogICAgICB2YXJpYWJsZXM6IFtdLAogICAgICBleHRyYWN0czogW10sCiAgICAgIHZhbGlkYXRlczogW10sCiAgICAgIGFjdGl2ZU5hbWU6ICdmaXJzdCcsCiAgICAgIGxhbmd1YWdlX3B5dGhvbjogJ3B5dGhvbicsCiAgICAgIHByZV9jb2RlOiAnJywKICAgICAgaW5fcHJlX2NvZGU6ICcnLAogICAgICBwb3N0X2NvZGU6ICcnLAogICAgICBpbl9wb3N0X2NvZGU6ICcnLAogICAgICByZXN1bHQ6ICcnLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIOeql+WPo+a7keWKqAogICAgdGhpcy50aW1lTGluZUhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLSAxNTAKICAgIHdpbmRvdy5vbnJlc2l6ZSA9ICgpID0+IHsgdGhpcy50aW1lTGluZUhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLSAxNTAgfQogICAgdGhpcy5pbml0SHR0cFJ1bm5lclByb2plY3RMaXN0KCkKICAgIGlmICh0aGlzLnRpdGxlID09PSAn57yW6L6R5rWL6K+V55So5L6LJykgewogICAgICB0aGlzLmh0dHBSdW5uZXJUZXN0Q2FzZURldGFpbCgpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FuY2VsJywge30pCiAgICB9LAogICAgYXN5bmMgaW5pdEh0dHBSdW5uZXJQcm9qZWN0TGlzdCgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGh0dHBSdW5uZXJQcm9qZWN0TGlzdCh0aGlzLnJlcSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5wcm9qZWN0T3B0aW9uLnB1c2goewogICAgICAgICAgICB2YWx1ZTogcmVzcC5pdGVtc1tpXS5pZCwKICAgICAgICAgICAgbGFiZWw6IHJlc3AuaXRlbXNbaV0ubmFtZQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AudG90YWwKICAgICAgICAvLyB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+afpeivouaIkOWKn++8gScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVByb2plY3QodmFsdWUpIHsKICAgICAgdGhpcy5wcm9qZWN0VmFsdWUgPSB2YWx1ZQogICAgICB0aGlzLnByb2plY3RMYWJlbCA9IHRoaXMucHJvamVjdE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLmxhYmVsCiAgICAgIHRoaXMuaHR0cFJ1bm5lckFwaUlkcyh2YWx1ZSkKICAgIH0sCiAgICBhc3luYyBodHRwUnVubmVyQXBpSWRzKHByb2plY3RJZCkgewogICAgICBjb25zdCByZXNwID0gYXdhaXQgZ2V0SHR0cFJ1bm5lckFwaUlkcyhwcm9qZWN0SWQpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AucmVzdWx0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLmFwaU9wdGlvbi5wdXNoKHsKICAgICAgICAgICAgdmFsdWU6IHJlc3AucmVzdWx0W2ldLmlkLAogICAgICAgICAgICBsYWJlbDogcmVzcC5yZXN1bHRbaV0ubmFtZQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmn6Xor6LmiJDlip/vvIEnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDmtYvor5XmraXpqqQKICAgIGFkZFRlc3RTdGVwKGluZGV4KSB7CiAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLnRlc3RTdGVwTGlzdAogICAgICBsaXN0W2luZGV4XS5zaG93ID0gJ2ZhbHNlJwogICAgICBsaXN0LnB1c2goewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGFwaV9pZDogJycsCiAgICAgICAgdmFyaWFibGVzOiBbXSwKICAgICAgICBleHRyYWN0czogW10sCiAgICAgICAgdmFsaWRhdGVzOiBbXSwKICAgICAgICBzaG93OiAndHJ1ZScKICAgICAgfSkKICAgICAgdGhpcy50ZXN0U3RlcExpc3QgPSBsaXN0CiAgICB9LAogICAgYWRkRXh0cmFjdHMoc2NvcGUpIHsKICAgICAgc2NvcGUucm93LmV4dHJhY3RzLnB1c2goeyBuYW1lOiAnJywgdmFsdWU6ICcnIH0pCiAgICB9LAogICAgcmVtb3ZlRXh0cmFjdHMoc2NvcGUsIGluZGV4KSB7CiAgICAgIHNjb3BlLnJvdy5leHRyYWN0cy5zcGxpY2UoaW5kZXgsIDEpCiAgICB9LAogICAgYWRkVmFsaWRhdGVzKHNjb3BlKSB7CiAgICAgIHNjb3BlLnJvdy52YWxpZGF0ZXMucHVzaCh7IGFzc2VydF90eXBlOiAnJywgYXNzZXJ0X2V4dHJhY3Q6ICcnLCBleHBlY3RfdGV4dDogJycgfSkKICAgIH0sCiAgICBjaGFuZ2VBc3NlcnQodmFsdWUpIHsKICAgICAgdGhpcy5hc3NlcnRfdHlwZSA9IHZhbHVlCiAgICAgIHRoaXMuYXNzZXJ0TGFiZWwgPSB0aGlzLmFzc2VydE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLmxhYmVsCiAgICB9LAogICAgcmVtb3ZlVmFsaWRhdGVzKHNjb3BlLCBpbmRleCkgewogICAgICBzY29wZS5yb3cudmFsaWRhdGVzLnNwbGljZShpbmRleCwgMSkKICAgIH0sCiAgICBhZGRWYXJpYWJsZXMoc2NvcGUpIHsKICAgICAgc2NvcGUucm93LnZhcmlhYmxlcy5wdXNoKHsgbmFtZTogJycsIHZhbHVlOiAnJyB9KQogICAgfSwKICAgIHJlbW92ZVZhcmlhYmxlcyhzY29wZSwgaW5kZXgpIHsKICAgICAgc2NvcGUucm93LnZhcmlhYmxlcy5zcGxpY2UoaW5kZXgsIDEpCiAgICB9LAogICAgcmVtb3ZlVGVzdFN0ZXAoaW5kZXgpIHsKICAgICAgY29uc3QgbGlzdCA9IHRoaXMudGVzdFN0ZXBMaXN0CiAgICAgIGlmIChpbmRleCA9PT0gMCAmJiBsaXN0Lmxlbmd0aCA9PT0gMSkgewogICAgICAgIGxpc3Quc3BsaWNlKGluZGV4LCAxKQogICAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgIGFwaV9pZDogJycsCiAgICAgICAgICB2YXJpYWJsZXM6IFtdLAogICAgICAgICAgZXh0cmFjdHM6IFtdLAogICAgICAgICAgdmFsaWRhdGVzOiBbXSwKICAgICAgICAgIHNob3c6ICd0cnVlJwogICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIH0KICAgICAgaWYgKGluZGV4ID09PSBsaXN0Lmxlbmd0aCkgewogICAgICAgIGxpc3RbaW5kZXggLSAxXS5zaG93ID0gJ3RydWUnCiAgICAgIH0KICAgICAgdGhpcy50ZXN0U3RlcExpc3QgPSBsaXN0CiAgICB9LAogICAgZ2V0UHJlQ29kZShjb2RlKSB7CiAgICAgIHRoaXMuaW5fcHJlX2NvZGUgPSBjb2RlCiAgICB9LAogICAgZ2V0UG9zdENvZGUoY29kZSkgewogICAgICB0aGlzLmluX3Bvc3RfY29kZSA9IGNvZGUKICAgIH0sCiAgICBhc3luYyBjcmVhdGVUZXN0Q2FzZSgpIHsKICAgICAgY29uc3QgdGVzdFN0ZXBzID0gW10KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRlc3RTdGVwTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHN0ZXAgPSB0aGlzLnRlc3RTdGVwTGlzdFtpXQogICAgICAgIGNvbnN0IHN0ZXBfZGljdCA9IHsKICAgICAgICAgICduYW1lJzogc3RlcC5uYW1lLAogICAgICAgICAgJ2FwaV9pZCc6IHN0ZXAuYXBpX2lkLAogICAgICAgICAgJ3ZhcmlhYmxlcyc6IHRoaXMubGlzdF90b19kaWN0KHN0ZXAudmFyaWFibGVzKSwKICAgICAgICAgICdleHRyYWN0cyc6IHRoaXMubGlzdF90b19kaWN0KHN0ZXAuZXh0cmFjdHMpLAogICAgICAgICAgJ3ZhbGlkYXRlcyc6IHN0ZXAudmFsaWRhdGVzLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgY29uc3QgYXNzZXJ0VHlwZSA9IGl0ZW0uYXNzZXJ0X3R5cGUKICAgICAgICAgICAgY29uc3QgYXNzZXJ0RXh0cmFjdCA9IGl0ZW0uYXNzZXJ0X2V4dHJhY3QKICAgICAgICAgICAgY29uc3QgZXhwZWN0VGV4dCA9IGl0ZW0uZXhwZWN0X3RleHQKICAgICAgICAgICAgcmV0dXJuIHsgW2Fzc2VydFR5cGVdOiBbYXNzZXJ0RXh0cmFjdCwgZXhwZWN0VGV4dF0gfQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgdGVzdFN0ZXBzLnB1c2goc3RlcF9kaWN0KQogICAgICB9CiAgICAgIGNvbnN0IHB1YmxpY192YXJpYWJsZXNfZGljdCA9IHRoaXMubGlzdF90b19kaWN0KHRoaXMucHVibGljVmFyaWFibGUpCiAgICAgIHRoaXMuY2FzZXNGcm9tLnB1YmxpY192YXJpYWJsZXMgPSBwdWJsaWNfdmFyaWFibGVzX2RpY3QKICAgICAgdGhpcy5jYXNlc0Zyb20udGVzdF9jYXNlX2luZm9zID0gdGVzdFN0ZXBzCiAgICAgIHRoaXMuY2FzZXNGcm9tLnByZV9wcm9jZXNzb3IgPSB0aGlzLmluX3ByZV9jb2RlCiAgICAgIHRoaXMuY2FzZXNGcm9tLnBvc3RfcHJvY2Vzc29yID0gdGhpcy5pbl9wb3N0X2NvZGUKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBjb25zdCByZXNwID0gYXdhaXQgY3JlYXRlSHR0cFJ1bm5lclRlc3RDYXNlKHRoaXMuY2FzZXNGcm9tKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliJvlu7rmiJDlip/vvIEnKQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Yib5bu65aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHVwZGF0ZVRlc3RDYXNlKCkgewogICAgICBjb25zdCB0ZXN0U3RlcHMgPSBbXQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGVzdFN0ZXBMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgc3RlcCA9IHRoaXMudGVzdFN0ZXBMaXN0W2ldCiAgICAgICAgY29uc3Qgc3RlcF9kaWN0ID0gewogICAgICAgICAgJ25hbWUnOiBzdGVwLm5hbWUsCiAgICAgICAgICAnYXBpX2lkJzogc3RlcC5hcGlfaWQsCiAgICAgICAgICAndmFyaWFibGVzJzogdGhpcy5saXN0X3RvX2RpY3Qoc3RlcC52YXJpYWJsZXMpLAogICAgICAgICAgJ2V4dHJhY3RzJzogdGhpcy5saXN0X3RvX2RpY3Qoc3RlcC5leHRyYWN0cyksCiAgICAgICAgICAndmFsaWRhdGVzJzogc3RlcC52YWxpZGF0ZXMubWFwKGl0ZW0gPT4gewogICAgICAgICAgICBjb25zdCBhc3NlcnRUeXBlID0gaXRlbS5hc3NlcnRfdHlwZQogICAgICAgICAgICBjb25zdCBhc3NlcnRFeHRyYWN0ID0gaXRlbS5hc3NlcnRfZXh0cmFjdAogICAgICAgICAgICBjb25zdCBleHBlY3RUZXh0ID0gaXRlbS5leHBlY3RfdGV4dAogICAgICAgICAgICByZXR1cm4geyBbYXNzZXJ0VHlwZV06IFthc3NlcnRFeHRyYWN0LCBleHBlY3RUZXh0XSB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICB0ZXN0U3RlcHMucHVzaChzdGVwX2RpY3QpCiAgICAgIH0KICAgICAgY29uc3QgcHVibGljX3ZhcmlhYmxlc19kaWN0ID0gdGhpcy5saXN0X3RvX2RpY3QodGhpcy5wdWJsaWNWYXJpYWJsZSkKICAgICAgdGhpcy5jYXNlc0Zyb20ucHVibGljX3ZhcmlhYmxlcyA9IHB1YmxpY192YXJpYWJsZXNfZGljdAogICAgICB0aGlzLmNhc2VzRnJvbS50ZXN0X2Nhc2VfaW5mb3MgPSB0ZXN0U3RlcHMKICAgICAgdGhpcy5jYXNlc0Zyb20ucHJlX3Byb2Nlc3NvciA9IHRoaXMuaW5fcHJlX2NvZGUKICAgICAgdGhpcy5jYXNlc0Zyb20ucG9zdF9wcm9jZXNzb3IgPSB0aGlzLmluX3Bvc3RfY29kZQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB1cGRhdGVIdHRwUnVubmVyVGVzdENhc2UodGhpcy5jaWQsIHRoaXMuY2FzZXNGcm9tKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDmiJDlip/vvIEnKQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pu05paw5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIC8vIOi/kOihjAogICAgYXN5bmMgcnVuUHJlQ29kZSgpIHsKICAgICAgY29uc3QgcmVxID0gewogICAgICAgIGNvZGU6IHRoaXMuaW5fcHJlX2NvZGUgPT09ICcnID8gdGhpcy5wcmVfY29kZSA6IHRoaXMuaW5fcHJlX2NvZGUKICAgICAgfQogICAgICBjb25zdCByZXNwID0gYXdhaXQgcnVuKHJlcSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzcC5yZXN1bHQKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmiafooYzlpLHotKXvvIEnKQogICAgICB9CiAgICB9LAogICAgYXN5bmMgcnVuUG9zdENvZGUoKSB7CiAgICAgIGNvbnN0IHJlcSA9IHsKICAgICAgICBjb2RlOiB0aGlzLmluX3Bvc3RfY29kZSA9PT0gJycgPyB0aGlzLnBvc3RfY29kZSA6IHRoaXMuaW5fcG9zdF9jb2RlCiAgICAgIH0KICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHJ1bihyZXEpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3AucmVzdWx0CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5omn6KGM5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGh0dHBSdW5uZXJUZXN0Q2FzZURldGFpbCgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGh0dHBSdW5uZXJUZXN0Q2FzZURldGFpbCh0aGlzLmNpZCkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuY2FzZXNGcm9tID0gcmVzcC5yZXN1bHQKICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5jYXNlc0Zyb20uY29uZmlnKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgIHRoaXMucHVibGljVmFyaWFibGUgPSB0aGlzLmRpY3RfdG9fbGlzdChyZXNwLnJlc3VsdC5jb25maWcpCiAgICAgICAgICB0aGlzLnB1YmxpY1ZhcmlhYmxlW3RoaXMucHVibGljVmFyaWFibGUubGVuZ3RoIC0gMV1bJ3Nob3cnXSA9ICd0cnVlJwogICAgICAgIH0KICAgICAgICBjb25zdCB0ZXN0U3RlcHNSZXN1bHQgPSBbXQogICAgICAgIGNvbnN0IHRlc3RTdGVwcyA9IEpTT04ucGFyc2UodGhpcy5jYXNlc0Zyb20udGVzdHN0ZXBzLnJlcGxhY2UoLycvZywgJyInKSkKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlc3RTdGVwcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHRlc3RTdGVwc1tpXS52YXJpYWJsZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICB0aGlzLnZhcmlhYmxlcyA9IHRoaXMuZGljdF90b19saXN0KHRlc3RTdGVwc1tpXS52YXJpYWJsZXMpCiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGVzdFN0ZXBzW2ldLmV4dHJhY3RzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdGhpcy5leHRyYWN0cyA9IHRoaXMuZGljdF90b19saXN0KHRlc3RTdGVwc1tpXS5leHRyYWN0cykKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0ZXN0U3RlcHNbaV0udmFsaWRhdGVzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZXMgPSB0aGlzLmRhdGFfbGlzdCh0ZXN0U3RlcHNbaV0udmFsaWRhdGVzKQogICAgICAgICAgfQogICAgICAgICAgdGVzdFN0ZXBzUmVzdWx0LnB1c2goewogICAgICAgICAgICBuYW1lOiB0ZXN0U3RlcHNbaV0ubmFtZSwKICAgICAgICAgICAgYXBpX2lkOiB0ZXN0U3RlcHNbaV0uYXBpX2lkLAogICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLAogICAgICAgICAgICBleHRyYWN0czogdGhpcy5leHRyYWN0cywKICAgICAgICAgICAgdmFsaWRhdGVzOiB0aGlzLnZhbGlkYXRlcwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgdGhpcy50ZXN0U3RlcExpc3QgPSB0ZXN0U3RlcHNSZXN1bHQKICAgICAgICB0aGlzLnRlc3RTdGVwTGlzdFt0aGlzLnRlc3RTdGVwTGlzdC5sZW5ndGggLSAxXVsnc2hvdyddID0gJ3RydWUnCiAgICAgICAgdGhpcy5wcmVfY29kZSA9IHJlc3AucmVzdWx0LnByZV9wcm9jZXNzb3IKICAgICAgICB0aGlzLnBvc3RfY29kZSA9IHJlc3AucmVzdWx0LnBvc3RfcHJvY2Vzc29yCiAgICAgICAgdGhpcy5odHRwUnVubmVyQXBpSWRzKHJlc3AucmVzdWx0Lmh0dHBydW5uZXJfcHJvamVjdF9pZCkKICAgICAgICAvLyB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+afpeivouaIkOWKn++8gScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIC8vIOWIl+ihqOi9rOaNouWtl+WFuAogICAgbGlzdF90b19kaWN0KGxzdCkgewogICAgICBpZiAobHN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBkaWN0ID0ge30KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgY29uc3QgaXRlbSA9IGxzdFtpXQogICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PT0gJycgJiYgaXRlbS52YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgcmV0dXJuIGRpY3QKICAgICAgICAgIH0KICAgICAgICAgIGRpY3RbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWUKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGRpY3QKICAgICAgfQogICAgfSwKICAgIC8vIOWtl+WFuOi9rOaNouWIl+ihqAogICAgZGljdF90b19saXN0KGRpdCkgewogICAgICBpZiAoZGl0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCByZXN1bHQgPSBPYmplY3QuZW50cmllcyhkaXQpLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4gewogICAgICAgICAgcmV0dXJuIHsgJ25hbWUnOiBuYW1lLCAndmFsdWUnOiB2YWx1ZSB9CiAgICAgICAgfSkKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgIH0KICAgIH0sCiAgICAvLyDmlq3oqIDliJfooajmlbDmja7lpITnkIYKICAgIGRhdGFfbGlzdChsc3QpIHsKICAgICAgaWYgKGxzdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgY29uc3Qgb3V0cHV0ID0gbHN0Lm1hcChpdGVtID0+IHsKICAgICAgICAgIGNvbnN0IGFzc2VydFR5cGUgPSBPYmplY3Qua2V5cyhpdGVtKVswXSAvLyDojrflj5bplK7lkI3vvIzlpoIgImVxIgogICAgICAgICAgY29uc3QgW2Fzc2VydEV4dHJhY3QsIGV4cGVjdFRleHRdID0gaXRlbVthc3NlcnRUeXBlXSAvLyDojrflj5bplK7lgLzmlbDnu4TvvIzlpoIgWyJjb250ZW50Lm1zZ0NvZGUiLCAiU1VDQ0VTUyJdCiAgICAgICAgICByZXR1cm4geyBhc3NlcnRfdHlwZTogYXNzZXJ0VHlwZSwgYXNzZXJ0X2V4dHJhY3Q6IGFzc2VydEV4dHJhY3QsIGV4cGVjdF90ZXh0OiBleHBlY3RUZXh0IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiBvdXRwdXQKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["httpRunnerTestCaseDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4PA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"httpRunnerTestCaseDialog.vue","sourceRoot":"src/components/HttpRunner","sourcesContent":["<template>\n  <div :style=\"{'max-height': timeLineHeight +'px'}\" style=\"margin-left: 10px; margin-right: 10px; overflow-y:scroll;\">\n    <el-form\n      ref=\"ruleForm\"\n      :model=\"casesFrom\"\n      label-width=\"180px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"HttpRunner项目：\">\n        <el-select\n          v-model=\"casesFrom.httprunner_project_id\"\n          placeholder=\"请选择HttpRunner项目名称\"\n          style=\"width: 100%;\"\n          @change=\"changeProject\"\n        >\n          <el-option\n            v-for=\"item in projectOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"测试用例名称：\" prop=\"name\">\n        <el-input v-model=\"casesFrom.name\" placeholder=\"请输入测试用例名称\" />\n      </el-form-item>\n      <el-tabs v-model=\"activeName\">\n        <el-tab-pane label=\"测试步骤\" name=\"first\" prop=\"testSteps\">\n          <div style=\"height: 400px; overflow-y: auto;\">\n            <el-table :data=\"testStepList\">\n              <el-table-column>\n                <template slot-scope=\"scope\">\n                  <el-form label-width=\"120px\">\n                    <div class=\"container\">\n                      <span class=\"label-text\">Setp: {{ scope.$index + 1 }}</span>\n                      <el-button\n                        v-if=\"scope.row.show === 'true'\"\n                        type=\"success\"\n                        class=\"btn\"\n                        icon=\"el-icon-circle-plus-outline\"\n                        size=\"mini\"\n                        style=\"margin-right: 50px;\"\n                        plain\n                        @click=\"addTestStep(scope.$index)\"\n                      />\n                      <el-button\n                        class=\"btn\"\n                        type=\"danger\"\n                        size=\"mini\"\n                        icon=\"el-icon-delete\"\n                        plain\n                        @click=\"removeTestStep(scope.$index)\"\n                      />\n                    </div>\n                    <div style=\"margin-top: 15px;\">\n                      <el-form-item label=\"测试步骤名称：\" prop=\"name\">\n                        <el-input v-model=\"scope.row.name\" placeholder=\"请输入测试步骤名称\" size=\"small\" />\n                      </el-form-item>\n                      <el-form-item label=\"选择接口：\" prop=\"api_id\">\n                        <el-select\n                          v-model=\"scope.row.api_id\"\n                          placeholder=\"请选择HttpRunner项目下的接口\"\n                          size=\"small\"\n                          style=\"width: 100%;\"\n                        >\n                          <el-option\n                            v-for=\"i in apiOption\"\n                            :key=\"'api' + i.value\"\n                            :label=\"i.label\"\n                            :value=\"i.value\"\n                          />\n                        </el-select>\n                      </el-form-item>\n                      <el-collapse>\n                        <el-collapse-item title=\"其他内容\">\n                          <div style=\"height: 200px; overflow-y: auto;\">\n                            <el-form-item label=\"提取器：\" prop=\"extracts\">\n                              <el-button\n                                type=\"primary\"\n                                size=\"mini\"\n                                icon=\"el-icon-plus\"\n                                plain\n                                @click=\"addExtracts(scope)\"\n                              >添加</el-button>\n                              <div v-for=\"(item, index) in scope.row.extracts\" :key=\"index\" style=\"margin-top: 5px;\">\n                                <el-col :span=\"6\">\n                                  <el-input\n                                    v-model=\"item.name\"\n                                    placeholder=\"变量名\"\n                                    style=\"width: 200px\"\n                                  />\n                                </el-col>\n                                <el-col :span=\"7\">\n                                  <el-input\n                                    v-model=\"item.value\"\n                                    placeholder=\"提取规则\"\n                                    style=\"width: 100%\"\n                                  />\n                                </el-col>\n                                <el-button\n                                  type=\"text\"\n                                  style=\"padding-right: 10px\"\n                                  @click=\"removeExtracts(scope, index)\"\n                                >\n                                  <i class=\"el-icon-remove-outline\" />\n                                </el-button>\n                              </div>\n                            </el-form-item>\n                            <el-form-item label=\"断言：\" prop=\"validates\">\n                              <el-button\n                                type=\"primary\"\n                                size=\"mini\"\n                                icon=\"el-icon-plus\"\n                                plain\n                                @click=\"addValidates(scope)\"\n                              >添加</el-button>\n                              <div v-for=\"(item, index) in scope.row.validates\" :key=\"index\" style=\"margin-top: 5px;\">\n                                <el-form-item>\n                                  <el-col :span=\"4\">\n                                    <el-input\n                                      v-model=\"item.assert_extract\"\n                                      placeholder=\"断言表达式\"\n                                      style=\"width: 100%\"\n                                    />\n                                  </el-col>\n                                  <el-col class=\"line\" :span=\"3\">\n                                    <el-select\n                                      v-model=\"item.assert_type\"\n                                      placeholder=\"断言类型\"\n                                      @change=\"changeAssert\"\n                                    >\n                                      <el-option\n                                        v-for=\"i in assertOption\"\n                                        :key=\"i.value\"\n                                        :label=\"i.label\"\n                                        :value=\"i.value\"\n                                      />\n                                    </el-select>\n                                  </el-col>\n                                  <el-col :span=\"6\">\n                                    <el-input\n                                      v-model=\"item.expect_text\"\n                                      placeholder=\"断言预期值\"\n                                      style=\"width: 100%\"\n                                    />\n                                  </el-col>\n                                  <el-button\n                                    type=\"text\"\n                                    style=\"padding-right: 10px\"\n                                    @click=\"removeValidates(scope,index)\"\n                                  >\n                                    <i class=\"el-icon-remove-outline\" />\n                                  </el-button>\n                                </el-form-item>\n                              </div>\n                            </el-form-item>\n                            <el-form-item label=\"变量：\" prop=\"variables\">\n                              <el-button\n                                type=\"primary\"\n                                size=\"mini\"\n                                icon=\"el-icon-plus\"\n                                plain\n                                @click=\"addVariables(scope)\"\n                              >添加</el-button>\n                              <div v-for=\"(item, index) in scope.row.variables\" :key=\"index\" style=\"margin-top: 5px;\">\n                                <el-col :span=\"6\">\n                                  <el-input\n                                    v-model=\"item.name\"\n                                    placeholder=\"变量名\"\n                                    style=\"width: 200px\"\n                                  />\n                                </el-col>\n                                <el-col :span=\"7\">\n                                  <el-input\n                                    v-model=\"item.value\"\n                                    placeholder=\"变量值\"\n                                    style=\"width: 100%\"\n                                  />\n                                </el-col>\n                                <el-button\n                                  type=\"text\"\n                                  style=\"padding-right: 10px\"\n                                  @click=\"removeVariables(scope,index)\"\n                                >\n                                  <i class=\"el-icon-remove-outline\" />\n                                </el-button>\n                              </div>\n                            </el-form-item>\n                          </div>\n                        </el-collapse-item>\n                      </el-collapse>\n                    </div>\n                  </el-form>\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n        </el-tab-pane>\n        <el-tab-pane label=\"公共变量\" name=\"second\" :lazy=\"true\">\n          <div style=\"height: 300px; overflow-y: auto;\">\n            <dict-dialog :dict-data=\"publicVariable\" />\n          </div>\n        </el-tab-pane>\n        <el-tab-pane label=\"前置处理器(SetUp)\" name=\"fifth\" :lazy=\"true\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <div align=\"right\">\n                <el-button size=\"small\" type=\"primary\" @click=\"runPreCode()\">点击运行</el-button>\n              </div>\n              <div style=\"margin-top: 10px;\">\n                <ace-code-editor-dialog ref=\"ace\" :value=\"pre_code\" class=\"ace-editor\" :min-lines=\"18\" :mode-path=\"language_python\" @getCode=\"getPreCode\" />\n              </div>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-button size=\"small\" type=\"warning\" disabled>运行结果</el-button>\n              <div style=\"margin-top: 10px;\">\n                <ace-code-editor-dialog ref=\"ace\" v-model=\"result\" class=\"ace-editor\" :min-lines=\"18\" :mode-path=\"language_python\" />\n              </div>\n            </el-col>\n          </el-row>\n        </el-tab-pane>\n        <el-tab-pane label=\"后置处理器(TearDown)\" name=\"sixth\" :lazy=\"true\">\n          <el-row :gutter=\"20\">\n            <el-col :span=\"12\">\n              <div align=\"right\">\n                <el-button size=\"small\" type=\"primary\" @click=\"runPostCode()\">点击运行</el-button>\n              </div>\n              <div style=\"margin-top: 10px;\">\n                <ace-code-editor-dialog ref=\"ace\" :value=\"post_code\" class=\"ace-editor\" :min-lines=\"18\" :mode-path=\"language_python\" @getCode=\"getPostCode\" />\n              </div>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-button size=\"small\" type=\"warning\" disabled>运行结果</el-button>\n              <div style=\"margin-top: 10px;\">\n                <ace-code-editor-dialog ref=\"ace\" v-model=\"result\" class=\"ace-editor\" :min-lines=\"18\" :mode-path=\"language_python\" />\n              </div>\n            </el-col>\n          </el-row>\n        </el-tab-pane>\n      </el-tabs>\n      <el-form-item style=\"text-align: right; margin-top: 20px;\">\n        <div class=\"dialog-footer\">\n          <el-button @click=\"closeDialog()\">取消</el-button>\n          <el-button v-if=\"title != '编辑测试用例'\" :loading=\"loading\" type=\"primary\" @click=\"createTestCase()\">保存</el-button>\n          <el-button v-if=\"title == '编辑测试用例'\" :loading=\"loading\" type=\"primary\" @click=\"updateTestCase()\">更新</el-button>\n        </div>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { httpRunnerProjectList, run, getHttpRunnerApiIds, createHttpRunnerTestCase, httpRunnerTestCaseDetail, updateHttpRunnerTestCase } from '@/api/httprunner'\nimport aceCodeEditorDialog from '@/components/HttpRunner/aceCodeEditorDialog'\nimport dictDialog from '@/components/Api/dictDialog'\n\nexport default {\n  components: {\n    aceCodeEditorDialog,\n    dictDialog\n  },\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    cid: {\n      type: Number,\n      default: 1\n    }\n  },\n  data() {\n    return {\n      timeLineHeight: '',\n      projectValue: '',\n      projectLabel: '',\n      projectOption: [],\n      apiDetailInfo: {},\n      testStepList: [{\n        name: '',\n        api_id: '',\n        variables: [],\n        extracts: [],\n        validates: [],\n        // 是否显示新增按钮\n        show: 'true'\n      }],\n      apiValue: '',\n      apiLabel: '',\n      apiOption: [],\n      casesFrom: {\n        name: '',\n        httprunner_project_id: '',\n        public_variables: '',\n        test_case_infos: [],\n        pre_processor: '',\n        post_processor: ''\n      },\n      publicVariable: [{\n        name: '',\n        value: '',\n        // 是否显示新增按钮\n        show: 'true'\n      }],\n      assertLabel: '',\n      assertOption: [\n        {\n          value: 'contains',\n          label: 'CONTAINS'\n        },\n        {\n          value: 'eq',\n          label: 'EQUAL'\n        }\n      ],\n      variables: [],\n      extracts: [],\n      validates: [],\n      activeName: 'first',\n      language_python: 'python',\n      pre_code: '',\n      in_pre_code: '',\n      post_code: '',\n      in_post_code: '',\n      result: '',\n      loading: false\n    }\n  },\n  mounted() {\n    // 窗口滑动\n    this.timeLineHeight = document.documentElement.clientHeight - 150\n    window.onresize = () => { this.timeLineHeight = document.documentElement.clientHeight - 150 }\n    this.initHttpRunnerProjectList()\n    if (this.title === '编辑测试用例') {\n      this.httpRunnerTestCaseDetail()\n    }\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    async initHttpRunnerProjectList() {\n      const resp = await httpRunnerProjectList(this.req)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name\n          })\n        }\n        this.total = resp.total\n        // this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    changeProject(value) {\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n      this.httpRunnerApiIds(value)\n    },\n    async httpRunnerApiIds(projectId) {\n      const resp = await getHttpRunnerApiIds(projectId)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.result.length; i++) {\n          this.apiOption.push({\n            value: resp.result[i].id,\n            label: resp.result[i].name\n          })\n        }\n        // this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 添加测试步骤\n    addTestStep(index) {\n      const list = this.testStepList\n      list[index].show = 'false'\n      list.push({\n        name: '',\n        api_id: '',\n        variables: [],\n        extracts: [],\n        validates: [],\n        show: 'true'\n      })\n      this.testStepList = list\n    },\n    addExtracts(scope) {\n      scope.row.extracts.push({ name: '', value: '' })\n    },\n    removeExtracts(scope, index) {\n      scope.row.extracts.splice(index, 1)\n    },\n    addValidates(scope) {\n      scope.row.validates.push({ assert_type: '', assert_extract: '', expect_text: '' })\n    },\n    changeAssert(value) {\n      this.assert_type = value\n      this.assertLabel = this.assertOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    removeValidates(scope, index) {\n      scope.row.validates.splice(index, 1)\n    },\n    addVariables(scope) {\n      scope.row.variables.push({ name: '', value: '' })\n    },\n    removeVariables(scope, index) {\n      scope.row.variables.splice(index, 1)\n    },\n    removeTestStep(index) {\n      const list = this.testStepList\n      if (index === 0 && list.length === 1) {\n        list.splice(index, 1)\n        list.push({\n          name: '',\n          api_id: '',\n          variables: [],\n          extracts: [],\n          validates: [],\n          show: 'true'\n        })\n      } else {\n        list.splice(index, 1)\n      }\n      if (index === list.length) {\n        list[index - 1].show = 'true'\n      }\n      this.testStepList = list\n    },\n    getPreCode(code) {\n      this.in_pre_code = code\n    },\n    getPostCode(code) {\n      this.in_post_code = code\n    },\n    async createTestCase() {\n      const testSteps = []\n      for (let i = 0; i < this.testStepList.length; i++) {\n        const step = this.testStepList[i]\n        const step_dict = {\n          'name': step.name,\n          'api_id': step.api_id,\n          'variables': this.list_to_dict(step.variables),\n          'extracts': this.list_to_dict(step.extracts),\n          'validates': step.validates.map(item => {\n            const assertType = item.assert_type\n            const assertExtract = item.assert_extract\n            const expectText = item.expect_text\n            return { [assertType]: [assertExtract, expectText] }\n          })\n        }\n        testSteps.push(step_dict)\n      }\n      const public_variables_dict = this.list_to_dict(this.publicVariable)\n      this.casesFrom.public_variables = public_variables_dict\n      this.casesFrom.test_case_infos = testSteps\n      this.casesFrom.pre_processor = this.in_pre_code\n      this.casesFrom.post_processor = this.in_post_code\n      this.loading = true\n      const resp = await createHttpRunnerTestCase(this.casesFrom)\n      if (resp.success === true) {\n        this.$message.success('创建成功！')\n        this.loading = false\n        this.closeDialog()\n      } else {\n        this.$message.error('创建失败！')\n      }\n    },\n    async updateTestCase() {\n      const testSteps = []\n      for (let i = 0; i < this.testStepList.length; i++) {\n        const step = this.testStepList[i]\n        const step_dict = {\n          'name': step.name,\n          'api_id': step.api_id,\n          'variables': this.list_to_dict(step.variables),\n          'extracts': this.list_to_dict(step.extracts),\n          'validates': step.validates.map(item => {\n            const assertType = item.assert_type\n            const assertExtract = item.assert_extract\n            const expectText = item.expect_text\n            return { [assertType]: [assertExtract, expectText] }\n          })\n        }\n        testSteps.push(step_dict)\n      }\n      const public_variables_dict = this.list_to_dict(this.publicVariable)\n      this.casesFrom.public_variables = public_variables_dict\n      this.casesFrom.test_case_infos = testSteps\n      this.casesFrom.pre_processor = this.in_pre_code\n      this.casesFrom.post_processor = this.in_post_code\n      this.loading = true\n      const resp = await updateHttpRunnerTestCase(this.cid, this.casesFrom)\n      if (resp.success === true) {\n        this.$message.success('更新成功！')\n        this.loading = false\n        this.closeDialog()\n      } else {\n        this.$message.error('更新失败！')\n      }\n    },\n    // 运行\n    async runPreCode() {\n      const req = {\n        code: this.in_pre_code === '' ? this.pre_code : this.in_pre_code\n      }\n      const resp = await run(req)\n      if (resp.success === true) {\n        this.result = resp.result\n      } else {\n        this.$message.error('执行失败！')\n      }\n    },\n    async runPostCode() {\n      const req = {\n        code: this.in_post_code === '' ? this.post_code : this.in_post_code\n      }\n      const resp = await run(req)\n      if (resp.success === true) {\n        this.result = resp.result\n      } else {\n        this.$message.error('执行失败！')\n      }\n    },\n    async httpRunnerTestCaseDetail() {\n      const resp = await httpRunnerTestCaseDetail(this.cid)\n      if (resp.success === true) {\n        this.casesFrom = resp.result\n        if (Object.keys(this.casesFrom.config).length !== 0) {\n          this.publicVariable = this.dict_to_list(resp.result.config)\n          this.publicVariable[this.publicVariable.length - 1]['show'] = 'true'\n        }\n        const testStepsResult = []\n        const testSteps = JSON.parse(this.casesFrom.teststeps.replace(/'/g, '\"'))\n        for (let i = 0; i < testSteps.length; i++) {\n          if (testSteps[i].variables !== undefined) {\n            this.variables = this.dict_to_list(testSteps[i].variables)\n          }\n          if (testSteps[i].extracts !== undefined) {\n            this.extracts = this.dict_to_list(testSteps[i].extracts)\n          }\n          if (testSteps[i].validates !== undefined) {\n            this.validates = this.data_list(testSteps[i].validates)\n          }\n          testStepsResult.push({\n            name: testSteps[i].name,\n            api_id: testSteps[i].api_id,\n            variables: this.variables,\n            extracts: this.extracts,\n            validates: this.validates\n          })\n        }\n        this.testStepList = testStepsResult\n        this.testStepList[this.testStepList.length - 1]['show'] = 'true'\n        this.pre_code = resp.result.pre_processor\n        this.post_code = resp.result.post_processor\n        this.httpRunnerApiIds(resp.result.httprunner_project_id)\n        // this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 列表转换字典\n    list_to_dict(lst) {\n      if (lst !== undefined) {\n        const dict = {}\n        for (let i = 0; i < lst.length; i++) {\n          const item = lst[i]\n          if (item.name === '' && item.value === '') {\n            return dict\n          }\n          dict[item.name] = item.value\n        }\n        return dict\n      }\n    },\n    // 字典转换列表\n    dict_to_list(dit) {\n      if (dit !== undefined) {\n        const result = Object.entries(dit).map(([name, value]) => {\n          return { 'name': name, 'value': value }\n        })\n        return result\n      }\n    },\n    // 断言列表数据处理\n    data_list(lst) {\n      if (lst !== undefined) {\n        const output = lst.map(item => {\n          const assertType = Object.keys(item)[0] // 获取键名，如 \"eq\"\n          const [assertExtract, expectText] = item[assertType] // 获取键值数组，如 [\"content.msgCode\", \"SUCCESS\"]\n          return { assert_type: assertType, assert_extract: assertExtract, expect_text: expectText }\n        })\n        return output\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n.container {\n  position: relative;\n}\n.btn {\n  position: absolute;\n  right: 0;\n}\n.label-text {\n  font-family: \"Lucida Calligraphy\", cursive, serif, sans-serif;\n  font-size: 20px;\n  font-weight: bolder;\n  margin-top: 5px;\n}\n</style>\n"]}]}