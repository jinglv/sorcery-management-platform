{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/httpRunnerApiDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/httpRunnerApiDialog.vue","mtime":1686799579043},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldE1vZHVsZVRyZWUgfSBmcm9tICdAL2FwaS9tb2R1bGVzJwppbXBvcnQgeyBodHRwUnVubmVyUHJvamVjdExpc3QsIGNyZWF0ZUh0dHBSdW5uZXJBcGkgfSBmcm9tICdAL2FwaS9odHRwcnVubmVyJwppbXBvcnQgeyBnZXRBcGlzTGlzdCB9IGZyb20gJ0AvYXBpL2FwaXMnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93VGl0bGU6ICfliJvlu7pIdHRwUnVubmVy6aG555uu5o6l5Y+jJywKICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwKICAgICAgYXBpRm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGh0dHBydW5uZXJfcHJvamVjdF9pZDogJycsCiAgICAgICAgYmFzZV9hcGlfaWQ6ICcnCiAgICAgIH0sCiAgICAgIGh0dHBydW5uZXJfYXBpX25hbWU6ICcnLAogICAgICBtb2R1bGVEYXRhOiBbXSwKICAgICAgYXBpRGF0YTogW10sCiAgICAgIGFwaU51bTogMCwKICAgICAgY2FzZXNEYXRhOiBbXSwKICAgICAgY3VycmVudE1vZHVsZUlkOiAwLAogICAgICBhcGlJbmZvTGlzdDogW10sCiAgICAgIHByb2plY3RWYWx1ZTogJycsCiAgICAgIHByb2plY3RMYWJlbDogJycsCiAgICAgIHByb2plY3RPcHRpb246IFtdLAogICAgICBwcm9qZWN0SWQ6IDAsCiAgICAgIHJlcTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogMTAKICAgICAgfSwKICAgICAgLy8g5YiG6aG16aG15pWwCiAgICAgIHRvdGFsOiAxMCwKICAgICAgc2F2ZUZsYWc6IGZhbHNlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNJbnB1dEVtcHR5KCkgewogICAgICAvLyDmo4Dmn6XovpPlhaXmoYbnmoTlgLzmmK/lkKbkuLrnqboKICAgICAgcmV0dXJuIHRoaXMuaHR0cHJ1bm5lcl9hcGlfbmFtZS50cmltKCkgPT09ICcnCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0SHR0cFJ1bm5lclByb2plY3RMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCdjYW5jZWwnLCB7fSkKICAgIH0sCiAgICBhc3luYyBpbml0SHR0cFJ1bm5lclByb2plY3RMaXN0KCkgewogICAgICBjb25zdCByZXNwID0gYXdhaXQgaHR0cFJ1bm5lclByb2plY3RMaXN0KHRoaXMucmVxKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwLml0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnByb2plY3RPcHRpb24ucHVzaCh7CiAgICAgICAgICAgIHZhbHVlOiByZXNwLml0ZW1zW2ldLmlkLAogICAgICAgICAgICBsYWJlbDogcmVzcC5pdGVtc1tpXS5uYW1lLAogICAgICAgICAgICBwcm9qZWN0SWQ6IHJlc3AuaXRlbXNbaV0ucHJvamVjdF9pZAogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgY29uc29sZS5pbmZvKCdwcm9qZWN0IG9wdGlvbnM6JywgdGhpcy5wcm9qZWN0T3B0aW9uKQogICAgICAgIHRoaXMudG90YWwgPSByZXNwLnRvdGFsCiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmn6Xor6LmiJDlip/vvIEnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VQcm9qZWN0KHZhbHVlKSB7CiAgICAgIHRoaXMucHJvamVjdFZhbHVlID0gdmFsdWUKICAgICAgdGhpcy5wcm9qZWN0TGFiZWwgPSB0aGlzLnByb2plY3RPcHRpb24uZmluZCgKICAgICAgICAoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gdmFsdWUKICAgICAgKS5sYWJlbAogICAgICB0aGlzLnByb2plY3RJZCA9IHRoaXMucHJvamVjdE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLnByb2plY3RJZAogICAgICBjb25zb2xlLmluZm8oJ3Byb2plY3QgaWQ6JywgdGhpcy5wcm9qZWN0SWQpCiAgICAgIHRoaXMuYXBpRm9ybS5odHRwcnVubmVyX3Byb2plY3RfaWQgPSB2YWx1ZQogICAgICB0aGlzLmdldE1vZHVsZUxpc3QodGhpcy5wcm9qZWN0SWQpCiAgICB9LAogICAgLy8g5p+l6K+i5qih5Z2X5YiX6KGoCiAgICBhc3luYyBnZXRNb2R1bGVMaXN0KHBpZCkgewogICAgICBjb25zdCByZXNwID0gYXdhaXQgZ2V0TW9kdWxlVHJlZShwaWQpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLm1vZHVsZURhdGEgPSByZXNwLnJlc3VsdAogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCgogICAgLy8g54K55Ye75qih5Z2XCiAgICBub2RlQ2xpY2soZGF0YSkgewogICAgICB0aGlzLmN1cnJlbnRNb2R1bGVJZCA9IGRhdGEuaWQKICAgICAgdGhpcy5nZXRNb2R1bGVBcGlMaXN0KGRhdGEuaWQpCiAgICB9LAoKICAgIC8vIOWIneWni+WMlueUqOS+i+aVsOaNrgogICAgYXN5bmMgZ2V0TW9kdWxlQXBpTGlzdChtaWQpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGdldEFwaXNMaXN0KG1pZCwgdGhpcy5yZXEpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmFwaURhdGEgPSByZXNwLml0ZW1zCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmn6Xor6LmiJDlip/vvIEnKQogICAgICAgIC8vIOW3sue7j+mAieS4reeahOeUqOS+iwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHZhciBhcGlJZCA9IFtdCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXBpSW5mb0xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuYXBpSW5mb0xpc3RbaV0ubW9kdWxlX2lkID09PSBtaWQpIHsKICAgICAgICAgICAgICBhcGlJZC5wdXNoKHRoaXMuYXBpSW5mb0xpc3RbaV0uYmFzZV9hcGlfaWQpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHJvd3MgPSBbXQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcGlJZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYXBpSW5mb0xpc3QubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZiAoYXBpSWRbaV0gPT09IHRoaXMuYXBpSW5mb0xpc3RbaV0uYmFzZV9hcGlfaWQpIHsKICAgICAgICAgICAgICAgIHJvd3MucHVzaCh0aGlzLmFwaUluZm9MaXN0W2ldKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHJvd3MpIHsKICAgICAgICAgICAgcm93cy5mb3JFYWNoKChyb3cpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdykKICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZS5jbGVhclNlbGVjdGlvbigpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZXJyb3IubWVzc2FnZSkKICAgICAgfQogICAgfSwKCiAgICAvLyDpgInmi6nmiYDmnInnlKjkvosKICAgIHNlbGVjdGlvbkFsbEFwaSh2YWwsIHJvdykgewogICAgICBjb25zb2xlLmxvZygn6YCJ5oup5omA5pyJ55So5L6LIHZhbCcsIHZhbCkKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBnZXRBcGlpbmZvID0gewogICAgICAgICAgJ25hbWUnOiB2YWxbaV0udmFsdWUsCiAgICAgICAgICAnYmFzZV9hcGlfaWQnOiB2YWxbaV0uaWQsCiAgICAgICAgICAnaHR0cHJ1bm5lcl9wcm9qZWN0X2lkJzogdGhpcy5wcm9qZWN0VmFsdWUsCiAgICAgICAgICAnbW9kdWxlX2lkJzogdmFsW2ldLm1vZHVsZV9pZAogICAgICAgIH0KICAgICAgICB0aGlzLmFwaUluZm9MaXN0LnB1c2goZ2V0QXBpaW5mbykKICAgICAgfQogICAgICBjb25zb2xlLmluZm8oJ2FwaSBpbmZvIGxpc3Q6JywgdGhpcy5hcGlJbmZvTGlzdCkKICAgICAgdGhpcy5zZWxlY3RpdmVBcGkodGhpcy5hcGlJbmZvTGlzdCkKICAgIH0sCiAgICAvLyDpgInmi6nkuIDmnaHnlKjkvosKICAgIHNlbGVjdGlvbk9uZUFwaSh2YWwsIHJvdykgewogICAgICBjb25zb2xlLmxvZygnc2VsZWN0aW9uLW9uZS1jaGFuZ2UgdmFsJywgdmFsKQogICAgICBjb25zb2xlLmxvZygnc2VsZWN0aW9uLW9uZS1jaGFuZ2Ugcm93Jywgcm93KQogICAgICBjb25zdCBscyA9IFtdCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgZ2V0QXBpaW5mbyA9IHsKICAgICAgICAgICduYW1lJzogdmFsW2ldLnZhbHVlLAogICAgICAgICAgJ2Jhc2VfYXBpX2lkJzogdmFsW2ldLmlkLAogICAgICAgICAgJ2h0dHBydW5uZXJfcHJvamVjdF9pZCc6IHRoaXMucHJvamVjdFZhbHVlLAogICAgICAgICAgJ21vZHVsZV9pZCc6IHZhbFtpXS5tb2R1bGVfaWQKICAgICAgICB9CiAgICAgICAgbHMucHVzaChnZXRBcGlpbmZvKQogICAgICB9CiAgICAgIGNvbnNvbGUuaW5mbygnYXBpIGluZm8gbGlzdDonLCBscykKICAgICAgdGhpcy5zZWxlY3RpdmVBcGkobHMpCiAgICB9LAoKICAgIC8vIOWFrOWFseaWueazle+8mumAieaLqeaOpeWPowogICAgc2VsZWN0aXZlQXBpKG11bHRpcGxlU2VsZWN0aW9uKSB7CiAgICAgIGNvbnNvbGUuaW5mbygnbXVsdGlwbGVTZWxlY3Rpb246JywgbXVsdGlwbGVTZWxlY3Rpb24pCiAgICAgIHZhciBzZWxlY3RpdmUgPSBmYWxzZQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG11bHRpcGxlU2VsZWN0aW9uLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKG11bHRpcGxlU2VsZWN0aW9uW2ldLm1vZHVsZV9pZCA9PT0gdGhpcy5jdXJyZW50TW9kdWxlSWQpIHsKICAgICAgICAgIHNlbGVjdGl2ZSA9IHRydWUKICAgICAgICAgIHRoaXMuYXBpSW5mb0xpc3QgPSBtdWx0aXBsZVNlbGVjdGlvbgogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoc2VsZWN0aXZlID09PSBmYWxzZSkgewogICAgICAgIHRoaXMuYXBpSW5mb0xpc3QucHVzaChtdWx0aXBsZVNlbGVjdGlvbikKICAgICAgfQogICAgICB0aGlzLmNhbGN1bGF0aW9uQ2FzZSgpCiAgICB9LAoKICAgIC8vIOWFrOWFseaWueazle+8muiuoeeul+eUqOS+i+aVsOmHjwogICAgY2FsY3VsYXRpb25DYXNlKCkgewogICAgICB0aGlzLmFwaU51bSArPSB0aGlzLmFwaUluZm9MaXN0Lmxlbmd0aCAtIHRoaXMuYXBpTnVtCiAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hcGlJbmZvTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAvLyAgIHRoaXMuYXBpTnVtICs9IHRoaXMuYXBpSW5mb0xpc3QubGVuZ3RoCiAgICAgIC8vIH0KICAgIH0sCiAgICAvLyDliJvlu7rmjqXlj6MKICAgIGFzeW5jIGNyZWF0ZUh0dHBSdW5uZXJBcGkoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hcGlJbmZvTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHJlcSA9IHRoaXMuYXBpSW5mb0xpc3RbaV0KICAgICAgICBpZiAodGhpcy5pc0lucHV0RW1wdHkpIHsKICAgICAgICAgIC8vIOi+k+WFpeWGheWuueS4uuepuu+8jOaYvuekuuW/heWhq+aPkOekuu+8jOS4jei/m+ihjOaPkOS6pOaTjeS9nAogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBjcmVhdGVIdHRwUnVubmVyQXBpKHJlcSkKICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCkKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yib5bu65oiQ5Yqf77yBJykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g6Lez6L2s5Yiw56ys5Yeg6aG1CiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKQogICAgICB0aGlzLnJlcS5wYWdlID0gdmFsCiAgICAgIHRoaXMuZ2V0TW9kdWxlQXBpTGlzdCh0aGlzLmN1cnJlbnRNb2R1bGVJZCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["httpRunnerApiDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"httpRunnerApiDialog.vue","sourceRoot":"src/components/HttpRunner","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"900px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-form\n      ref=\"ruleForm\"\n      :model=\"apiForm\"\n      label-width=\"120px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"HttpRunner项目\">\n        <el-select\n          v-model=\"projectValue\"\n          placeholder=\"请选择HttpRunner项目名称\"\n          style=\"width: 100%;\"\n          @change=\"changeProject\"\n        >\n          <el-option\n            v-for=\"item in projectOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <div style=\"margin-top: 10px\">\n          <el-card style=\"width: 28%; height: 300px; float: left\">\n            <el-tree\n              :data=\"moduleData\"\n              node-key=\"id\"\n              default-expand-all\n              :expand-on-click-node=\"false\"\n              @node-click=\"nodeClick\"\n            >\n              <span slot-scope=\"{ node }\" class=\"custom-tree-node\">\n                <span style=\"float: left\">{{ node.label }}</span>\n              </span>\n            </el-tree>\n          </el-card>\n          <div style=\"width: 70%; float: right\">\n            <el-table\n              ref=\"multipleTable\"\n              :data=\"apiData\"\n              border\n              style=\"width: 100%\"\n              @select=\"selectionOneApi\"\n              @select-all=\"selectionAllApi\"\n            >\n              <el-table-column type=\"selection\" width=\"55\" />\n              <el-table-column prop=\"id\" label=\"接口ID\" width=\"80\" />\n              <el-table-column prop=\"name\" label=\"接口名称\" width=\"120\" />\n              <el-table-column label=\"httpRunner项目接口名称\">\n                <template slot-scope=\"scope\">\n                  <el-input\n                    v-model=\"scope.row.value\"\n                    :required=\"true\"\n                    placeholder=\"请输入httpRunner项目接口名称\"\n                  />\n                  <span v-if=\"isInputEmpty\" style=\"color: red;\">*接口名称不能为空</span>\n                </template>\n              </el-table-column>>\n            </el-table>\n            <!--分页-->\n            <div style=\"width: 100%; text-align: right\">\n              <el-pagination\n                background\n                layout=\"prev, pager, next\"\n                :page-size=\"req.size\"\n                :total=\"total\"\n                @current-change=\"handleCurrentChange\"\n              />\n            </div>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <div class=\"dialog-footer\">\n          已选择【{{ apiNum }}】接口\n          <el-button @click=\"closeDialog()\">取消</el-button>\n          <el-button\n            type=\"primary\"\n            :disabled=\"saveFlag\"\n            @click=\"createHttpRunnerApi\"\n          >创建</el-button>\n        </div>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport { getModuleTree } from '@/api/modules'\nimport { httpRunnerProjectList, createHttpRunnerApi } from '@/api/httprunner'\nimport { getApisList } from '@/api/apis'\n\nexport default {\n  components: {},\n  props: {\n  },\n  data() {\n    return {\n      showTitle: '创建HttpRunner项目接口',\n      dialogVisible: true,\n      apiForm: {\n        name: '',\n        httprunner_project_id: '',\n        base_api_id: ''\n      },\n      httprunner_api_name: '',\n      moduleData: [],\n      apiData: [],\n      apiNum: 0,\n      casesData: [],\n      currentModuleId: 0,\n      apiInfoList: [],\n      projectValue: '',\n      projectLabel: '',\n      projectOption: [],\n      projectId: 0,\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 10,\n      saveFlag: false\n    }\n  },\n  computed: {\n    isInputEmpty() {\n      // 检查输入框的值是否为空\n      return this.httprunner_api_name.trim() === ''\n    }\n  },\n  mounted() {\n    this.initHttpRunnerProjectList()\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    async initHttpRunnerProjectList() {\n      const resp = await httpRunnerProjectList(this.req)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name,\n            projectId: resp.items[i].project_id\n          })\n        }\n        console.info('project options:', this.projectOption)\n        this.total = resp.total\n        // this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    changeProject(value) {\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n      this.projectId = this.projectOption.find(\n        (item) => item.value === value\n      ).projectId\n      console.info('project id:', this.projectId)\n      this.apiForm.httprunner_project_id = value\n      this.getModuleList(this.projectId)\n    },\n    // 查询模块列表\n    async getModuleList(pid) {\n      const resp = await getModuleTree(pid)\n      if (resp.success === true) {\n        this.moduleData = resp.result\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n\n    // 点击模块\n    nodeClick(data) {\n      this.currentModuleId = data.id\n      this.getModuleApiList(data.id)\n    },\n\n    // 初始化用例数据\n    async getModuleApiList(mid) {\n      const resp = await getApisList(mid, this.req)\n      if (resp.success === true) {\n        this.apiData = resp.items\n        this.$message.success('查询成功！')\n        // 已经选中的用例\n        this.$nextTick(() => {\n          var apiId = []\n          for (let i = 0; i < this.apiInfoList.length; i++) {\n            if (this.apiInfoList[i].module_id === mid) {\n              apiId.push(this.apiInfoList[i].base_api_id)\n            }\n          }\n          const rows = []\n          for (let i = 0; i < apiId.length; i++) {\n            for (let j = 0; j < this.apiInfoList.length; j++) {\n              if (apiId[i] === this.apiInfoList[i].base_api_id) {\n                rows.push(this.apiInfoList[i])\n              }\n            }\n          }\n          if (rows) {\n            rows.forEach((row) => {\n              this.$refs.multipleTable.toggleRowSelection(row)\n            })\n          } else {\n            this.$refs.multipleTable.clearSelection()\n          }\n        })\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n\n    // 选择所有用例\n    selectionAllApi(val, row) {\n      console.log('选择所有用例 val', val)\n      for (let i = 0; i < val.length; i++) {\n        const getApiinfo = {\n          'name': val[i].value,\n          'base_api_id': val[i].id,\n          'httprunner_project_id': this.projectValue,\n          'module_id': val[i].module_id\n        }\n        this.apiInfoList.push(getApiinfo)\n      }\n      console.info('api info list:', this.apiInfoList)\n      this.selectiveApi(this.apiInfoList)\n    },\n    // 选择一条用例\n    selectionOneApi(val, row) {\n      console.log('selection-one-change val', val)\n      console.log('selection-one-change row', row)\n      const ls = []\n      for (let i = 0; i < val.length; i++) {\n        const getApiinfo = {\n          'name': val[i].value,\n          'base_api_id': val[i].id,\n          'httprunner_project_id': this.projectValue,\n          'module_id': val[i].module_id\n        }\n        ls.push(getApiinfo)\n      }\n      console.info('api info list:', ls)\n      this.selectiveApi(ls)\n    },\n\n    // 公共方法：选择接口\n    selectiveApi(multipleSelection) {\n      console.info('multipleSelection:', multipleSelection)\n      var selective = false\n      for (let i = 0; i < multipleSelection.length; i++) {\n        if (multipleSelection[i].module_id === this.currentModuleId) {\n          selective = true\n          this.apiInfoList = multipleSelection\n        }\n      }\n      if (selective === false) {\n        this.apiInfoList.push(multipleSelection)\n      }\n      this.calculationCase()\n    },\n\n    // 公共方法：计算用例数量\n    calculationCase() {\n      this.apiNum += this.apiInfoList.length - this.apiNum\n      // for (let i = 0; i < this.apiInfoList.length; i++) {\n      //   this.apiNum += this.apiInfoList.length\n      // }\n    },\n    // 创建接口\n    async createHttpRunnerApi() {\n      for (let i = 0; i < this.apiInfoList.length; i++) {\n        const req = this.apiInfoList[i]\n        if (this.isInputEmpty) {\n          // 输入内容为空，显示必填提示，不进行提交操作\n          return\n        }\n        const resp = await createHttpRunnerApi(req)\n        if (resp.success === true) {\n          this.closeDialog()\n          this.$message.success('创建成功！')\n        } else {\n          this.$message.error(resp.error.message)\n        }\n      }\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`)\n      this.req.page = val\n      this.getModuleApiList(this.currentModuleId)\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n</style>\n"]}]}