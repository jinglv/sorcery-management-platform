{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/views/cases/demand/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/views/cases/demand/index.vue","mtime":1702621109518},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHByb2plY3RMaXN0IH0gZnJvbSAnQC9hcGkvcHJvamVjdHMnCmltcG9ydCB7IGdldERlbWFuZExpc3QsIGRlbGV0ZURlbWFuZCB9IGZyb20gJ0AvYXBpL2Nhc2VzJwppbXBvcnQgRGVtYW5kRGlhbG9nIGZyb20gJ0AvY29tcG9uZW50cy9DYXNlcy9kZW1hbmREaWFsb2cnCmltcG9ydCBEZW1hbmREZXRhaWxEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0Nhc2VzL2RlbWFuZERldGFpbERpYWxvZycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGVtYW5kTWFuYWdlJywKICBjb21wb25lbnRzOiB7CiAgICBEZW1hbmREaWFsb2csCiAgICBEZW1hbmREZXRhaWxEaWFsb2cKICB9LAogIGZpbHRlcnM6IHsKICAgIHJlcXVpcmVtZW50c1R5cGUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAnYnVzaW5lc3MnKSB7CiAgICAgICAgcmV0dXJuICfkuJrliqHnsbvpnIDmsYInCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdpbXByb3ZlJykgewogICAgICAgIHJldHVybiAnQnVn5pS56L+b57G76ZyA5rGCJwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAndGVjaG5pY2FsJykgewogICAgICAgIHJldHVybiAn5oqA5pyv57G76ZyA5rGCJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAn5pyq55+l57G75Z6LJwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVtYW5kVGl0bGU6ICcnLAogICAgICBwcm9qZWN0VmFsdWU6ICcnLAogICAgICBwcm9qZWN0TGFiZWw6ICcnLAogICAgICBwcm9qZWN0T3B0aW9uOiBbXSwKICAgICAgZGVtYW5kRGF0ZTogW10sCiAgICAgIGRpYWxvZ0ZsYWc6IGZhbHNlLAogICAgICBkZW1hbmRTZWFyY2hGcm9tOiB7CiAgICAgICAgJ25hbWUnOiAnJywKICAgICAgICAncHJvamVjdF9pZCc6IDAsCiAgICAgICAgJ3ZlcnNpb25fbnVtYmVyJzogJycsCiAgICAgICAgJ3JlcXVpcmVtZW50c190eXBlJzogJycsCiAgICAgICAgJ2NyZWF0ZV90aW1lJzogJycKICAgICAgfSwKICAgICAgZGVtYW5kVmFsdWU6ICcnLAogICAgICBkZW1hbmRMYWJlbDogJycsCiAgICAgIGRlbWFuZE9wdGlvbjogWwogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnYnVzaW5lc3MnLAogICAgICAgICAgbGFiZWw6ICfkuJrliqHnsbvpnIDmsYInCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2ltcHJvdmUnLAogICAgICAgICAgbGFiZWw6ICfmlLnov5vnsbvpnIDmsYInCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ3RlY2huaWNhbCcsCiAgICAgICAgICBsYWJlbDogJ+aKgOacr+exu+mcgOaxgicKICAgICAgICB9CiAgICAgIF0sCiAgICAgIGN1cnJlbnREZW1hbmRJZDogMCwKICAgICAgZGlhbG9nRGVtYW5kRGV0YWlsRmxhZzogZmFsc2UsCiAgICAgIGRlbWFuZERldGFpbFRpdGxlOiAnJywKICAgICAgcmVxOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBzaXplOiAxMAogICAgICB9LAogICAgICAvLyDliIbpobXpobXmlbAKICAgICAgdG90YWw6IDEwCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0UHJvamVjdExpc3QoKQogICAgdGhpcy5nZXREZW1hbmRMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIm+W7uumcgOaxggogICAgY3JlYXRlRGVtYW5kKCkgewogICAgICB0aGlzLmRpYWxvZ0ZsYWcgPSB0cnVlCiAgICAgIHRoaXMuZGVtYW5kVGl0bGUgPSAnY3JlYXRlJwogICAgfSwKICAgIGRlbWFuZFR5cGUodmFsdWUpIHsKICAgICAgdGhpcy5kZW1hbmRWYWx1ZSA9IHZhbHVlCiAgICAgIHRoaXMuZGVtYW5kTGFiZWwgPSB0aGlzLmRlbWFuZE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLmxhYmVsCiAgICAgIHRoaXMuZGVtYW5kU2VhcmNoRnJvbS5yZXF1aXJlbWVudHNfdHlwZSA9IHZhbHVlCiAgICB9LAogICAgLy8g5Yid5aeL5YyW6aG555uu5YiX6KGoCiAgICBhc3luYyBpbml0UHJvamVjdExpc3QoKSB7CiAgICAgIGNvbnN0IHJlcV9ib2R5ID0gewogICAgICAgICduYW1lJzogJycKICAgICAgfQogICAgICBjb25zdCByZXNwID0gYXdhaXQgcHJvamVjdExpc3QodGhpcy5yZXEsIHJlcV9ib2R5KQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgLy8g5Zyo5Yid5aeL5YyW6aG555uu5L+h5oGv77yM5ZCM5pe25Yid5aeL5YyW6aG555uu5LiL55qE5qih5Z2X5L+h5oGvCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwLml0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnByb2plY3RPcHRpb24ucHVzaCh7CiAgICAgICAgICAgIHZhbHVlOiByZXNwLml0ZW1zW2ldLmlkLAogICAgICAgICAgICBsYWJlbDogcmVzcC5pdGVtc1tpXS5uYW1lCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICAvLyB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuafpeivouaIkOWKn++8gSIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIC8vIOS/ruaUuemAieS4remhueebrgogICAgY2hhbmdlUHJvamVjdCh2YWx1ZSkgewogICAgICBjb25zb2xlLmxvZygnY2hhbmdlIHByb2plY3QgLS0+JywgdmFsdWUpCiAgICAgIHRoaXMucHJvamVjdFZhbHVlID0gdmFsdWUKICAgICAgdGhpcy5wcm9qZWN0TGFiZWwgPSB0aGlzLnByb2plY3RPcHRpb24uZmluZCgKICAgICAgICAoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gdmFsdWUKICAgICAgKS5sYWJlbAogICAgICB0aGlzLmRlbWFuZFNlYXJjaEZyb20ucHJvamVjdF9pZCA9IHZhbHVlCiAgICB9LAogICAgLy8g6I635Y+W6ZyA5rGC5YiX6KGoCiAgICBhc3luYyBnZXREZW1hbmRMaXN0KCkgewogICAgICBjb25zdCByZXNwID0gYXdhaXQgZ2V0RGVtYW5kTGlzdCh0aGlzLnJlcSwgSlNPTi5zdHJpbmdpZnkodGhpcy5kZW1hbmRTZWFyY2hGcm9tKSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMudG90YWwgPSByZXNwLnRvdGFsCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwLml0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICByZXNwLml0ZW1zW2ldLmNyZWF0ZV90aW1lID0gdGhpcy4kbW9tZW50KAogICAgICAgICAgICByZXNwLml0ZW1zW2ldLmNyZWF0ZV90aW1lCiAgICAgICAgICApLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpCiAgICAgICAgfQogICAgICAgIHRoaXMuZGVtYW5kRGF0ZSA9IHJlc3AuaXRlbXMKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+afpeivouaIkOWKn++8gScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIC8vIOWIm+W7uuaooeWdl+WFs+mXrQogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuZGlhbG9nRmxhZyA9IGZhbHNlCiAgICAgIHRoaXMuZGlhbG9nRGVtYW5kRGV0YWlsRmxhZyA9IGZhbHNlCiAgICAgIHRoaXMuZ2V0RGVtYW5kTGlzdCgpCiAgICB9LAogICAgLy8g6Lez6L2s5Yiw56ys5Yeg6aG1CiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKQogICAgICB0aGlzLnJlcS5wYWdlID0gdmFsCiAgICAgIC8vIHRoaXMuaW5pdFByb2plY3RMaXN0KCkKICAgIH0sCiAgICAvLyDmuIXpmaTmkJzntKIKICAgIGNsZWFyU2VhcmNoKCkgewogICAgICB0aGlzLmRlbWFuZFNlYXJjaEZyb20ubmFtZSA9ICcnCiAgICAgIHRoaXMuZGVtYW5kU2VhcmNoRnJvbS52ZXJzaW9uX251bWJlciA9ICcnCiAgICAgIHRoaXMuZGVtYW5kU2VhcmNoRnJvbS5wcm9qZWN0X2lkID0gMAogICAgICB0aGlzLnByb2plY3RWYWx1ZSA9ICcnCiAgICAgIHRoaXMuZGVtYW5kU2VhcmNoRnJvbS5yZXF1aXJlbWVudHNfdHlwZSA9ICcnCiAgICAgIHRoaXMuZGVtYW5kVmFsdWUgPSAnJwogICAgICB0aGlzLmdldERlbWFuZExpc3QoKQogICAgfSwKICAgIC8vIOafpeeci+mcgOaxguivpuaDhQogICAgZGVtYW5kUm93SW5mbyhyb3cpIHsKICAgICAgLy8g54K55Ye755So5L6L77yM6I635Y+W55So5L6LaWQKICAgICAgdGhpcy5jdXJyZW50RGVtYW5kSWQgPSByb3cuaWQKICAgICAgdGhpcy5kaWFsb2dEZW1hbmREZXRhaWxGbGFnID0gdHJ1ZQogICAgICB0aGlzLmRlbWFuZERldGFpbFRpdGxlID0gJ+mcgOaxguivpuaDhScKICAgIH0sCiAgICAvLyDnvJbovpHmtYvor5XnlKjkvosKICAgIGVkaXREZW1hbmRJbmZvKHJvdykgewogICAgICAvLyDngrnlh7vnlKjkvovvvIzojrflj5bnlKjkvotpZAogICAgICB0aGlzLmN1cnJlbnREZW1hbmRJZCA9IHJvdy5pZAogICAgICB0aGlzLmRpYWxvZ0ZsYWcgPSB0cnVlCiAgICAgIHRoaXMuZGVtYW5kVGl0bGUgPSAnZWRpdCcKICAgIH0sCiAgICAvLyDliKDpmaTpnIDmsYLkv6Hmga8KICAgIGRlbGV0ZURlbWFuZEluZm8ocm93KSB7CiAgICAgIGRlbGV0ZURlbWFuZChyb3cuaWQpLnRoZW4oKHJlc3ApID0+IHsKICAgICAgICB0aGlzLiRjb25maXJtKCfliKDpmaTku7vliqEsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICBjZW50ZXI6IHRydWUKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5nZXREZW1hbmRMaXN0KCkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5lcnJvci5tc2cpCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgIH0pCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/cases/demand","sourcesContent":["<template>\n  <div class=\"demand\">\n    <div class=\"filter-container\">\n      <el-row :gutter=\"24\">\n        <el-col :span=\"6\">\n          <div class=\"demo-input-suffix\">\n            需求名称:\n            <el-input v-model=\"demandSearchFrom.name\" placeholder=\"请输入需求名称\" style=\"width: 64%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"demo-input-suffix\">\n            项目名称:\n            <el-select\n              v-model=\"projectValue\"\n              placeholder=\"请选择用例类型\"\n              @change=\"changeProject\"\n            >\n              <el-option\n                v-for=\"item in projectOption\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"demo-input-suffix\">\n            版本号:\n            <el-input v-model=\"demandSearchFrom.version_number\" placeholder=\"请输入版本号\" style=\"width: 64%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"demo-input-suffix\">\n            需求类型:\n            <el-select\n              v-model=\"demandValue\"\n              placeholder=\"请选择需求类型\"\n              @change=\"demandType\"\n            >\n              <el-option\n                v-for=\"item in demandOption\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </div>\n        </el-col>\n      </el-row>\n      <div style=\"text-align: right;margin-top: 10px;\">\n        <el-button class=\"filter-item\" icon=\"el-icon-delete\" @click=\"clearSearch()\">重置</el-button>\n        <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"getDemandList()\">搜索</el-button>\n      </div>\n    </div>\n    <div style=\"text-align: left; margin-top: 10px;\">\n      <el-button class=\"el-icon-circle-plus-outline\" type=\"primary\" @click=\"createDemand()\">创建需求</el-button>\n    </div>\n    <div style=\"margin-top: 10px\">\n      <el-table\n        :data=\"demandDate\"\n        border\n        style=\"width: 100%\"\n      >\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\n        <el-table-column prop=\"name\" label=\"需求名称\" width=\"auto\" />\n        <el-table-column prop=\"project.name\" label=\"项目\" width=\"auto\" />\n        <el-table-column prop=\"version_number\" label=\"版本号\" width=\"auto\" />\n        <el-table-column prop=\"requirements_type\" label=\"需求类型\" width=\"auto\">\n          <template slot-scope=\"{ row }\">\n            {{ row.requirements_type | requirementsType }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"requirements_detail\" label=\"需求详情\" width=\"auto\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"demandRowInfo(scope.row)\"\n            >显示详情内容</el-button>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"create_time\" label=\"创建时间\" width=\"auto\" />\n        <el-table-column fixed=\"right\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              @click=\"editDemandInfo(scope.row)\"\n            >编辑</el-button>\n            <el-button\n              type=\"text\"\n              @click=\"deleteDemandInfo(scope.row)\"\n            >删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!--分页-->\n      <div style=\"width: 100%; text-align: right\">\n        <el-pagination\n          background\n          :total=\"total\"\n          :page-size=\"req.size\"\n          layout=\"total, prev, pager, next\"\n          @current-change=\"handleCurrentChange\"\n        />\n      </div>\n    </div>\n    <!-- 创建需求 -->\n    <demand-dialog\n      v-if=\"dialogFlag\"\n      :title=\"demandTitle\"\n      :did=\"currentDemandId\"\n      @cancel=\"closeDialog\"\n    />\n    <demand-detail-dialog v-if=\"dialogDemandDetailFlag\" :title=\"demandDetailTitle\" :did=\"currentDemandId\" @cancel=\"closeDialog\" />\n  </div>\n</template>\n<script>\nimport { projectList } from '@/api/projects'\nimport { getDemandList, deleteDemand } from '@/api/cases'\nimport DemandDialog from '@/components/Cases/demandDialog'\nimport DemandDetailDialog from '@/components/Cases/demandDetailDialog'\n\nexport default {\n  name: 'DemandManage',\n  components: {\n    DemandDialog,\n    DemandDetailDialog\n  },\n  filters: {\n    requirementsType(value) {\n      if (value === 'business') {\n        return '业务类需求'\n      } else if (value === 'improve') {\n        return 'Bug改进类需求'\n      } else if (value === 'technical') {\n        return '技术类需求'\n      } else {\n        return '未知类型'\n      }\n    }\n  },\n  data() {\n    return {\n      demandTitle: '',\n      projectValue: '',\n      projectLabel: '',\n      projectOption: [],\n      demandDate: [],\n      dialogFlag: false,\n      demandSearchFrom: {\n        'name': '',\n        'project_id': 0,\n        'version_number': '',\n        'requirements_type': '',\n        'create_time': ''\n      },\n      demandValue: '',\n      demandLabel: '',\n      demandOption: [\n        {\n          value: 'business',\n          label: '业务类需求'\n        },\n        {\n          value: 'improve',\n          label: '改进类需求'\n        },\n        {\n          value: 'technical',\n          label: '技术类需求'\n        }\n      ],\n      currentDemandId: 0,\n      dialogDemandDetailFlag: false,\n      demandDetailTitle: '',\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 10\n    }\n  },\n  mounted() {\n    this.initProjectList()\n    this.getDemandList()\n  },\n  methods: {\n    // 创建需求\n    createDemand() {\n      this.dialogFlag = true\n      this.demandTitle = 'create'\n    },\n    demandType(value) {\n      this.demandValue = value\n      this.demandLabel = this.demandOption.find(\n        (item) => item.value === value\n      ).label\n      this.demandSearchFrom.requirements_type = value\n    },\n    // 初始化项目列表\n    async initProjectList() {\n      const req_body = {\n        'name': ''\n      }\n      const resp = await projectList(this.req, req_body)\n      if (resp.success === true) {\n        // 在初始化项目信息，同时初始化项目下的模块信息\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name\n          })\n        }\n        // this.$message.success(\"查询成功！\")\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 修改选中项目\n    changeProject(value) {\n      console.log('change project -->', value)\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n      this.demandSearchFrom.project_id = value\n    },\n    // 获取需求列表\n    async getDemandList() {\n      const resp = await getDemandList(this.req, JSON.stringify(this.demandSearchFrom))\n      if (resp.success === true) {\n        this.total = resp.total\n        for (let i = 0; i < resp.items.length; i++) {\n          resp.items[i].create_time = this.$moment(\n            resp.items[i].create_time\n          ).format('YYYY-MM-DD HH:mm:ss')\n        }\n        this.demandDate = resp.items\n        this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 创建模块关闭\n    closeDialog() {\n      this.dialogFlag = false\n      this.dialogDemandDetailFlag = false\n      this.getDemandList()\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      // console.log(`当前页: ${val}`)\n      this.req.page = val\n      // this.initProjectList()\n    },\n    // 清除搜索\n    clearSearch() {\n      this.demandSearchFrom.name = ''\n      this.demandSearchFrom.version_number = ''\n      this.demandSearchFrom.project_id = 0\n      this.projectValue = ''\n      this.demandSearchFrom.requirements_type = ''\n      this.demandValue = ''\n      this.getDemandList()\n    },\n    // 查看需求详情\n    demandRowInfo(row) {\n      // 点击用例，获取用例id\n      this.currentDemandId = row.id\n      this.dialogDemandDetailFlag = true\n      this.demandDetailTitle = '需求详情'\n    },\n    // 编辑测试用例\n    editDemandInfo(row) {\n      // 点击用例，获取用例id\n      this.currentDemandId = row.id\n      this.dialogFlag = true\n      this.demandTitle = 'edit'\n    },\n    // 删除需求信息\n    deleteDemandInfo(row) {\n      deleteDemand(row.id).then((resp) => {\n        this.$confirm('删除任务, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning',\n          center: true\n        }).then(() => {\n          if (resp.success === true) {\n            this.getDemandList()\n          } else {\n            this.$message.error(resp.error.msg)\n          }\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          })\n        })\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n.custom-tree-node {\n  width: 100%;\n}\n.label-title {\n  font-family: \"Liberation Mono\", monospace, serif, sans-serif;\n  font-size: 24px;\n}\n.label-text {\n  font-family: \"Lucida Calligraphy\", cursive, serif, sans-serif;\n  font-size: 20px;\n  font-weight: bolder;\n  float: left;\n  margin-top: 5px;\n}\n.flex-container {\n  display: flex;\n}\n\n.el-container {\n  text-align: center;\n  line-height: 38px;\n}\n</style>\n"]}]}