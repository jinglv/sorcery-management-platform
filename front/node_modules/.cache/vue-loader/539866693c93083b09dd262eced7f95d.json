{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/createProjectDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/createProjectDialog.vue","mtime":1685692726939},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHByb2plY3RMaXN0IH0gZnJvbSAnQC9hcGkvcHJvamVjdHMnCmltcG9ydCB7IGNyZWF0ZUh0dHBSdW5uZXJQcm9qZWN0IH0gZnJvbSAnQC9hcGkvaHR0cHJ1bm5lcicKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1RpdGxlOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwKICAgICAgaHR0cFJ1bm5lclByb2plY3RGb3JtOiB7CiAgICAgICAgcHJvamVjdF9pZDogMCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBkZXNjcmliZTogJycsCiAgICAgICAgY29kZTogJycsCiAgICAgICAgZW52X2NvZGU6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpUh0dHBSdW5uZXLlt6XnqIvlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgcHJvamVjdEZvcm06IHsKICAgICAgICBuYW1lOiAnJwogICAgICB9LAogICAgICByZXE6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNpemU6IDEwCiAgICAgIH0sCiAgICAgIC8vIOWIhumhtemhteaVsAogICAgICB0b3RhbDogNiwKICAgICAgcHJvamVjdE9wdGlvbjogW10sCiAgICAgIHNhdmVGbGFnOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMucHJvamVjdExpc3QoKQogICAgaWYgKHRoaXMudGl0bGUgPT09ICdjcmVhdGVQcm9qZWN0JykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfliJvlu7pIVFRwUnVubmVy6aG555uuJwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Yid5aeL5YyW6aG555uu5YiX6KGoCiAgICBhc3luYyBwcm9qZWN0TGlzdCgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHByb2plY3RMaXN0KHRoaXMucmVxLCBKU09OLnN0cmluZ2lmeSh0aGlzLnByb2plY3RGb3JtKSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMucHJvamVjdFZhbHVlID0gcmVzcC5pdGVtc1swXS5pZAogICAgICAgIHRoaXMucHJvamVjdExhYmVsID0gcmVzcC5pdGVtc1swXS5uYW1lCiAgICAgICAgdGhpcy5odHRwUnVubmVyUHJvamVjdEZvcm0ucHJvamVjdF9pZCA9IHJlc3AuaXRlbXNbMF0uaWQKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMucHJvamVjdE9wdGlvbi5wdXNoKHsKICAgICAgICAgICAgdmFsdWU6IHJlc3AuaXRlbXNbaV0uaWQsCiAgICAgICAgICAgIGxhYmVsOiByZXNwLml0ZW1zW2ldLm5hbWUKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICAvLyDkv67mlLnpgInkuK3pobnnm64KICAgIGNoYW5nZVByb2plY3QodmFsdWUpIHsKICAgICAgdGhpcy5wcm9qZWN0VmFsdWUgPSB2YWx1ZQogICAgICB0aGlzLnByb2plY3RMYWJlbCA9IHRoaXMucHJvamVjdE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLmxhYmVsCiAgICB9LAogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NhbmNlbCcsIHt9KQogICAgfSwKICAgIC8vIOWIm+W7uumhueebrgogICAgc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGNyZWF0ZUh0dHBSdW5uZXJQcm9qZWN0KHRoaXMuaHR0cFJ1bm5lclByb2plY3RGb3JtKS50aGVuKChyZXNwKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgICAgICAvLyDliJvlu7rmiJDlip/vvIzlhbPpl63lvLnnqpcKICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCkKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+mhueebruWIm+W7uuaIkOWKn++8gScpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["createProjectDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createProjectDialog.vue","sourceRoot":"src/components/HttpRunner","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1000px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-form\n      ref=\"ruleForm\"\n      :rules=\"rules\"\n      :model=\"httpRunnerProjectForm\"\n      label-width=\"200px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"项目名称\" prop=\"project_id\">\n        <el-select\n          v-model=\"httpRunnerProjectForm.project_id\"\n          style=\"width: 760px;\"\n          @change=\"changeProject\"\n        >\n          <el-option\n            v-for=\"item in projectOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"HttpRunner工程名称\" prop=\"name\">\n        <el-input v-model=\"httpRunnerProjectForm.name\" />\n      </el-form-item>\n      <el-form-item label=\"描述\" prop=\"describe\">\n        <el-input v-model=\"httpRunnerProjectForm.describe\" />\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <div class=\"dialog-footer\">\n          <el-button @click=\"closeDialog()\">取消</el-button>\n          <el-button\n            type=\"primary\"\n            :disabled=\"saveFlag\"\n            @click=\"submitForm('ruleForm')\"\n          >保存</el-button>\n        </div>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport { projectList } from '@/api/projects'\nimport { createHttpRunnerProject } from '@/api/httprunner'\n\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      httpRunnerProjectForm: {\n        project_id: 0,\n        name: '',\n        describe: '',\n        code: '',\n        env_code: ''\n      },\n      rules: {\n        name: [\n          { required: true, message: '请输入HttpRunner工程名称', trigger: 'blur' }\n        ]\n      },\n      projectForm: {\n        name: ''\n      },\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 6,\n      projectOption: [],\n      saveFlag: false\n    }\n  },\n  mounted() {\n    this.projectList()\n    if (this.title === 'createProject') {\n      this.showTitle = '创建HTTpRunner项目'\n    }\n  },\n  methods: {\n    // 初始化项目列表\n    async projectList() {\n      const resp = await projectList(this.req, JSON.stringify(this.projectForm))\n      if (resp.success === true) {\n        this.projectValue = resp.items[0].id\n        this.projectLabel = resp.items[0].name\n        this.httpRunnerProjectForm.project_id = resp.items[0].id\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name\n          })\n        }\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 修改选中项目\n    changeProject(value) {\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    // 创建项目\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          createHttpRunnerProject(this.httpRunnerProjectForm).then((resp) => {\n            if (resp.success === true) {\n              // 创建成功，关闭弹窗\n              this.closeDialog()\n              this.$message.success('项目创建成功！')\n            } else {\n              this.$message.error(resp.error.message)\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n</style>\n"]}]}