{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/demandDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/demandDialog.vue","mtime":1702438023986},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHByb2plY3RMaXN0IH0gZnJvbSAnQC9hcGkvcHJvamVjdHMnCmltcG9ydCB7IHVwbG9hZEZpbGUgfSBmcm9tICdAL2FwaS9jb21tb25zJwppbXBvcnQgeyBjcmVhdGVEZW1hbmQsIGdldERlbWFuZERldGFpbCwgdXBkYXRlRGVtYW5kRGV0YWlsIH0gZnJvbSAnQC9hcGkvY2FzZXMnCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJwppbXBvcnQgRSBmcm9tICd3YW5nZWRpdG9yJwppbXBvcnQgaGxqcyBmcm9tICdoaWdobGlnaHQuanMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0RlbWFuZERpYWxvZycsCiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGRpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93VGl0bGU6ICcnLAogICAgICBkaWFsb2dWaXNpYmxlOiB0cnVlLAogICAgICBkZW1hbmRGb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgcHJvamVjdF9pZDogMCwKICAgICAgICB2ZXJzaW9uX251bWJlcjogJycsCiAgICAgICAgcmVxdWlyZW1lbnRzX3R5cGU6ICcnLAogICAgICAgIHJlcXVpcmVtZW50czogJycsCiAgICAgICAgcmVxdWlyZW1lbnRzX3VwbG9hZF9maWxlOiBbXSwKICAgICAgICBkZW1hbmRfYW5hbHlzaXM6ICcnLAogICAgICAgIGRlc2NyaWJlOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpnIDmsYLlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgcHJvamVjdF9pZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqemhueebricsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICB2ZXJzaW9uX251bWJlcjogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemcgOaxgueJiOacrOWPtycsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICByZXF1aXJlbWVudHNfdHlwZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqemcgOaxguexu+WeiycsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXQogICAgICB9LAogICAgICB0eXBlVmFsdWU6ICcnLAogICAgICB0eXBlTGFiZWw6ICcnLAogICAgICB0eXBlT3B0aW9uOiBbCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdidXNpbmVzcycsCiAgICAgICAgICBsYWJlbDogJ+S4muWKoeexu+mcgOaxgicKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnaW1wcm92ZScsCiAgICAgICAgICBsYWJlbDogJ+aUuei/m+exu+mcgOaxgicKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAndGVjaG5pY2FsJywKICAgICAgICAgIGxhYmVsOiAn5oqA5pyv57G76ZyA5rGCJwogICAgICAgIH0KICAgICAgXSwKICAgICAgcHJvamVjdFZhbHVlOiAnJywKICAgICAgcHJvamVjdExhYmVsOiAnJywKICAgICAgcHJvamVjdE9wdGlvbjogW10sCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICBlZGl0b3JfZGVtYW5kOiBudWxsCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5zaG93VGl0bGUgPSAn5Yib5bu66ZyA5rGCJwogICAgLy8g57uE5Lu25omT5byA5YiZ6L+b6KGM5Yqg6L29CiAgICAvLyDkvb/nlKjml7bpkp/lh73mlbDov5vooYzlu7bov5/vvIzlkKbliJnojrflj5bkuI3liLDlhYPntKAgLS0g562J5YWD57Sg5Yqg6L295a6M5oiQ5ZCO5YaN6L+b6KGM5Yib5bu6RQogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICB0aGlzLmVkaXRvcl9kZW1hbmQgPSBuZXcgRSgnI2VkaXRvcl9kZW1hbmQnKQogICAgICB0aGlzLmVkaXRvcl9kZW1hbmQuaGlnaGxpZ2h0ID0gaGxqcwogICAgICAvLyDlr4zmlofmnKznu4Tku7forr7nva7lm77niYfkuIrkvKDmjqXlj6MKICAgICAgdGhpcy5lZGl0b3JfZGVtYW5kLmNvbmZpZy51cGxvYWRJbWdTZXJ2ZXIgPSAnL2FwaS9jb21tb25zL2VkaXRvci9maWxlL2ltYWdlJwogICAgICB0aGlzLmVkaXRvcl9kZW1hbmQuY29uZmlnLnVwbG9hZEZpbGVOYW1lID0gJ2ZpbGUnCiAgICAgIHRoaXMuZWRpdG9yX2RlbWFuZC5jb25maWcudXBsb2FkSW1nSGVhZGVycyA9IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBnZXRUb2tlbigpCiAgICAgIH0KICAgICAgLy8g5a+M5paH5pys57uE5Lu36K6+572u6KeG6aKR5LiK5Lyg5o6l5Y+jCiAgICAgIHRoaXMuZWRpdG9yX2RlbWFuZC5jb25maWcudXBsb2FkVmlkZW9TZXJ2ZXIgPSAnL2FwaS9jb21tb25zL2VkaXRvci9maWxlL3ZpZGVvJwogICAgICB0aGlzLmVkaXRvcl9kZW1hbmQuY29uZmlnLnVwbG9hZFZpZGVvTmFtZSA9ICdmaWxlJwogICAgICB0aGlzLmVkaXRvcl9kZW1hbmQuY29uZmlnLnVwbG9hZFZpZGVvSGVhZGVycyA9IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyBnZXRUb2tlbigpCiAgICAgIH0KICAgICAgLy8g5Yib5bu6CiAgICAgIHRoaXMuZWRpdG9yX2RlbWFuZC5jcmVhdGUoKQogICAgfSkKICAgIC8vIOWIpOaWreS4jeWQjOaTjeS9nAogICAgaWYgKHRoaXMudGl0bGUgPT09ICdlZGl0JykgewogICAgICB0aGlzLnNob3dUaXRsZSA9ICfpnIDmsYLor6bmg4UnCiAgICAgIHRoaXMuZ2V0RGVtYW5kRGV0YWlsKCkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRQcm9qZWN0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FuY2VsJywge30pCiAgICAgIC8vIOWFs+mXreW8ueeql++8jOmUgOavgUUKICAgICAgdGhpcy5lZGl0b3JfZGVtYW5kLmRlc3Ryb3koKQogICAgICB0aGlzLmVkaXRvcl9kZW1hbmQgPSBudWxsCiAgICB9LAogICAgY2hhbmdlVHlwZSh2YWx1ZSkgewogICAgICB0aGlzLnR5cGVWYWx1ZSA9IHZhbHVlCiAgICAgIHRoaXMudHlwZUxhYmVsID0gdGhpcy50eXBlT3B0aW9uLmZpbmQoCiAgICAgICAgKGl0ZW0pID0+IGl0ZW0udmFsdWUgPT09IHZhbHVlCiAgICAgICkubGFiZWwKICAgICAgdGhpcy5kZW1hbmRGb3JtLnJlcXVpcmVtZW50c190eXBlID0gdmFsdWUKICAgIH0sCiAgICAvLyDliJvlu7rpnIDmsYLor6bmg4UKICAgIGNyZWF0ZURlbWFuZChmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAvLyDojrflj5bnvJbovpHmoYbnmoTlhoXlrrkKICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5lZGl0b3JfZGVtYW5kLnR4dC5odG1sKCkKICAgICAgICB0aGlzLmRlbWFuZEZvcm0uZGVtYW5kX2FuYWx5c2lzID0gY29udGVudAogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY3JlYXRlRGVtYW5kKHRoaXMuZGVtYW5kRm9ybSkudGhlbigocmVzcCkgPT4gewogICAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliJvlu7rmiJDlip/vvIEnKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5lcnJvci5tZXNzYWdlKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpCiAgICB9LAogICAgaGFuZGxlUHJldmlldyhmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDmiJDlip8nLCBmaWxlKQogICAgfSwKICAgIGhhbmRsZUV4Y2VlZChmaWxlcywgZmlsZUxpc3QpIHsKICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKGDlvZPliY3pmZDliLbpgInmi6kgMyDkuKrmlofku7bvvIzmnKzmrKHpgInmi6nkuoYgJHtmaWxlcy5sZW5ndGh9IOS4quaWh+S7tu+8jOWFsemAieaLqeS6hiAke2ZpbGVzLmxlbmd0aCArIGZpbGVMaXN0Lmxlbmd0aH0g5Liq5paH5Lu2YCkKICAgIH0sCiAgICBiZWZvcmVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuJGNvbmZpcm0oYOehruWumuenu+mZpCAke2ZpbGUubmFtZX3vvJ9gKQogICAgfSwKICAgIC8vIOimhueblum7mOiupOeahOS4iuS8oOihjOS4uu+8jOWPr+S7peiHquWumuS5ieS4iuS8oOeahOWunueOsO+8jOmBv+WFjeS9v+eUqOahhuaetuiHquWKqOS4iuS8oOWKn+iDvQogICAgaHR0cFJlcXVlc3QoKSB7fSwKICAgIC8vIOS4iuS8oOaWh+S7tgogICAgYXN5bmMgYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc3QgZmIgPSBuZXcgRm9ybURhdGEoKQogICAgICBmYi5hcHBlbmQoJ2ZpbGUnLCBmaWxlKQogICAgICBjb25zdCByZXNwID0gYXdhaXQgdXBsb2FkRmlsZShmYikKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIC8vIOiOt+WPluaWh+S7tuWQjQogICAgICAgIGNvbnN0IGZpbGVOYW1lID0gcmVzcC5yZXN1bHQubmFtZQogICAgICAgIHRoaXMuZGVtYW5kRm9ybS5yZXF1aXJlbWVudHNfdXBsb2FkX2ZpbGUucHVzaChmaWxlTmFtZSkKICAgICAgICBjb25zdCBmaWxlUGF0aCA9ICcvc3RhdGljL2ZpbGUvJyArIGZpbGVOYW1lCiAgICAgICAgY29uc3QgZmlsZUluZm8gPSB7CiAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsCiAgICAgICAgICB1cmw6IGZpbGVQYXRoCiAgICAgICAgfQogICAgICAgIHRoaXMuZmlsZUxpc3QucHVzaChmaWxlSW5mbykKICAgICAgICBjb25zb2xlLmluZm8oJ+W3suS4iuS8oOaWh+S7tu+8micsIGZpbGVOYW1lKQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5LiK5Lyg5oiQ5Yqf77yBJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZXJyb3IubWVzc2FnZSkKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldERlbWFuZERldGFpbCgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGdldERlbWFuZERldGFpbCh0aGlzLmRpZCkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuZGVtYW5kRm9ybSA9IHJlc3AucmVzdWx0CiAgICAgICAgdGhpcy5wcm9qZWN0VmFsdWUgPSByZXNwLnJlc3VsdC5wcm9qZWN0X2lkCiAgICAgICAgdGhpcy50eXBlVmFsdWUgPSByZXNwLnJlc3VsdC5yZXF1aXJlbWVudHNfdHlwZQogICAgICAgIHRoaXMuZWRpdG9yX2RlbWFuZC50eHQuaHRtbChyZXNwLnJlc3VsdC5kZW1hbmRfYW5hbHlzaXMpCiAgICAgICAgY29uc3QgZmlsZXMgPSBKU09OLnBhcnNlKHJlc3AucmVzdWx0LnJlcXVpcmVtZW50c191cGxvYWRfZmlsZS5yZXBsYWNlKC8nL2csICciJykpCiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgZmlsZUluZm9zID0gewogICAgICAgICAgICAgIG5hbWU6IGZpbGVzW2ldLAogICAgICAgICAgICAgIHVybDogJy9zdGF0aWMvZmlsZS8nICsgZmlsZXNbaV0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmZpbGVMaXN0LnB1c2goZmlsZUluZm9zKQogICAgICAgICAgICB0aGlzLmRlbWFuZEZvcm0ucmVxdWlyZW1lbnRzX3VwbG9hZF9maWxlID0gW10KICAgICAgICAgICAgdGhpcy5kZW1hbmRGb3JtLnJlcXVpcmVtZW50c191cGxvYWRfZmlsZS5wdXNoKGZpbGVzW2ldKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRlbWFuZEZvcm0ucmVxdWlyZW1lbnRzX3VwbG9hZF9maWxlID0gW10KICAgICAgICB9CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmn6Xor6LmiJDlip8nKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5lcnJvci5tZXNzYWdlKQogICAgICB9CiAgICB9LAogICAgdXBkYXRlRGVtYW5kKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIC8vIOiOt+WPlue8lui+keahhueahOWGheWuuQogICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLmVkaXRvcl9kZW1hbmQudHh0Lmh0bWwoKQogICAgICAgIHRoaXMuZGVtYW5kRm9ybS5kZW1hbmRfYW5hbHlzaXMgPSBjb250ZW50CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB1cGRhdGVEZW1hbmREZXRhaWwodGhpcy5kaWQsIHRoaXMuZGVtYW5kRm9ybSkudGhlbigocmVzcCkgPT4gewogICAgICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDmiJDlip/vvIEnKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5lcnJvci5tZXNzYWdlKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvLyDliJ3lp4vljJbpobnnm67liJfooagKICAgIGFzeW5jIGluaXRQcm9qZWN0TGlzdCgpIHsKICAgICAgY29uc3QgcmVxX2JvZHkgPSB7CiAgICAgICAgJ25hbWUnOiAnJwogICAgICB9CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBwcm9qZWN0TGlzdCh0aGlzLnJlcSwgcmVxX2JvZHkpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAvLyDlnKjliJ3lp4vljJbpobnnm67kv6Hmga/vvIzlkIzml7bliJ3lp4vljJbpobnnm67kuIvnmoTmqKHlnZfkv6Hmga8KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMucHJvamVjdE9wdGlvbi5wdXNoKHsKICAgICAgICAgICAgdmFsdWU6IHJlc3AuaXRlbXNbaV0uaWQsCiAgICAgICAgICAgIGxhYmVsOiByZXNwLml0ZW1zW2ldLm5hbWUKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5p+l6K+i5oiQ5Yqf77yBIikKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LlpLHotKXvvIEnKQogICAgICB9CiAgICB9LAogICAgLy8g5L+u5pS56YCJ5Lit6aG555uuCiAgICBjaGFuZ2VQcm9qZWN0KHZhbHVlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2UgcHJvamVjdCAtLT4nLCB2YWx1ZSkKICAgICAgdGhpcy5wcm9qZWN0VmFsdWUgPSB2YWx1ZQogICAgICB0aGlzLnByb2plY3RMYWJlbCA9IHRoaXMucHJvamVjdE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLmxhYmVsCiAgICAgIHRoaXMuZGVtYW5kRm9ybS5wcm9qZWN0X2lkID0gdmFsdWUKICAgIH0KICB9Cn0K"},{"version":3,"sources":["demandDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"demandDialog.vue","sourceRoot":"src/components/Cases","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"70%\"\n    :before-close=\"closeDialog\"\n    :append-to-body=\"true\"\n    :close-on-click-modal=\"false\"\n  >\n    <el-form\n      ref=\"ruleForm\"\n      :model=\"demandForm\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"需求名称\" prop=\"name\">\n        <el-input v-model=\"demandForm.name\" />\n      </el-form-item>\n      <el-form-item label=\"项目\" prop=\"project_id\">\n        <el-select\n          v-model=\"projectValue\"\n          placeholder=\"请选择项目\"\n          style=\"width: 100%;\"\n          @change=\"changeProject\"\n        >\n          <el-option\n            v-for=\"item in projectOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"版本号\" prop=\"version_number\">\n        <el-input v-model=\"demandForm.version_number\" />\n      </el-form-item>\n      <el-form-item label=\"需求类型\" prop=\"requirements_type\">\n        <el-select\n          v-model=\"typeValue\"\n          placeholder=\"请选择需求类型\"\n          style=\"width: 100%;\"\n          @change=\"changeType\"\n        >\n          <el-option\n            v-for=\"item in typeOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"需求\" prop=\"requirements\">\n        <el-input v-model=\"demandForm.requirements\" placeholder=\"请输入需求链接地址或者上传需求文档……\" />\n        <el-upload\n          class=\"upload-demo\"\n          action=\"#\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleRemove\"\n          :before-remove=\"beforeRemove\"\n          multiple\n          :limit=\"3\"\n          :on-exceed=\"handleExceed\"\n          :file-list=\"fileList\"\n          :http-request=\"httpRequest\"\n          :before-upload=\"beforeUpload\"\n        >\n          <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n          <div slot=\"tip\" class=\"el-upload__tip\">只能上传文本和图片格式，且不超过2MB</div>\n        </el-upload>\n      </el-form-item>\n      <el-form-item label=\"需求分析\" prop=\"demand_analysis\">\n        <div id=\"editor_demand\" />\n      </el-form-item>\n      <el-form-item label=\"描述\" prop=\"describe\">\n        <el-input v-model=\"demandForm.describe\" />\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <el-button @click=\"closeDialog\">取消</el-button>\n        <el-button\n          v-if=\"title != 'edit'\"\n          type=\"primary\"\n          @click=\"createDemand('ruleForm')\"\n        >确定</el-button>\n        <el-button\n          v-if=\"title == 'edit'\"\n          type=\"primary\"\n          @click=\"updateDemand('ruleForm')\"\n        >更新</el-button>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport { projectList } from '@/api/projects'\nimport { uploadFile } from '@/api/commons'\nimport { createDemand, getDemandDetail, updateDemandDetail } from '@/api/cases'\nimport { getToken } from '@/utils/auth'\nimport E from 'wangeditor'\nimport hljs from 'highlight.js'\n\nexport default {\n  name: 'DemandDialog',\n  components: {},\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    did: {\n      type: Number,\n      default: 1\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      demandForm: {\n        name: '',\n        project_id: 0,\n        version_number: '',\n        requirements_type: '',\n        requirements: '',\n        requirements_upload_file: [],\n        demand_analysis: '',\n        describe: ''\n      },\n      rules: {\n        name: [\n          { required: true, message: '请输入需求名称', trigger: 'blur' }\n        ],\n        project_id: [\n          { required: true, message: '请选择项目', trigger: 'blur' }\n        ],\n        version_number: [\n          { required: true, message: '请输入需求版本号', trigger: 'blur' }\n        ],\n        requirements_type: [\n          { required: true, message: '请选择需求类型', trigger: 'blur' }\n        ]\n      },\n      typeValue: '',\n      typeLabel: '',\n      typeOption: [\n        {\n          value: 'business',\n          label: '业务类需求'\n        },\n        {\n          value: 'improve',\n          label: '改进类需求'\n        },\n        {\n          value: 'technical',\n          label: '技术类需求'\n        }\n      ],\n      projectValue: '',\n      projectLabel: '',\n      projectOption: [],\n      fileList: [],\n      disabled: false,\n      editor_demand: null\n    }\n  },\n  created() {\n    this.showTitle = '创建需求'\n    // 组件打开则进行加载\n    // 使用时钟函数进行延迟，否则获取不到元素 -- 等元素加载完成后再进行创建E\n    this.$nextTick(() => {\n      this.editor_demand = new E('#editor_demand')\n      this.editor_demand.highlight = hljs\n      // 富文本组价设置图片上传接口\n      this.editor_demand.config.uploadImgServer = '/api/commons/editor/file/image'\n      this.editor_demand.config.uploadFileName = 'file'\n      this.editor_demand.config.uploadImgHeaders = {\n        Authorization: 'Bearer ' + getToken()\n      }\n      // 富文本组价设置视频上传接口\n      this.editor_demand.config.uploadVideoServer = '/api/commons/editor/file/video'\n      this.editor_demand.config.uploadVideoName = 'file'\n      this.editor_demand.config.uploadVideoHeaders = {\n        Authorization: 'Bearer ' + getToken()\n      }\n      // 创建\n      this.editor_demand.create()\n    })\n    // 判断不同操作\n    if (this.title === 'edit') {\n      this.showTitle = '需求详情'\n      this.getDemandDetail()\n    }\n  },\n  mounted() {\n    this.initProjectList()\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n      // 关闭弹窗，销毁E\n      this.editor_demand.destroy()\n      this.editor_demand = null\n    },\n    changeType(value) {\n      this.typeValue = value\n      this.typeLabel = this.typeOption.find(\n        (item) => item.value === value\n      ).label\n      this.demandForm.requirements_type = value\n    },\n    // 创建需求详情\n    createDemand(formName) {\n      this.$refs[formName].validate((valid) => {\n        // 获取编辑框的内容\n        const content = this.editor_demand.txt.html()\n        this.demandForm.demand_analysis = content\n        if (valid) {\n          createDemand(this.demandForm).then((resp) => {\n            if (resp.success === true) {\n              this.closeDialog()\n              this.$message.success('创建成功！')\n            } else {\n              this.$message.error(resp.error.message)\n            }\n          })\n        }\n      })\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList)\n    },\n    handlePreview(file) {\n      console.log('上传成功', file)\n    },\n    handleExceed(files, fileList) {\n      this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`)\n    },\n    beforeRemove(file, fileList) {\n      return this.$confirm(`确定移除 ${file.name}？`)\n    },\n    // 覆盖默认的上传行为，可以自定义上传的实现，避免使用框架自动上传功能\n    httpRequest() {},\n    // 上传文件\n    async beforeUpload(file) {\n      const fb = new FormData()\n      fb.append('file', file)\n      const resp = await uploadFile(fb)\n      if (resp.success === true) {\n        // 获取文件名\n        const fileName = resp.result.name\n        this.demandForm.requirements_upload_file.push(fileName)\n        const filePath = '/static/file/' + fileName\n        const fileInfo = {\n          name: file.name,\n          url: filePath\n        }\n        this.fileList.push(fileInfo)\n        console.info('已上传文件：', fileName)\n        this.$message.success('上传成功！')\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n    async getDemandDetail() {\n      const resp = await getDemandDetail(this.did)\n      if (resp.success === true) {\n        this.demandForm = resp.result\n        this.projectValue = resp.result.project_id\n        this.typeValue = resp.result.requirements_type\n        this.editor_demand.txt.html(resp.result.demand_analysis)\n        const files = JSON.parse(resp.result.requirements_upload_file.replace(/'/g, '\"'))\n        if (files.length > 0) {\n          for (let i = 0; i < files.length; i++) {\n            const fileInfos = {\n              name: files[i],\n              url: '/static/file/' + files[i]\n            }\n            this.fileList.push(fileInfos)\n            this.demandForm.requirements_upload_file = []\n            this.demandForm.requirements_upload_file.push(files[i])\n          }\n        } else {\n          this.demandForm.requirements_upload_file = []\n        }\n        this.$message.success('查询成功')\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n    updateDemand(formName) {\n      this.$refs[formName].validate((valid) => {\n        // 获取编辑框的内容\n        const content = this.editor_demand.txt.html()\n        this.demandForm.demand_analysis = content\n        if (valid) {\n          updateDemandDetail(this.did, this.demandForm).then((resp) => {\n            if (resp.success === true) {\n              this.closeDialog()\n              this.$message.success('更新成功！')\n            } else {\n              this.$message.error(resp.error.message)\n            }\n          })\n        }\n      })\n    },\n    // 初始化项目列表\n    async initProjectList() {\n      const req_body = {\n        'name': ''\n      }\n      const resp = await projectList(this.req, req_body)\n      if (resp.success === true) {\n        // 在初始化项目信息，同时初始化项目下的模块信息\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name\n          })\n        }\n        // this.$message.success(\"查询成功！\")\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 修改选中项目\n    changeProject(value) {\n      console.log('change project -->', value)\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n      this.demandForm.project_id = value\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n\n#editor_requirements {\n  border: 1px solid #ccc;\n  z-index: 100; /* 按需定义 */\n}\n\n#editor_demand {\n  border: 1px solid #ccc;\n  z-index: 100; /* 按需定义 */\n}\n</style>\n"]}]}