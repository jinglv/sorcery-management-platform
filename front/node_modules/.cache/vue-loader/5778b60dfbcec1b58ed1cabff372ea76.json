{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/components/HttpRunner/httpRunnerRunApiDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/components/HttpRunner/httpRunnerRunApiDialog.vue","mtime":1698032217390},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGh0dHBSdW5uZXJQcm9qZWN0TGlzdCwgaHR0cFJ1bm5lclJ1bkFwaSB9IGZyb20gJ0AvYXBpL2h0dHBydW5uZXInCmltcG9ydCB7IGVudnNMaXN0QnlQcm9qZWN0IH0gZnJvbSAnQC9hcGkvZW52cycKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczogewogICAgaWRzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1RpdGxlOiAnSHR0cFJ1bm5lcuaOpeWPo+aJp+ihjCcsCiAgICAgIGRpYWxvZ1Zpc2libGU6IHRydWUsCiAgICAgIHByb2plY3RWYWx1ZTogJycsCiAgICAgIHByb2plY3RMYWJlbDogJycsCiAgICAgIHByb2plY3RPcHRpb246IFtdLAogICAgICBwcm9qZWN0SWQ6IDAsCiAgICAgIGVudlZhbHVlOiAnJywKICAgICAgZW52TGFiZWw6ICcnLAogICAgICBlbnZPcHRpb246IFtdLAogICAgICBhcGlSdW5Gb3JtOiB7CiAgICAgICAgaHR0cHJ1bm5lcl9wcm9qZWN0X2lkOiAnJywKICAgICAgICB0eXBlOiAnQVBJJywKICAgICAgICBhcGlfaWRzOiBbXSwKICAgICAgICBlbnZfdXJsOiAnJwogICAgICB9LAogICAgICByZXE6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNpemU6IDEwCiAgICAgIH0sCiAgICAgIC8vIOWIhumhtemhteaVsAogICAgICB0b3RhbDogMTAsCiAgICAgIHNhdmVGbGFnOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdEh0dHBSdW5uZXJQcm9qZWN0TGlzdCgpCiAgICBpZiAodGhpcy5pZHMubGVuZ3RoID09PSAwKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeaOpeWPoycpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FuY2VsJywge30pCiAgICB9LAogICAgYXN5bmMgaW5pdEh0dHBSdW5uZXJQcm9qZWN0TGlzdCgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGh0dHBSdW5uZXJQcm9qZWN0TGlzdCh0aGlzLnJlcSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5wcm9qZWN0T3B0aW9uLnB1c2goewogICAgICAgICAgICB2YWx1ZTogcmVzcC5pdGVtc1tpXS5pZCwKICAgICAgICAgICAgbGFiZWw6IHJlc3AuaXRlbXNbaV0ubmFtZSwKICAgICAgICAgICAgcHJvamVjdElkOiByZXNwLml0ZW1zW2ldLnByb2plY3RfaWQKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMudG90YWwgPSByZXNwLnRvdGFsCiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmn6Xor6LmiJDlip/vvIEnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VQcm9qZWN0KHZhbHVlKSB7CiAgICAgIHRoaXMucHJvamVjdFZhbHVlID0gdmFsdWUKICAgICAgdGhpcy5wcm9qZWN0TGFiZWwgPSB0aGlzLnByb2plY3RPcHRpb24uZmluZCgKICAgICAgICAoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gdmFsdWUKICAgICAgKS5sYWJlbAogICAgICB0aGlzLnByb2plY3RJZCA9IHRoaXMucHJvamVjdE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLnByb2plY3RJZAogICAgICB0aGlzLmdldEVudkxpc3QoKQogICAgfSwKICAgIC8vIOafpeeci+eOr+Wig+WIl+ihqAogICAgYXN5bmMgZ2V0RW52TGlzdCgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGVudnNMaXN0QnlQcm9qZWN0KHRoaXMucHJvamVjdElkKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwLnJlc3VsdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5lbnZPcHRpb24ucHVzaCh7CiAgICAgICAgICAgIHZhbHVlOiByZXNwLnJlc3VsdFtpXS5lbnYgKyAnPScgKyByZXNwLnJlc3VsdFtpXS5wcm90b2NvbCArIHJlc3AucmVzdWx0W2ldLmJhc2VfdXJsLAogICAgICAgICAgICBsYWJlbDogcmVzcC5yZXN1bHRbaV0ubmFtZQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmn6Xor6LmiJDlip/vvIEnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VFbnYodmFsdWUpIHsKICAgICAgdGhpcy5lbnZWYWx1ZSA9IHZhbHVlCiAgICAgIHRoaXMuZW52TGFiZWwgPSB0aGlzLmVudk9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLmxhYmVsCiAgICB9LAogICAgY2hhbmdlVHlwZSh2YWx1ZSkgewogICAgICB0aGlzLnR5cGVWYWx1ZSA9IHZhbHVlCiAgICAgIHRoaXMudHlwZUxhYmVsID0gdGhpcy50eXBlT3B0aW9uLmZpbmQoCiAgICAgICAgKGl0ZW0pID0+IGl0ZW0udmFsdWUgPT09IHZhbHVlCiAgICAgICkubGFiZWwKICAgIH0sCiAgICAvLyDot7PovazliLDnrKzlh6DpobUKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucmVxLnBhZ2UgPSB2YWwKICAgICAgdGhpcy5nZXRNb2R1bGVBcGlMaXN0KHRoaXMuY3VycmVudE1vZHVsZUlkKQogICAgfSwKICAgIGFzeW5jIGh0dHBSdW5uZXJBcGkoKSB7CiAgICAgIHRoaXMuYXBpUnVuRm9ybS5odHRwcnVubmVyX3Byb2plY3RfaWQgPSB0aGlzLnByb2plY3RWYWx1ZQogICAgICB0aGlzLmFwaVJ1bkZvcm0uZW52X3VybCA9IHRoaXMuZW52VmFsdWUKICAgICAgdGhpcy5hcGlSdW5Gb3JtLmFwaV9pZHMgPSB0aGlzLmlkcwogICAgICBjb25zdCByZXNwID0gYXdhaXQgaHR0cFJ1bm5lclJ1bkFwaSh0aGlzLmFwaVJ1bkZvcm0pCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aJp+ihjOaIkOWKn++8gScpCiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["httpRunnerRunApiDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"httpRunnerRunApiDialog.vue","sourceRoot":"src/components/HttpRunner","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"900px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-form\n      ref=\"ruleForm\"\n      :model=\"apiRunForm\"\n      label-width=\"120px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"HttpRunner项目\">\n        <el-select\n          v-model=\"projectValue\"\n          placeholder=\"请选择HttpRunner项目名称\"\n          style=\"width: 100%;\"\n          @change=\"changeProject\"\n        >\n          <el-option\n            v-for=\"item in projectOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"执行环境\">\n        <el-select\n          v-model=\"envValue\"\n          placeholder=\"请选择执行环境\"\n          style=\"width: 100%;\"\n          @change=\"changeEnv\"\n        >\n          <el-option\n            v-for=\"item in envOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"类型\">\n        <el-input v-model=\"apiRunForm.type\" :disabled=\"true\" />\n      </el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <div class=\"dialog-footer\">\n          <el-button @click=\"closeDialog()\">取消</el-button>\n          <el-button\n            type=\"primary\"\n            @click=\"httpRunnerApi\"\n          >执行</el-button>\n        </div>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport { httpRunnerProjectList, httpRunnerRunApi } from '@/api/httprunner'\nimport { envsListByProject } from '@/api/envs'\n\nexport default {\n  components: {},\n  props: {\n    ids: {\n      type: Array,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: 'HttpRunner接口执行',\n      dialogVisible: true,\n      projectValue: '',\n      projectLabel: '',\n      projectOption: [],\n      projectId: 0,\n      envValue: '',\n      envLabel: '',\n      envOption: [],\n      apiRunForm: {\n        httprunner_project_id: '',\n        type: 'API',\n        api_ids: [],\n        env_url: ''\n      },\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 10,\n      saveFlag: false\n    }\n  },\n  mounted() {\n    this.initHttpRunnerProjectList()\n    if (this.ids.length === 0) {\n      this.$message.error('请选择接口')\n    }\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    async initHttpRunnerProjectList() {\n      const resp = await httpRunnerProjectList(this.req)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.items.length; i++) {\n          this.projectOption.push({\n            value: resp.items[i].id,\n            label: resp.items[i].name,\n            projectId: resp.items[i].project_id\n          })\n        }\n        this.total = resp.total\n        // this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    changeProject(value) {\n      this.projectValue = value\n      this.projectLabel = this.projectOption.find(\n        (item) => item.value === value\n      ).label\n      this.projectId = this.projectOption.find(\n        (item) => item.value === value\n      ).projectId\n      this.getEnvList()\n    },\n    // 查看环境列表\n    async getEnvList() {\n      const resp = await envsListByProject(this.projectId)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.result.length; i++) {\n          this.envOption.push({\n            value: resp.result[i].env + '=' + resp.result[i].protocol + resp.result[i].base_url,\n            label: resp.result[i].name\n          })\n        }\n        // this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    changeEnv(value) {\n      this.envValue = value\n      this.envLabel = this.envOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    changeType(value) {\n      this.typeValue = value\n      this.typeLabel = this.typeOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      this.req.page = val\n      this.getModuleApiList(this.currentModuleId)\n    },\n    async httpRunnerApi() {\n      this.apiRunForm.httprunner_project_id = this.projectValue\n      this.apiRunForm.env_url = this.envValue\n      this.apiRunForm.api_ids = this.ids\n      const resp = await httpRunnerRunApi(this.apiRunForm)\n      if (resp.success === true) {\n        this.$message.success('执行成功！')\n        this.closeDialog()\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n</style>\n"]}]}