{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/demandListDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/demandListDialog.vue","mtime":1702434625769},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldERlbWFuZExpc3QgfSBmcm9tICdAL2FwaS9jYXNlcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGVtYW5kTGlzdCcsCiAgY29tcG9uZW50czogeyB9LAogIGZpbHRlcnM6IHsKICAgIHJlcXVpcmVtZW50c1R5cGUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAnYnVzaW5lc3MnKSB7CiAgICAgICAgcmV0dXJuICfkuJrliqHnsbvpnIDmsYInCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdpbXByb3ZlJykgewogICAgICAgIHJldHVybiAn5pS56L+b57G76ZyA5rGCJwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAndGVjaG5pY2FsJykgewogICAgICAgIHJldHVybiAn5oqA5pyv57G76ZyA5rGCJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAn5pyq55+l57G75Z6LJwogICAgICB9CiAgICB9CiAgfSwKICBwcm9wczoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dUaXRsZTogJ+mcgOaxguWIl+ihqCcsCiAgICAgIGRpYWxvZ1Zpc2libGU6IHRydWUsCiAgICAgIGRlbWFuZERhdGE6IFtdLAogICAgICBkZW1hbmRTZWFyY2hGcm9tOiB7CiAgICAgICAgJ25hbWUnOiAnJywKICAgICAgICAncHJvamVjdF9pZCc6IDAsCiAgICAgICAgJ3ZlcnNpb25fbnVtYmVyJzogJycsCiAgICAgICAgJ3JlcXVpcmVtZW50c190eXBlJzogJycsCiAgICAgICAgJ2NyZWF0ZV90aW1lJzogJycKICAgICAgfSwKICAgICAgcmVxOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBzaXplOiAxMAogICAgICB9LAogICAgICAvLyDliIbpobXpobXmlbAKICAgICAgdG90YWw6IDEwLAogICAgICBkcmF3ZXI6IGZhbHNlCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXREZW1hbmRMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCdjYW5jZWwnLCB7fSkKICAgIH0sCiAgICAvLyDojrflj5bpnIDmsYLliJfooagKICAgIGFzeW5jIGdldERlbWFuZExpc3QoKSB7CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBnZXREZW1hbmRMaXN0KHRoaXMucmVxLCBKU09OLnN0cmluZ2lmeSh0aGlzLmRlbWFuZFNlYXJjaEZyb20pKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AudG90YWwKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJlc3AuaXRlbXNbaV0uY3JlYXRlX3RpbWUgPSB0aGlzLiRtb21lbnQoCiAgICAgICAgICAgIHJlc3AuaXRlbXNbaV0uY3JlYXRlX3RpbWUKICAgICAgICAgICkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykKICAgICAgICB9CiAgICAgICAgdGhpcy5kZW1hbmREYXRhID0gcmVzcC5pdGVtcwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5p+l6K+i5oiQ5Yqf77yBJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LlpLHotKXvvIEnKQogICAgICB9CiAgICB9LAogICAgc2VsZWN0RGVtYW5kKHJvdykgewogICAgICBjb25zdCBkZW1hbmRJbmZvID0gewogICAgICAgIGlkOiByb3cuaWQsCiAgICAgICAgbmFtZTogcm93Lm5hbWUsCiAgICAgICAgcHJvamVjdF9uYW1lOiByb3cucHJvamVjdC5uYW1lLAogICAgICAgIHZlcnNpb25fbnVtYmVyOiByb3cudmVyc2lvbl9udW1iZXIsCiAgICAgICAgcmVxdWlyZW1lbnRzX3R5cGU6IHJvdy5yZXF1aXJlbWVudHNfdHlwZQogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoJ2dldERlbWFuZEluZm8nLCBkZW1hbmRJbmZvKQogICAgICB0aGlzLmNsb3NlRGlhbG9nKCkKICAgIH0sCiAgICAvLyDot7PovazliLDnrKzlh6DpobUKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKGDlvZPliY3pobU6ICR7dmFsfWApCiAgICAgIHRoaXMucmVxLnBhZ2UgPSB2YWwKICAgICAgdGhpcy5nZXREZW1hbmRMaXN0KCkKICAgIH0sCiAgICBjbGVhclNlYXJjaCgpIHsKICAgICAgdGhpcy5kZW1hbmRTZWFyY2hGcm9tLm5hbWUgPSAnJwogICAgICB0aGlzLmRlbWFuZFNlYXJjaEZyb20udmVyc2lvbl9udW1iZXIgPSAnJwogICAgICB0aGlzLmdldERlbWFuZExpc3QoKQogICAgfQogIH0KfQo="},{"version":3,"sources":["demandListDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"demandListDialog.vue","sourceRoot":"src/components/Cases","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"900px\"\n    :before-close=\"closeDialog\"\n    :append-to-body=\"true\"\n  >\n    <div class=\"filter-container\">\n      <el-row :gutter=\"24\">\n        <el-col :span=\"8\">\n          <div class=\"demo-input-suffix\">\n            需求名称:\n            <el-input v-model=\"demandSearchFrom.name\" size=\"mini\" placeholder=\"请输入需求名称\" style=\"width: 70%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n        <el-col :span=\"8\">\n          <div class=\"demo-input-suffix\">\n            版本号:\n            <el-input v-model=\"demandSearchFrom.version_number\" size=\"mini\" placeholder=\"请输入版本号\" style=\"width: 70%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n      </el-row>\n      <div style=\"text-align: right;margin-top: 10px;\">\n        <el-button class=\"filter-item\" size=\"mini\" icon=\"el-icon-delete\" @click=\"clearSearch()\">重置</el-button>\n        <el-button class=\"filter-item\" size=\"mini\" type=\"primary\" icon=\"el-icon-search\" @click=\"getAllApisList()\">搜索</el-button>\n      </div>\n    </div>\n    <el-table\n      :data=\"demandData\"\n      border\n      style=\"width: 100%;margin-top: 10px;\"\n      @cell-click=\"selectDemand\"\n    >\n      <el-table-column label=\"ID\" type=\"index\" width=\"80\" />\n      <el-table-column prop=\"name\" label=\"需求名称\" width=\"180\" />\n      <el-table-column prop=\"project.name\" label=\"项目\" idth=\"250\" />\n      <el-table-column prop=\"version_number\" label=\"版本号\" width=\"100\" />\n      <el-table-column prop=\"requirements_type\" label=\"需求类型\" width=\"100\">\n        <template slot-scope=\"{ row }\">\n          {{ row.requirements_type | requirementsType }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"create_time\" label=\"创建时间\" width=\"200\" />\n    </el-table>\n    <!--分页-->\n    <div style=\"width: 100%; text-align: right\">\n      <el-pagination\n        background\n        :total=\"total\"\n        :page-size=\"req.size\"\n        layout=\"total, prev, pager, next\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { getDemandList } from '@/api/cases'\n\nexport default {\n  name: 'DemandList',\n  components: { },\n  filters: {\n    requirementsType(value) {\n      if (value === 'business') {\n        return '业务类需求'\n      } else if (value === 'improve') {\n        return '改进类需求'\n      } else if (value === 'technical') {\n        return '技术类需求'\n      } else {\n        return '未知类型'\n      }\n    }\n  },\n  props: {},\n  data() {\n    return {\n      showTitle: '需求列表',\n      dialogVisible: true,\n      demandData: [],\n      demandSearchFrom: {\n        'name': '',\n        'project_id': 0,\n        'version_number': '',\n        'requirements_type': '',\n        'create_time': ''\n      },\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 10,\n      drawer: false\n    }\n  },\n  mounted() {\n    this.getDemandList()\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    // 获取需求列表\n    async getDemandList() {\n      const resp = await getDemandList(this.req, JSON.stringify(this.demandSearchFrom))\n      if (resp.success === true) {\n        this.total = resp.total\n        for (let i = 0; i < resp.items.length; i++) {\n          resp.items[i].create_time = this.$moment(\n            resp.items[i].create_time\n          ).format('YYYY-MM-DD HH:mm:ss')\n        }\n        this.demandData = resp.items\n        this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    selectDemand(row) {\n      const demandInfo = {\n        id: row.id,\n        name: row.name,\n        project_name: row.project.name,\n        version_number: row.version_number,\n        requirements_type: row.requirements_type\n      }\n      this.$emit('getDemandInfo', demandInfo)\n      this.closeDialog()\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`)\n      this.req.page = val\n      this.getDemandList()\n    },\n    clearSearch() {\n      this.demandSearchFrom.name = ''\n      this.demandSearchFrom.version_number = ''\n      this.getDemandList()\n    }\n  }\n}\n</script>\n"]}]}