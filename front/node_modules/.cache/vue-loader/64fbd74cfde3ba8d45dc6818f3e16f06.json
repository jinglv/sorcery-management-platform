{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/apiListDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/apiListDialog.vue","mtime":1702020607430},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEFsbEFwaXNMaXN0IH0gZnJvbSAnQC9hcGkvYXBpcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBpSW5mb0xpc3QnLAogIGNvbXBvbmVudHM6IHsgfSwKICBwcm9wczoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dUaXRsZTogJ+aOpeWPo+WIl+ihqCcsCiAgICAgIGRpYWxvZ1Zpc2libGU6IHRydWUsCiAgICAgIGFwaXNEYXRhOiBbXSwKICAgICAgYXBpU2VhcmNoRnJvbTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGFwaV9wYXRoOiAnJywKICAgICAgICBtZXRob2Q6ICcnCiAgICAgIH0sCiAgICAgIHJlcTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogMTAKICAgICAgfSwKICAgICAgLy8g5YiG6aG16aG15pWwCiAgICAgIHRvdGFsOiAxMCwKICAgICAgZHJhd2VyOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0QWxsQXBpc0xpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NhbmNlbCcsIHt9KQogICAgfSwKICAgIC8vIOiOt+WPluaooeWdl+S4i+eahOa1i+ivleeUqOS+i+WIl+ihqAogICAgYXN5bmMgZ2V0QWxsQXBpc0xpc3QoKSB7CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBnZXRBbGxBcGlzTGlzdCh0aGlzLnJlcSwgdGhpcy5hcGlTZWFyY2hGcm9tKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AudG90YWwKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3AuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJlc3AuaXRlbXNbaV0uY3JlYXRlX3RpbWUgPSB0aGlzLiRtb21lbnQoCiAgICAgICAgICAgIHJlc3AuaXRlbXNbaV0uY3JlYXRlX3RpbWUKICAgICAgICAgICkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykKICAgICAgICB9CiAgICAgICAgdGhpcy5hcGlzRGF0YSA9IHJlc3AuaXRlbXMKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+afpeivouaIkOWKn++8gScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIHNlbGVjdEFwaShyb3cpIHsKICAgICAgY29uc3QgYXBpRGF0YSA9IHsKICAgICAgICBpZDogcm93LmlkLAogICAgICAgIG5hbWU6IHJvdy5uYW1lCiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnZ2V0QXBpRGF0YScsIGFwaURhdGEpCiAgICAgIHRoaXMuY2xvc2VEaWFsb2coKQogICAgfSwKICAgIC8vIOi3s+i9rOWIsOesrOWHoOmhtQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2coYOW9k+WJjemhtTogJHt2YWx9YCkKICAgICAgdGhpcy5yZXEucGFnZSA9IHZhbAogICAgICB0aGlzLmdldEFsbEFwaXNMaXN0KCkKICAgIH0sCiAgICBjbGVhclNlYXJjaCgpIHsKICAgICAgdGhpcy5hcGlTZWFyY2hGcm9tLm5hbWUgPSAnJwogICAgICB0aGlzLmFwaVNlYXJjaEZyb20uYXBpX3BhdGggPSAnJwogICAgICB0aGlzLmFwaVNlYXJjaEZyb20ubWV0aG9kID0gJycKICAgICAgdGhpcy5nZXRBbGxBcGlzTGlzdCgpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["apiListDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"apiListDialog.vue","sourceRoot":"src/components/Cases","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"900px\"\n    :before-close=\"closeDialog\"\n    :append-to-body=\"true\"\n  >\n    <div class=\"filter-container\">\n      <el-row :gutter=\"24\">\n        <el-col :span=\"8\">\n          <div class=\"demo-input-suffix\">\n            接口名称:\n            <el-input v-model=\"apiSearchFrom.name\" size=\"mini\" placeholder=\"请输入接口名称\" style=\"width: 70%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n        <el-col :span=\"8\">\n          <div class=\"demo-input-suffix\">\n            接口地址:\n            <el-input v-model=\"apiSearchFrom.api_path\" size=\"mini\" placeholder=\"请输入接口地址\" style=\"width: 70%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n        <el-col :span=\"8\">\n          <div class=\"demo-input-suffix\">\n            请求方法:\n            <el-input v-model=\"apiSearchFrom.method\" size=\"mini\" placeholder=\"请输入请求方法\" style=\"width: 70%;margin-right: 5px;\" class=\"filter-item\" />\n          </div>\n        </el-col>\n      </el-row>\n      <div style=\"text-align: right;margin-top: 10px;\">\n        <el-button class=\"filter-item\" size=\"mini\" icon=\"el-icon-delete\" @click=\"clearSearch()\">重置</el-button>\n        <el-button class=\"filter-item\" size=\"mini\" type=\"primary\" icon=\"el-icon-search\" @click=\"getAllApisList()\">搜索</el-button>\n      </div>\n    </div>\n    <el-table\n      :data=\"apisData\"\n      border\n      style=\"width: 100%;margin-top: 10px;\"\n      @cell-click=\"selectApi\"\n    >\n      <el-table-column label=\"ID\" type=\"index\" width=\"80\" />\n      <el-table-column prop=\"name\" label=\"接口名称\" width=\"180\" />\n      <el-table-column prop=\"api_path\" label=\"接口地址\" idth=\"250\" />\n      <el-table-column prop=\"method\" label=\"请求方式\" width=\"100\" />\n      <el-table-column prop=\"module.name\" label=\"所属模块\" width=\"100\" />\n      <el-table-column prop=\"create_time\" label=\"创建时间\" width=\"200\" />\n    </el-table>\n    <!--分页-->\n    <div style=\"width: 100%; text-align: right\">\n      <el-pagination\n        background\n        :total=\"total\"\n        :page-size=\"req.size\"\n        layout=\"total, prev, pager, next\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { getAllApisList } from '@/api/apis'\n\nexport default {\n  name: 'ApiInfoList',\n  components: { },\n  props: {},\n  data() {\n    return {\n      showTitle: '接口列表',\n      dialogVisible: true,\n      apisData: [],\n      apiSearchFrom: {\n        name: '',\n        api_path: '',\n        method: ''\n      },\n      req: {\n        page: 1,\n        size: 10\n      },\n      // 分页页数\n      total: 10,\n      drawer: false\n    }\n  },\n  mounted() {\n    this.getAllApisList()\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    // 获取模块下的测试用例列表\n    async getAllApisList() {\n      const resp = await getAllApisList(this.req, this.apiSearchFrom)\n      if (resp.success === true) {\n        this.total = resp.total\n        for (let i = 0; i < resp.items.length; i++) {\n          resp.items[i].create_time = this.$moment(\n            resp.items[i].create_time\n          ).format('YYYY-MM-DD HH:mm:ss')\n        }\n        this.apisData = resp.items\n        this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    selectApi(row) {\n      const apiData = {\n        id: row.id,\n        name: row.name\n      }\n      this.$emit('getApiData', apiData)\n      this.closeDialog()\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`)\n      this.req.page = val\n      this.getAllApisList()\n    },\n    clearSearch() {\n      this.apiSearchFrom.name = ''\n      this.apiSearchFrom.api_path = ''\n      this.apiSearchFrom.method = ''\n      this.getAllApisList()\n    }\n  }\n}\n</script>\n"]}]}