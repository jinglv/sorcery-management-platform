{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/views/project/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/views/project/index.vue","mtime":1679468531856},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQcm9qZWN0RGlhbG9nIGZyb20gJ0AvY29tcG9uZW50cy9Qcm9qZWN0L3Byb2plY3REaWFsb2cudnVlJwppbXBvcnQgeyBwcm9qZWN0TGlzdCwgZGVsZXRlUHJvamVjdCB9IGZyb20gJ0AvYXBpL3Byb2plY3RzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQb3JqZWN0JywKICBjb21wb25lbnRzOiB7CiAgICBQcm9qZWN0RGlhbG9nCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nRmxhZzogZmFsc2UsCiAgICAgIGRpYWxvZ1RpdGxlOiAnY3JlYXRlJywKICAgICAgY3VycmVudFBvcmplY3RJZDogJycsCiAgICAgIHByb2plY3REYXRhOiBbXSwKICAgICAgcmVxOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBzaXplOiA2CiAgICAgIH0sCiAgICAgIC8vIOWIhumhtemhteaVsAogICAgICB0b3RhbDogMTAKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDnu4Tku7bliqDovb3nmoTml7blgJkg6L+b6KGM6LCD55SoCiAgICB0aGlzLmluaXRQcm9qZWN0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBpbml0UHJvamVjdExpc3QoKSB7CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBwcm9qZWN0TGlzdCh0aGlzLnJlcSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIC8vIOWkhOeQhuWKoOi9veeahOWbvueJh+i3r+W+hAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcmVzcC5pdGVtc1tpXS5pbWFnZSA9ICcvc3RhdGljL2ltYWdlcy8nICsgcmVzcC5pdGVtc1tpXS5pbWFnZQogICAgICAgIH0KICAgICAgICB0aGlzLnByb2plY3REYXRhID0gcmVzcC5pdGVtcwogICAgICAgIHRoaXMudG90YWwgPSByZXNwLnRvdGFsCiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmn6Xor6LmiJDlip/vvIEnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICAvLyDlsZXnpLrlrZDnu4Tku7YKICAgIHNob3dEaWFsb2coKSB7CiAgICAgIHRoaXMuY3VycmVudFBvcmplY3RJZCA9IDAKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICdjcmVhdGUnCiAgICAgIHRoaXMuZGlhbG9nRmxhZyA9IHRydWUKICAgIH0sCiAgICAvLyDlhbPpl63lrZDnu4Tku7bvvIzlrZDnu4Tku7bnmoRjbG9zZURpYWxvZ+Wbnuiwg+eItue7hOS7tgogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuZGlhbG9nRmxhZyA9IGZhbHNlCiAgICAgIHRoaXMuaW5pdFByb2plY3RMaXN0KCkKICAgIH0sCiAgICAvLyDot7PovazliLDnrKzlh6DpobUKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGDlvZPliY3pobU6ICR7dmFsfWApCiAgICAgIHRoaXMucmVxLnBhZ2UgPSB2YWwKICAgICAgdGhpcy5pbml0UHJvamVjdExpc3QoKQogICAgfSwKICAgIC8vIOWxleekuumhueebruivpuaDhQogICAgc2hvd0RldGFpbChpZCkgewogICAgICB0aGlzLmN1cnJlbnRQb3JqZWN0SWQgPSBpZAogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ2RldGFpbCcKICAgICAgdGhpcy5kaWFsb2dGbGFnID0gdHJ1ZQogICAgfSwKICAgIC8vIOe8lui+kemhueebrgogICAgc2hvd0VkaXQoaWQpIHsKICAgICAgdGhpcy5jdXJyZW50UG9yamVjdElkID0gaWQKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICdlZGl0JwogICAgICB0aGlzLmRpYWxvZ0ZsYWcgPSB0cnVlCiAgICB9LAogICAgLy8g5Yig6Zmk6aG555uuCiAgICBhc3luYyBkZWxldGVQcm9qZWN0KGlkKSB7CiAgICAgIGF3YWl0IGRlbGV0ZVByb2plY3QoaWQpLnRoZW4oKHJlc3ApID0+IHsKICAgICAgICB0aGlzLiRjb25maXJtKCfliKDpmaTku7vliqEsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICBjZW50ZXI6IHRydWUKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5pbml0UHJvamVjdExpc3QoKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1zZykKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgfSkKICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/project","sourcesContent":["<template>\n  <div class=\"project\" style=\"height: 1080px\">\n    <div style=\"height: 50px; text-align: left; width: 100%; margin-top: 20px;\">\n      <el-button type=\"primary\" @click=\"showDialog()\">创建</el-button>\n    </div>\n\n    <div style=\"height: 700px\">\n      <div\n        v-for=\"(item, index) in projectData\"\n        :key=\"index\"\n        class=\"text item\"\n      >\n        <el-col :span=\"7\" class=\"project-card\">\n          <el-card style=\"width: 350px;margin-top:20px\">\n            <div slot=\"header\" class=\"clearfix\">\n              <span>{{ item.name }}</span>\n              <div style=\"float: right\">\n                <el-dropdown>\n                  <span class=\"el-dropdown-link\">\n                    <i class=\"el-icon-setting\" />\n                  </span>\n                  <el-dropdown-menu slot=\"dropdown\">\n                    <el-dropdown-item>\n                      <el-button\n                        type=\"text\"\n                        @click=\"showDetail(item.id)\"\n                      >详情</el-button>\n                    </el-dropdown-item>\n                    <el-dropdown-item>\n                      <el-button\n                        type=\"text\"\n                        @click=\"showEdit(item.id)\"\n                      >编辑</el-button>\n                    </el-dropdown-item>\n                    <el-dropdown-item>\n                      <el-button\n                        type=\"text\"\n                        @click=\"deleteProject(item.id)\"\n                      >删除</el-button>\n                    </el-dropdown-item>\n                  </el-dropdown-menu>\n                </el-dropdown>\n              </div>\n            </div>\n            {{ item.address }}\n            <img\n              :src=\"item.image\"\n              class=\"image\"\n              style=\"height: 255px; width: 300px\"\n            >\n          </el-card>\n        </el-col>\n      </div>\n    </div>\n    <!--分页-->\n    <div style=\"width: 100%; text-align: right\">\n      <el-pagination\n        background\n        layout=\"prev, pager, next\"\n        :page-size=\"req.size\"\n        :total=\"total\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n    <!--引入子组件-->\n    <project-dialog\n      v-if=\"dialogFlag\"\n      :title=\"dialogTitle\"\n      :pid=\"currentPorjectId\"\n      @cancel=\"closeDialog\"\n    />\n  </div>\n</template>\n\n<script>\nimport ProjectDialog from '@/components/Project/projectDialog.vue'\nimport { projectList, deleteProject } from '@/api/projects'\n\nexport default {\n  name: 'Porject',\n  components: {\n    ProjectDialog\n  },\n  data() {\n    return {\n      dialogFlag: false,\n      dialogTitle: 'create',\n      currentPorjectId: '',\n      projectData: [],\n      req: {\n        page: 1,\n        size: 6\n      },\n      // 分页页数\n      total: 10\n    }\n  },\n  mounted() {\n    // 组件加载的时候 进行调用\n    this.initProjectList()\n  },\n  methods: {\n    async initProjectList() {\n      const resp = await projectList(this.req)\n      if (resp.success === true) {\n        // 处理加载的图片路径\n        for (let i = 0; i < resp.items.length; i++) {\n          resp.items[i].image = '/static/images/' + resp.items[i].image\n        }\n        this.projectData = resp.items\n        this.total = resp.total\n        // this.$message.success('查询成功！')\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 展示子组件\n    showDialog() {\n      this.currentPorjectId = 0\n      this.dialogTitle = 'create'\n      this.dialogFlag = true\n    },\n    // 关闭子组件，子组件的closeDialog回调父组件\n    closeDialog() {\n      this.dialogFlag = false\n      this.initProjectList()\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      // console.log(`当前页: ${val}`)\n      this.req.page = val\n      this.initProjectList()\n    },\n    // 展示项目详情\n    showDetail(id) {\n      this.currentPorjectId = id\n      this.dialogTitle = 'detail'\n      this.dialogFlag = true\n    },\n    // 编辑项目\n    showEdit(id) {\n      this.currentPorjectId = id\n      this.dialogTitle = 'edit'\n      this.dialogFlag = true\n    },\n    // 删除项目\n    async deleteProject(id) {\n      await deleteProject(id).then((resp) => {\n        this.$confirm('删除任务, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning',\n          center: true\n        }).then(() => {\n          if (resp.success === true) {\n            this.initProjectList()\n          } else {\n            this.$message.error(resp.error.msg)\n          }\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          })\n        })\n      })\n    }\n  }\n}\n</script>\n"]}]}