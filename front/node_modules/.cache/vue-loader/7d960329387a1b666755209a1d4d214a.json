{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/envDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/envDialog.vue","mtime":1685693281296},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVwZGF0ZUh0dHBSdW5uZXJQcm9qZWN0IH0gZnJvbSAnQC9hcGkvaHR0cHJ1bm5lcicKaW1wb3J0IEFjZUNvZGVFZGl0b3JEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0h0dHBSdW5uZXIvYWNlQ29kZUVkaXRvckRpYWxvZy52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0VudkRpYWxvZycsCiAgY29tcG9uZW50czogewogICAgQWNlQ29kZUVkaXRvckRpYWxvZwogIH0sCiAgcHJvcHM6IHsKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGhpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCiAgICBwaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxCiAgICB9LAogICAgaG5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgZGVzYzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBjb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGVjb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dUaXRsZTogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IHRydWUsCiAgICAgIGxhbmd1YWdlOiAncHl0aG9uJywKICAgICAgZW52X2NvZGVzOiAnJywKICAgICAgZW52X2NvZGU6ICcnLAogICAgICBzYXZlRmxhZzogZmFsc2UKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy50aXRsZSA9PT0gJ2VudicpIHsKICAgICAgdGhpcy5zaG93VGl0bGUgPSAn546v5aKD5Y+Y6YePJwogICAgfQogICAgdGhpcy5lbnZfY29kZXMgPSB0aGlzLmVjb2RlCiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FuY2VsJywge30pCiAgICB9LAogICAgZ2V0Q29kZShjb2RlKSB7CiAgICAgIHRoaXMuZW52X2NvZGUgPSBjb2RlCiAgICB9LAogICAgLy8g5pu05pawCiAgICBhc3luYyB1cGRhdGVJbmZvKCkgewogICAgICBjb25zdCByZXEgPSB7CiAgICAgICAgJ3Byb2plY3RfaWQnOiB0aGlzLnBpZCwKICAgICAgICAnZW52X2NvZGUnOiB0eXBlb2YgKHRoaXMuZW52X2NvZGUpID09PSAndW5kZWZpbmVkJyA/ICcnIDogdGhpcy5lbnZfY29kZSwKICAgICAgICAnbmFtZSc6IHRoaXMuaG5hbWUsCiAgICAgICAgJ2Rlc2NyaWJlJzogdGhpcy5kZXNjLAogICAgICAgICdjb2RlJzogdGhpcy5jb2RlCiAgICAgIH0KICAgICAgY29uc29sZS5pbmZvKCdyZXEnLCByZXEpCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB1cGRhdGVIdHRwUnVubmVyUHJvamVjdCh0aGlzLmhpZCwgcmVxKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKQogICAgICAgIHRoaXMuc2F2ZUZsYWcgPSB0cnVlCiAgICAgICAgLy8g5bu25pe25ZmoCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdjbG9zZScpCiAgICAgICAgfSwgNTAwKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/neWtmOWksei0pScpCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["envDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"envDialog.vue","sourceRoot":"src/components/HttpRunner","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"550px\"\n    :before-close=\"closeDialog\"\n  >\n    <div style=\"margin-top: 10px;\">\n      <ace-code-editor-dialog ref=\"ace\" :value=\"env_codes\" class=\"ace-editor\" :min-lines=\"25\" :mode-path=\"language\" @getCode=\"getCode\" />\n    </div>\n    <div class=\"dialog-footer\" align=\"right\">\n      <el-button @click=\"closeDialog()\">取消</el-button>\n      <el-button\n        type=\"primary\"\n        :disabled=\"saveFlag\"\n        @click=\"updateInfo()\"\n      >保存</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { updateHttpRunnerProject } from '@/api/httprunner'\nimport AceCodeEditorDialog from '@/components/HttpRunner/aceCodeEditorDialog.vue'\n\nexport default {\n  name: 'EnvDialog',\n  components: {\n    AceCodeEditorDialog\n  },\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    hid: {\n      type: Number,\n      default: 1\n    },\n    pid: {\n      type: Number,\n      default: 1\n    },\n    hname: {\n      type: String,\n      default: null\n    },\n    desc: {\n      type: String,\n      default: null\n    },\n    code: {\n      type: String,\n      default: null\n    },\n    ecode: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      language: 'python',\n      env_codes: '',\n      env_code: '',\n      saveFlag: false\n    }\n  },\n  mounted() {\n    if (this.title === 'env') {\n      this.showTitle = '环境变量'\n    }\n    this.env_codes = this.ecode\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    getCode(code) {\n      this.env_code = code\n    },\n    // 更新\n    async updateInfo() {\n      const req = {\n        'project_id': this.pid,\n        'env_code': typeof (this.env_code) === 'undefined' ? '' : this.env_code,\n        'name': this.hname,\n        'describe': this.desc,\n        'code': this.code\n      }\n      console.info('req', req)\n      const resp = await updateHttpRunnerProject(this.hid, req)\n      if (resp.success === true) {\n        this.closeDialog()\n        this.$message.success('保存成功')\n        this.saveFlag = true\n        // 延时器\n        setTimeout(() => {\n          this.$emit('close')\n        }, 500)\n      } else {\n        this.$message.error('保存失败')\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n  .el-row {\n    margin-bottom: 20px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n  .el-col {\n    border-radius: 4px;\n  }\n</style>\n"]}]}