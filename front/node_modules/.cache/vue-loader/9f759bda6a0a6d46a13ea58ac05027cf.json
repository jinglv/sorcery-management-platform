{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/views/infos/har/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/views/infos/har/index.vue","mtime":1685588117449},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVwbG9hZEZpbGUgfSBmcm9tICdAL2FwaS9jb21tb25zJwppbXBvcnQgeyBoYXJBcGlJbmZvLCBoYXJGaWxlTGlzdCB9IGZyb20gJ0AvYXBpL2luZm9zJwppbXBvcnQgaGFyQXBpSW5mb0RpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvSW5mb3MvaGFyQXBpSW5mb0RpYWxvZycKaW1wb3J0IEFwaUluZm9MaXN0RGlhbG9nIGZyb20gJ0AvY29tcG9uZW50cy9JbmZvcy9hcGlJbmZvTGlzdERpYWxvZy52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgaGFyQXBpSW5mb0RpYWxvZywKICAgIEFwaUluZm9MaXN0RGlhbG9nCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXBpRGF0YTogW10sCiAgICAgIGhhckZpbGVEYXRhOiBbXSwKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICBmaWxlTmFtZTogJycsCiAgICAgIGhhckluZm9GbGFnOiBmYWxzZSwKICAgICAgYXBpSW5mb0xpc3RGbGFnOiBmYWxzZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0VXBsb2FkKCkgewogICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKQogICAgfSwKICAgIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zb2xlLmxvZyhmaWxlLCBmaWxlTGlzdCkKICAgIH0sCiAgICBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSkKICAgIH0sCiAgICAvLyDkuIrkvKDmlofku7YKICAgIGFzeW5jIHVwbG9hZEZpbGUoZmlsZSkgewogICAgICBjb25zdCBmYiA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZiLmFwcGVuZCgnZmlsZScsIGZpbGUpCiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB1cGxvYWRGaWxlKGZiKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgLy8g6I635Y+W5paH5Lu25ZCNCiAgICAgICAgdGhpcy5maWxlTmFtZSA9IHJlc3AucmVzdWx0Lm5hbWUKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S4iuS8oOaIkOWKn++8gScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOWksei0pScsIHJlc3ApCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpCiAgICAgIH0KICAgIH0sCiAgICAvLyDopobnm5bpu5jorqTnmoTkuIrkvKDooYzkuLrvvIzlj6/ku6Xoh6rlrprkuYnkuIrkvKDnmoTlrp7njrDvvIzpgb/lhY3kvb/nlKjmoYbmnrboh6rliqjkuIrkvKDlip/og70KICAgIGh0dHBSZXF1ZXN0KCkge30sCiAgICBhc3luYyBoYXJGaWxlTGlzdCgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGhhckZpbGVMaXN0KCkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuaGFyRmlsZURhdGEgPSByZXNwLnJlc3VsdAogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5p+l6K+i5paH5Lu25oiQ5Yqf77yBJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZXJyb3IubWVzc2FnZSkKICAgICAgfQogICAgfSwKICAgIC8vIOafpeeci+aOpeWPo+S/oeaBrwogICAgc2hvd0FwaUluZm8ocm93KSB7CiAgICAgIHRoaXMuZmlsZU5hbWUgPSByb3cuZmlsZV9uYW1lCiAgICAgIHRoaXMuaGFySW5mb0ZsYWcgPSB0cnVlCiAgICB9LAogICAgc2hvd0FwaUluZm9MaXN0KHJvdykgewogICAgICB0aGlzLmZpbGVOYW1lID0gcm93LmZpbGVfbmFtZQogICAgICB0aGlzLmFwaUluZm9MaXN0RmxhZyA9IHRydWUKICAgIH0sCiAgICAvLyDlhbPpl63lvLnnqpcKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLmhhckluZm9GbGFnID0gZmFsc2UKICAgICAgdGhpcy5hcGlJbmZvTGlzdEZsYWcgPSBmYWxzZQogICAgfSwKICAgIGFzeW5jIGhhckFwaUluZm8oKSB7CiAgICAgIGNvbnN0IHJlcSA9IHsKICAgICAgICAnaGFyX2ZpbGUnOiB0aGlzLmZpbGVOYW1lCiAgICAgIH0KICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGhhckFwaUluZm8ocmVxKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5hcGlEYXRhID0gcmVzcC5yZXN1bHQKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ0hhcuaWh+S7tuino+aekOaIkOWKn++8gScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/infos/har","sourcesContent":["<template>\n  <div id=\"har-api\">\n    <div id=\"upload-file\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"2\">\n          <div class=\"grid-content\">\n            <span class=\"label-title\">上传Har文件:</span>\n          </div>\n        </el-col>\n        <el-col :span=\"4\">\n          <div class=\"grid-content\">\n            <el-upload\n              ref=\"upload\"\n              class=\"upload-demo\"\n              action=\"#\"\n              :limit=\"1\"\n              :on-preview=\"handlePreview\"\n              :on-remove=\"handleRemove\"\n              :file-list=\"fileList\"\n              :before-upload=\"uploadFile\"\n              :http-request=\"httpRequest\"\n              :auto-upload=\"false\"\n            >\n              <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\n              <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传到服务器</el-button>\n              <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:red\">只能上传后缀为.har的文件</div>\n            </el-upload>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n    <div id=\"api-file-list\" style=\"margin-top: 30px;\">\n      <el-button size=\"small\" type=\"primary\" @click=\"harFileList\">查看上传文件列表</el-button>\n      <el-table\n        :data=\"harFileData\"\n        border\n        stripe\n        style=\"width: 100%; margin-top: 10px;\"\n      >\n        <el-table-column\n          prop=\"file_name\"\n          label=\"Har文件名称\"\n        />\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"450\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              @click=\"showApiInfo(scope.row)\"\n            >查看文件接口解析信息</el-button>\n            <el-button\n              type=\"text\"\n              @click=\"showApiInfoList(scope.row)\"\n            >查看接口列表</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <!--引入子组件-->\n    <har-api-info-dialog v-if=\"harInfoFlag\" :fn=\"fileName\" @cancel=\"closeDialog\" />\n    <api-info-list-dialog v-if=\"apiInfoListFlag\" :fn=\"fileName\" @cancel=\"closeDialog\" />\n  </div>\n</template>\n<script>\nimport { uploadFile } from '@/api/commons'\nimport { harApiInfo, harFileList } from '@/api/infos'\nimport harApiInfoDialog from '@/components/Infos/harApiInfoDialog'\nimport ApiInfoListDialog from '@/components/Infos/apiInfoListDialog.vue'\n\nexport default {\n  components: {\n    harApiInfoDialog,\n    ApiInfoListDialog\n  },\n  data() {\n    return {\n      apiData: [],\n      harFileData: [],\n      fileList: [],\n      fileName: '',\n      harInfoFlag: false,\n      apiInfoListFlag: false\n    }\n  },\n  methods: {\n    submitUpload() {\n      this.$refs.upload.submit()\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList)\n    },\n    handlePreview(file) {\n      console.log(file)\n    },\n    // 上传文件\n    async uploadFile(file) {\n      const fb = new FormData()\n      fb.append('file', file)\n      const resp = await uploadFile(fb)\n      if (resp.success === true) {\n        // 获取文件名\n        this.fileName = resp.result.name\n        this.$message.success('上传成功！')\n      } else {\n        console.log('上传失败', resp)\n        this.$message.error(resp.error.message)\n      }\n    },\n    // 覆盖默认的上传行为，可以自定义上传的实现，避免使用框架自动上传功能\n    httpRequest() {},\n    async harFileList() {\n      const resp = await harFileList()\n      if (resp.success === true) {\n        this.harFileData = resp.result\n        this.$message.success('查询文件成功！')\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n    // 查看接口信息\n    showApiInfo(row) {\n      this.fileName = row.file_name\n      this.harInfoFlag = true\n    },\n    showApiInfoList(row) {\n      this.fileName = row.file_name\n      this.apiInfoListFlag = true\n    },\n    // 关闭弹窗\n    closeDialog() {\n      this.harInfoFlag = false\n      this.apiInfoListFlag = false\n    },\n    async harApiInfo() {\n      const req = {\n        'har_file': this.fileName\n      }\n      const resp = await harApiInfo(req)\n      if (resp.success === true) {\n        this.apiData = resp.result\n        this.$message.success('Har文件解析成功！')\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    }\n  }\n}\n</script>\n\n<style>\n  .el-row {\n    margin-bottom: 20px;\n  }\n  .el-col {\n    border-radius: 4px;\n  }\n  .bg-purple-light {\n    background: #e5e9f2;\n  }\n  .grid-content {\n    border-radius: 4px;\n    min-height: 36px;\n    line-height: 36px;\n  }\n  .row-bg {\n    padding: 10px 0;\n    background-color: #f9fafc;\n  }\n  .label-title {\n  font-family: \"Liberation Mono\", monospace, serif, sans-serif;\n  font-size: 16px;\n  line-height: 42px;\n}\n</style>\n"]}]}