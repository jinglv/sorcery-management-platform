{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/components/Api/apiDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/components/Api/apiDialog.vue","mtime":1702005184801},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBqc29uVmlld2VyIGZyb20gJ3Z1ZS1qc29uLXZpZXdlcicKaW1wb3J0IHsgZGVidWdBcGksIGdldEFwaURldGFpbCwgYXNzZXJ0QXBpLCBjcmVhdGVBcGksIGNoZWNrRXh0cmFjdCwgdXBkYXRlQXBpIH0gZnJvbSAnQC9hcGkvYXBpcycKaW1wb3J0IHsgZW52c0xpc3RCeVByb2plY3QsIGdldEVudnNJbmZvIH0gZnJvbSAnQC9hcGkvZW52cycKaW1wb3J0IGRpY3REaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0FwaS9kaWN0RGlhbG9nJwppbXBvcnQgYWNlQ29kZUVkaXRvckRpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvSHR0cFJ1bm5lci9hY2VDb2RlRWRpdG9yRGlhbG9nJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwaURpYWxvZycsCiAgY29tcG9uZW50czogewogICAganNvblZpZXdlciwKICAgIGRpY3REaWFsb2csCiAgICBhY2VDb2RlRWRpdG9yRGlhbG9nCiAgfSwKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgbWlkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIHBpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCiAgICBjaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWV0aG9kT3B0aW9uOiBbCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdnZXQnLAogICAgICAgICAgbGFiZWw6ICdHRVQnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ3Bvc3QnLAogICAgICAgICAgbGFiZWw6ICdQT1NUJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdwdXQnLAogICAgICAgICAgbGFiZWw6ICdQVVQnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2RlbGV0ZScsCiAgICAgICAgICBsYWJlbDogJ0RFTEVURScKICAgICAgICB9CiAgICAgIF0sCiAgICAgIGVudkxhYmVsOiAnJywKICAgICAgZXZuVmFsdWU6ICcnLAogICAgICBlbnZzT3B0aW9uOiBbXSwKICAgICAgcmVxdWVzdF9wYXRoOiAnJywKICAgICAgYWN0aXZlTmFtZTogJ2ZpcnN0JywKICAgICAgcGFyYW1zVHlwZTogMSwKICAgICAganNvbjoge30sCiAgICAgIHJlc3BvbnNlOiAnJywKICAgICAgYXNzZXJ0VHlwZTogJ2luY2x1ZGUnLAogICAgICBhcGlGb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgbW9kdWxlX2lkOiAwLAogICAgICAgIGFwaV9wYXRoOiAnJywKICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgIGhlYWRlcjogW10sCiAgICAgICAgcGFyYW1zX3R5cGU6ICdwYXJhbXMnLAogICAgICAgIHBhcmFtc19ib2R5OiAnJywKICAgICAgICByZXNwb25zZTogJycsCiAgICAgICAgYXNzZXJ0X2xpc3Q6IFtdLAogICAgICAgIGV4dHJhY3RfbGlzdDogW10sCiAgICAgICAgZXh0cmFjdF9yZXN1bHRfbGlzdDogW10KICAgICAgfSwKICAgICAgcGFyYW1zOiBbXSwKICAgICAgc2F2ZUZsYWc6IGZhbHNlLAogICAgICBleHRyYWN0TGlzdDogW10sCiAgICAgIGV4dHJhY3RSZXN1bHRMaXN0OiBbXSwKICAgICAgYXNzZXJ0TGlzdDogW10sCiAgICAgIGFzc2VydEZvcm06IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBhc3NlcnRfdHlwZTogJycsCiAgICAgICAgYXNzZXJ0X2V4dHJhY3Q6ICcnLAogICAgICAgIGV4cGVjdF90ZXh0OiAnJwogICAgICB9LAogICAgICBhc3NlcnRMYWJlbDogJycsCiAgICAgIGFzc2VydE9wdGlvbjogWwogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnY29udGFpbnMnLAogICAgICAgICAgbGFiZWw6ICdDT05UQUlOUycKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnZXF1YWwnLAogICAgICAgICAgbGFiZWw6ICdFUVVBTCcKICAgICAgICB9CiAgICAgIF0sCiAgICAgIHRpbWVMaW5lSGVpZ2h0OiAnJywKICAgICAgaGVhZGVyRGF0YTogW3sKICAgICAgICBuYW1lOiAnJywKICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgLy8g5piv5ZCm5pi+56S65paw5aKe5oyJ6ZKuCiAgICAgICAgc2hvdzogJ3RydWUnCiAgICAgIH1dLAogICAgICBwYXJhbURhdGE6IFt7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIC8vIOaYr+WQpuaYvuekuuaWsOWinuaMiemSrgogICAgICAgIHNob3c6ICd0cnVlJwogICAgICB9XSwKICAgICAgYm9keUZsYWc6IGZhbHNlLAogICAgICBwYXJhbUZsYWc6IHRydWUsCiAgICAgIGxhbmd1YWdlOiAnanNvbicsCiAgICAgIGpzb25fYm9keTogJycKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zb2xlLmluZm8oJ3RpdGxlOicsIHRoaXMudGl0bGUpCiAgICAvLyDnqpflj6Pmu5HliqgKICAgIHRoaXMudGltZUxpbmVIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC0gMTUwCiAgICB3aW5kb3cub25yZXNpemUgPSAoKSA9PiB7IHRoaXMudGltZUxpbmVIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC0gMTUwIH0KICAgIC8vIOWIneWni+WMluaVsOaNrgogICAgdGhpcy5hcGlGb3JtLm1vZHVsZV9pZCA9IHRoaXMubWlkCiAgICBpZiAodGhpcy5jaWQgIT09IDApIHsKICAgICAgLy8g6LCD55So5o6l5Y+j6I635Y+W5pWw5o2uCiAgICAgIHRoaXMuZ2V0QXBpSW5mbygpCiAgICB9CiAgICB0aGlzLmdldEVudnNMaXN0KHRoaXMucGlkKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5LiA5p2h55So5L6L5L+h5oGvCiAgICBhc3luYyBnZXRBcGlJbmZvKCkgewogICAgICBjb25zdCByZXNwID0gYXdhaXQgZ2V0QXBpRGV0YWlsKHRoaXMuY2lkKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgLy8g5o6l5Y+j6I635Y+W5pWw5o2uCiAgICAgICAgdGhpcy5hcGlGb3JtID0gcmVzcC5yZXN1bHQKICAgICAgICBjb25zdCBoZWFkZXIgPSByZXNwLnJlc3VsdC5oZWFkZXIucmVwbGFjZSgvJy9nLCAnIicpCiAgICAgICAgY29uc3QgcGFyYW1zX2JvZHkgPSByZXNwLnJlc3VsdC5wYXJhbXNfYm9keS5yZXBsYWNlKC8nL2csICciJykKICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlc3AucmVzdWx0LnJlc3BvbnNlLnJlcGxhY2UoLycvZywgJyInKQogICAgICAgIC8vIOWwhuiOt+WPluWIsOeahOaVsOaNrui1i+WAvOe7meihqOWNleaVsOaNrgogICAgICAgIHRoaXMuYXBpRm9ybS5oZWFkZXIgPSBKU09OLnBhcnNlKGhlYWRlcikKICAgICAgICB0aGlzLmhlYWRlckRhdGEgPSByZXNwLnJlc3VsdC5oZWFkZXIKICAgICAgICAvLyDojrflj5blpLTkv6Hmga/lkI7vvIzmt7vliqDvvIzmmK/lkKblj6/lsZXnpLrkv6Hmga8KICAgICAgICB0aGlzLmhlYWRlckRhdGFbdGhpcy5oZWFkZXJEYXRhLmxlbmd0aCAtIDFdWydzaG93J10gPSAndHJ1ZScKICAgICAgICBpZiAocmVzcC5yZXN1bHQucGFyYW1zX3R5cGUgPT09ICdqc29uJykgewogICAgICAgICAgdGhpcy5hcGlGb3JtLnBhcmFtc19ib2R5ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShwYXJhbXNfYm9keSksIG51bGwsIDIpCiAgICAgICAgICB0aGlzLmJvZHlGbGFnID0gdHJ1ZQogICAgICAgICAgdGhpcy5wYXJhbUZsYWcgPSBmYWxzZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBhcmFtcyA9IEpTT04ucGFyc2UocGFyYW1zX2JvZHkpCiAgICAgICAgICB0aGlzLmFwaUZvcm0ucGFyYW1zX2JvZHkgPSAnJwogICAgICAgICAgdGhpcy5wYXJhbURhdGEgPSBKU09OLnBhcnNlKHBhcmFtc19ib2R5KQogICAgICAgICAgdGhpcy5wYXJhbURhdGFbdGhpcy5wYXJhbURhdGEubGVuZ3RoIC0gMV1bJ3Nob3cnXSA9ICd0cnVlJwogICAgICAgICAgdGhpcy5ib2R5RmxhZyA9IGZhbHNlCiAgICAgICAgICB0aGlzLnBhcmFtRmxhZyA9IHRydWUKICAgICAgICB9CiAgICAgICAgdGhpcy5hcGlGb3JtLnJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSkKICAgICAgICB0aGlzLmV4dHJhY3RMaXN0ID0gcmVzcC5yZXN1bHQuZXh0cmFjdF9saXN0CiAgICAgICAgdGhpcy5hc3NlcnRMaXN0ID0gcmVzcC5yZXN1bHQuYXNzZXJ0X2xpc3QKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZXJyb3IubWVzc2FnZSkKICAgICAgfQogICAgfSwKICAgIGdldElucHV0SnNvbkJvZHkodmFsdWUpIHsKICAgICAgdGhpcy5qc29uX2JvZHkgPSB2YWx1ZQogICAgfSwKICAgIC8vIOWPkemAgeivt+axggogICAgYXN5bmMgc2VuZENsaWNrKCkgewogICAgICAvLyDor7fmsYLlpLTlj4LmlbDovazmjaIKICAgICAgY29uc3QgcmVxX2hlYWRlciA9IFtdCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5oZWFkZXJEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgaGVhZCA9IHsKICAgICAgICAgIG5hbWU6IHRoaXMuaGVhZGVyRGF0YVtpXS5uYW1lLAogICAgICAgICAgdmFsdWU6IHRoaXMuaGVhZGVyRGF0YVtpXS52YWx1ZQogICAgICAgIH0KICAgICAgICByZXFfaGVhZGVyLnB1c2goaGVhZCkKICAgICAgfQogICAgICAvLyDlhaXlj4Lov5vooYzovazmjaIKICAgICAgY29uc3QgcmVxID0gewogICAgICAgIG1ldGhvZDogdGhpcy5hcGlGb3JtLm1ldGhvZCwKICAgICAgICB1cmw6IHRoaXMucmVxdWVzdF9wYXRoICsgdGhpcy5hcGlGb3JtLmFwaV9wYXRoLAogICAgICAgIGhlYWRlcjogcmVxX2hlYWRlciwKICAgICAgICBwYXJhbXNfdHlwZTogdGhpcy5hcGlGb3JtLnBhcmFtc190eXBlLAogICAgICAgIHBhcmFtc19ib2R5OiB0aGlzLmFwaUZvcm0ucGFyYW1zX3R5cGUgPT09ICdwYXJhbXMnID8gSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJhbURhdGEpIDogdGhpcy5qc29uX2JvZHkKICAgICAgfQogICAgICBjb25zdCByZXNwID0gYXdhaXQgZGVidWdBcGkocmVxKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgaWYgKHJlc3AucmVzdWx0LnJlc3BvbnNlID09PSAnTWV0aG9kIG5vdCBhbGxvd2VkJykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5o6l5Y+j6K+35rGC5pa55rOV6ZSZ6K+v77yBJykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5hcGlGb3JtLnJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwLnJlc3VsdC5yZXNwb25zZSkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHJlc3AuZXJyb3IuY29kZSA9PT0gJzEwMDQ0JykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKHJlc3ApCiAgICAgIH0KICAgIH0sCiAgICAvLyDmjqXlj6Pmlq3oqIAKICAgIGFzeW5jIGFzc2VydENsaWNrKGl0ZW0pIHsKICAgICAgY29uc3QgcmVxID0gewogICAgICAgIHJlc3BvbnNlOiB0aGlzLmFwaUZvcm0ucmVzcG9uc2UsCiAgICAgICAgYXNzZXJ0X3R5cGU6IGl0ZW0uYXNzZXJ0X3R5cGUsCiAgICAgICAgYXNzZXJ0X2V4dHJhY3Q6IGl0ZW0uYXNzZXJ0X2V4dHJhY3QsCiAgICAgICAgZXhwZWN0X3RleHQ6IGl0ZW0uZXhwZWN0X3RleHQKICAgICAgfQogICAgICBjb25zdCByZXNwID0gYXdhaXQgYXNzZXJ0QXBpKHJlcSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pat6KiA5oiQ5YqfJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlq3oqIDlpLHotKUnKQogICAgICB9CiAgICB9LAogICAgLy8g5L+d5a2Y55So5L6LCiAgICBhc3luYyBzYXZlVGVzdENhc2UoKSB7CiAgICAgIC8vIOivt+axguWktOWPguaVsOi9rOaNogogICAgICBjb25zdCByZXFfaGVhZGVyID0gdGhpcy5kaWN0SGVhZGVyRGF0YSgpCiAgICAgIGNvbnN0IHJlcV9wYXJhbXMgPSB0aGlzLmRpY3RQYXJhbXNEYXRhKCkKICAgICAgaWYgKHRoaXMuYXBpRm9ybS5wYXJhbXNfdHlwZSAhPT0gJ2pzb24nKSB7CiAgICAgICAgdGhpcy5hcGlGb3JtLnBhcmFtc19ib2R5ID0gcmVxX3BhcmFtcwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXBpRm9ybS5wYXJhbXNfYm9keSA9IHRoaXMuanNvbl9ib2R5CiAgICAgIH0KICAgICAgdGhpcy5hcGlGb3JtLmFzc2VydF9saXN0ID0gdGhpcy5hc3NlcnRMaXN0CiAgICAgIHRoaXMuYXBpRm9ybS5leHRyYWN0X2xpc3QgPSB0aGlzLmV4dHJhY3RMaXN0CiAgICAgIHRoaXMuYXBpRm9ybS5leHRyYWN0X3Jlc3VsdF9saXN0ID0gdGhpcy5leHRyYWN0UmVzdWx0TGlzdAogICAgICB0aGlzLmFwaUZvcm0uaGVhZGVyID0gcmVxX2hlYWRlcgogICAgICB0aGlzLmFwaUZvcm0ucmVzcG9uc2UgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmFwaUZvcm0ucmVzcG9uc2UpCiAgICAgIGNvbnNvbGUuaW5mbygncmVxOicsIHRoaXMuYXBpRm9ybSkKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGNyZWF0ZUFwaSh0aGlzLmFwaUZvcm0pCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/neWtmOaIkOWKnycpCiAgICAgICAgdGhpcy5zYXZlRmxhZyA9IHRydWUKICAgICAgICAvLyDlu7bml7blmagKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJykKICAgICAgICAgIHRoaXMuJGVtaXQoJ3JlZnJlc2gnKQogICAgICAgIH0sIDUwMCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkv53lrZjlpLHotKUnKQogICAgICB9CiAgICB9LAogICAgLy8g5pu05paw55So5L6LCiAgICBhc3luYyB1cGRhdGVUZXN0Q2FzZSgpIHsKICAgICAgLy8g6K+35rGC5aS05Y+C5pWw6L2s5o2iCiAgICAgIGNvbnN0IHJlcV9oZWFkZXIgPSB0aGlzLmRpY3RIZWFkZXJEYXRhKCkKICAgICAgY29uc3QgcmVxX3BhcmFtcyA9IHRoaXMuZGljdFBhcmFtc0RhdGEoKQogICAgICBpZiAodGhpcy5hcGlGb3JtLnBhcmFtc190eXBlICE9PSAnanNvbicpIHsKICAgICAgICB0aGlzLmFwaUZvcm0ucGFyYW1zX2JvZHkgPSByZXFfcGFyYW1zCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hcGlGb3JtLnBhcmFtc19ib2R5ID0gdGhpcy5qc29uX2JvZHkKICAgICAgfQogICAgICB0aGlzLmFwaUZvcm0uYXNzZXJ0X2xpc3QgPSB0aGlzLmFzc2VydExpc3QKICAgICAgdGhpcy5hcGlGb3JtLmV4dHJhY3RfbGlzdCA9IHRoaXMuZXh0cmFjdExpc3QKICAgICAgdGhpcy5hcGlGb3JtLmV4dHJhY3RfcmVzdWx0X2xpc3QgPSB0aGlzLmV4dHJhY3RSZXN1bHRMaXN0CiAgICAgIHRoaXMuYXBpRm9ybS5oZWFkZXIgPSByZXFfaGVhZGVyCiAgICAgIHRoaXMuYXBpRm9ybS5yZXNwb25zZSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuYXBpRm9ybS5yZXNwb25zZSkKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHVwZGF0ZUFwaSh0aGlzLmNpZCwgdGhpcy5hcGlGb3JtKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDmiJDlip8nKQogICAgICAgIHRoaXMuc2F2ZUZsYWcgPSB0cnVlCiAgICAgICAgLy8g5bu25pe25ZmoCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdjbG9zZScpCiAgICAgICAgICB0aGlzLiRlbWl0KCdyZWZyZXNoJykKICAgICAgICB9LCA1MDApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pu05paw5aSx6LSlJykKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOaPkOWPluinhOWImQogICAgYWRkRXh0cmFjdCgpIHsKICAgICAgdGhpcy5leHRyYWN0TGlzdC5wdXNoKHsgbmFtZTogJycsIHZhbHVlOiAnJyB9KQogICAgfSwKICAgIC8vIOWIoOmZpOaPkOWPluinhOWImQogICAgcmVtb3ZlRXh0cmFjdChpbmRleCkgewogICAgICB0aGlzLmV4dHJhY3RMaXN0LnNwbGljZShpbmRleCwgMSkKICAgIH0sCiAgICBjaGFuZ2VBc3NlcnQodmFsdWUpIHsKICAgICAgdGhpcy5hc3NlcnRfdHlwZSA9IHZhbHVlCiAgICAgIHRoaXMuYXNzZXJ0TGFiZWwgPSB0aGlzLmFzc2VydE9wdGlvbi5maW5kKAogICAgICAgIChpdGVtKSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZQogICAgICApLmxhYmVsCiAgICB9LAogICAgLy8g5re75Yqg5o+Q5Y+W6KeE5YiZCiAgICBhZGRBc3NlcnQoKSB7CiAgICAgIHRoaXMuYXNzZXJ0TGlzdC5wdXNoKHsgbmFtZTogJycsIGFzc2VydF90eXBlOiAnJywgYXNzZXJ0X2V4dHJhY3Q6ICcnLCBleHBlY3RfdGV4dDogJycgfSkKICAgIH0sCiAgICAvLyDliKDpmaTmj5Dlj5bop4TliJkKICAgIHJlbW92ZUFzc2VydChpbmRleCkgewogICAgICB0aGlzLmFzc2VydExpc3Quc3BsaWNlKGluZGV4LCAxKQogICAgfSwKICAgIC8vIOagoemqjOaPkOWPluinhOWImQogICAgYXN5bmMgY2hlY2tFeHRyYWN0KCkgewogICAgICBpZiAodGhpcy5leHRyYWN0TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fmt7vliqDmj5Dlj5blmagnKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGNvbnN0IHJlcSA9IHsKICAgICAgICByZXNwb25zZTogdGhpcy5hcGlGb3JtLnJlc3BvbnNlLAogICAgICAgIGV4dHJhY3RMaXN0OiB0aGlzLmV4dHJhY3RMaXN0CiAgICAgIH0KICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGNoZWNrRXh0cmFjdChyZXEpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmV4dHJhY3RSZXN1bHRMaXN0ID0gcmVzcC5yZXN1bHQKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aPkOWPluWZqOagoemqjOaIkOWKnycpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLmVycm9yLm1lc3NhZ2UpCiAgICAgIH0KICAgIH0sCiAgICAvLyDlhbPpl60KICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCdjbG9zZScpCiAgICB9LAogICAgLy8g5qC55o2ucGlk6I635Y+W546v5aKD5Y+Y6YePCiAgICBhc3luYyBnZXRFbnZzTGlzdCgpIHsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGVudnNMaXN0QnlQcm9qZWN0KHRoaXMucGlkKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNwLnJlc3VsdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5lbnZzT3B0aW9uLnB1c2goewogICAgICAgICAgICB2YWx1ZTogcmVzcC5yZXN1bHRbaV0uaWQsCiAgICAgICAgICAgIGxhYmVsOiByZXNwLnJlc3VsdFtpXS5uYW1lCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICAvLyB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuafpeivouaIkOWKn++8gSIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5p+l6K+i546v5aKD5aSx6LSl77yBJykKICAgICAgfQogICAgfSwKICAgIC8vIOiOt+WPlumAieS4reeahOeOr+Wig+eahGJhc2VfdXJsCiAgICBhc3luYyBjaGFuZ2VFbnZzKHZhbHVlKSB7CiAgICAgIHRoaXMuZXZuVmFsdWUgPSB2YWx1ZQogICAgICB0aGlzLmVudkxhYmVsID0gdGhpcy5lbnZzT3B0aW9uLmZpbmQoCiAgICAgICAgKGl0ZW0pID0+IGl0ZW0udmFsdWUgPT09IHZhbHVlCiAgICAgICkubGFiZWwKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGdldEVudnNJbmZvKHZhbHVlKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgY29uc3QgcmVzID0gcmVzcC5yZXN1bHQKICAgICAgICB0aGlzLnJlcXVlc3RfcGF0aCA9IHJlcy5wcm90b2NvbCArIHJlcy5iYXNlX3VybAogICAgICAgIGNvbnNvbGUuaW5mbygndXJsOicsIHRoaXMucmVxdWVzdF9wYXRoKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivoueOr+Wig+S/oeaBr+Wksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VKc29uUmFkaW8oKSB7CiAgICAgIHRoaXMuYm9keUZsYWcgPSB0cnVlCiAgICAgIHRoaXMucGFyYW1GbGFnID0gZmFsc2UKICAgIH0sCiAgICBjaGFuZ2VSYWRpbygpIHsKICAgICAgdGhpcy5ib2R5RmxhZyA9IGZhbHNlCiAgICAgIHRoaXMucGFyYW1GbGFnID0gdHJ1ZQogICAgfSwKICAgIGRpY3RIZWFkZXJEYXRhKCkgewogICAgICBjb25zdCByZXFfaGVhZGVyID0gW10KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmhlYWRlckRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBoZWFkID0gewogICAgICAgICAgbmFtZTogdGhpcy5oZWFkZXJEYXRhW2ldLm5hbWUsCiAgICAgICAgICB2YWx1ZTogdGhpcy5oZWFkZXJEYXRhW2ldLnZhbHVlCiAgICAgICAgfQogICAgICAgIHJlcV9oZWFkZXIucHVzaChoZWFkKQogICAgICB9CiAgICAgIHJldHVybiByZXFfaGVhZGVyCiAgICB9LAogICAgZGljdFBhcmFtc0RhdGEoKSB7CiAgICAgIGNvbnN0IHJlcV9wYXJhbXMgPSBbXQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1EYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICBuYW1lOiB0aGlzLnBhcmFtRGF0YVtpXS5uYW1lLAogICAgICAgICAgdmFsdWU6IHRoaXMucGFyYW1EYXRhW2ldLnZhbHVlCiAgICAgICAgfQogICAgICAgIHJlcV9wYXJhbXMucHVzaChwYXJhbSkKICAgICAgfQogICAgICByZXR1cm4gcmVxX3BhcmFtcwogICAgfQogIH0KfQo="},{"version":3,"sources":["apiDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"apiDialog.vue","sourceRoot":"src/components/Api","sourcesContent":["<template>\n  <div :style=\"{'max-height': timeLineHeight +'px'}\" style=\"margin-left: 10px; margin-right: 10px; overflow-y:scroll;\">\n    <div v-if=\"title == '接口详情'\" class=\"div-line\">\n      <el-form\n        :model=\"apiForm\"\n        label-width=\"100px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item label=\"接口名称：\" prop=\"name\">{{ apiForm.name }}</el-form-item>\n        <el-form-item label=\"接口地址：\" prop=\"api_path\">{{ apiForm.api_path }}</el-form-item>\n        <el-form-item label=\"请求方式：\" prop=\"method\">{{ apiForm.method }}</el-form-item>\n        <el-form-item label=\"请求头：\" prop=\"header\">\n          <el-table\n            :data=\"apiForm.header\"\n            border\n            style=\"width: 80%\"\n          >\n            <el-table-column\n              prop=\"name\"\n              label=\"Name\"\n              width=\"180\"\n            />\n            <el-table-column\n              prop=\"value\"\n              label=\"Value\"\n            />\n          </el-table>\n        </el-form-item>\n        <el-form-item label=\"请求参数：\" prop=\"params_type\">{{ apiForm.params_type }}</el-form-item>\n        <el-form-item v-if=\"apiForm.params_type=='params' || apiForm.params_type=='form-data'\" label=\"请求主体：\" prop=\"params_body\">\n          <el-table\n            :data=\"params\"\n            border\n            style=\"width: 80%\"\n          >\n            <el-table-column\n              prop=\"name\"\n              label=\"Name\"\n              width=\"180\"\n            />\n            <el-table-column\n              prop=\"value\"\n              label=\"Value\"\n            />\n          </el-table>\n        </el-form-item>\n        <el-form-item v-if=\"apiForm.params_type=='json'\" label=\"请求主体：\" prop=\"params_body\">\n          <json-viewer :value=\"apiForm.params_body\" :expand-depth=\"3\" />\n        </el-form-item>\n        <el-form-item label=\"响应主体：\" prop=\"response\">\n          <json-viewer :value=\"apiForm.response\" :expand-depth=\"3\" />\n        </el-form-item>\n        <el-form-item label=\"断言：\">\n          <el-table\n            :data=\"assertList\"\n            border\n            style=\"width: 80%\"\n          >\n            <el-table-column\n              prop=\"name\"\n              label=\"名称\"\n              width=\"120\"\n            />\n            <el-table-column\n              prop=\"assert_extract\"\n              label=\"断言表达式\"\n              width=\"120\"\n            />\n            <el-table-column\n              prop=\"assert_type\"\n              label=\"断言类型\"\n              width=\"120\"\n            />\n            <el-table-column\n              prop=\"expect_text\"\n              label=\"断言预期值\"\n            />\n          </el-table>\n        </el-form-item>\n        <el-form-item label=\"提取器：\">\n          <el-table\n            :data=\"extractList\"\n            border\n            style=\"width: 80%\"\n          >\n            <el-table-column\n              prop=\"name\"\n              label=\"名称\"\n              width=\"180\"\n            />\n            <el-table-column\n              prop=\"value\"\n              label=\"提取器表达式\"\n            />\n          </el-table>\n        </el-form-item>\n        <el-form-item style=\"text-align: right\">\n          <el-button @click=\"closeDialog()\">返回</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <div v-if=\"title != '接口详情'\">\n      <div class=\"div-line\" style=\"height: 50px\">\n        <el-select\n          v-model=\"apiForm.method\"\n          placeholder=\"方法\"\n          style=\"width: 10%; float: left\"\n        >\n          <el-option\n            v-for=\"item in methodOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n        <el-select\n          v-model=\"evnValue\"\n          placeholder=\"请选执行择环境\"\n          style=\"width: 15%; float: left\"\n          @change=\"changeEnvs\"\n        >\n          <el-option\n            v-for=\"item in envsOption\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          />\n        </el-select>\n        <el-input\n          v-model=\"apiForm.api_path\"\n          placeholder=\"API Path\"\n          style=\"width: 65%; float: left\"\n        />\n        <el-button\n          type=\"primary\"\n          style=\"float: left\"\n          @click=\"sendClick()\"\n        >发送</el-button>\n      </div>\n      <div class=\"div-line\" style=\"height: 260px; overflow-y: auto;\">\n        <span class=\"title-text\">Headers</span>\n        <dict-dialog :dict-data=\"headerData\" />\n      </div>\n      <span class=\"title-text\">Param/Body</span>\n      <div class=\"div-line\" style=\"margin-top: 10px;\">\n        <el-radio v-model=\"apiForm.params_type\" label=\"params\" @change=\"changeRadio\">Params</el-radio>\n        <el-radio v-model=\"apiForm.params_type\" label=\"form\" @change=\"changeRadio\">Form-data</el-radio>\n        <el-radio v-model=\"apiForm.params_type\" label=\"json\" @change=\"changeJsonRadio\">JSON</el-radio>\n      </div>\n      <div v-show=\"bodyFlag\" class=\"div-line\" style=\"height: 220px; overflow-y: auto;\">\n        <ace-code-editor-dialog ref=\"ace\" :value=\"apiForm.params_body\" class=\"ace-editor\" :min-lines=\"18\" :mode-path=\"language\" @getCode=\"getInputJsonBody\" />\n      </div>\n      <div v-show=\"paramFlag\" class=\"div-line\" style=\"height: 220px; overflow-y: auto;\">\n        <dict-dialog :dict-data=\"paramData\" />\n      </div>\n      <div class=\"div-line\" style=\"height: 220px; overflow-y: auto;\">\n        <el-tabs>\n          <el-tab-pane label=\"接口响应结果\">\n            <json-viewer :value=\"apiForm.response\" :expand-depth=\"3\" />\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n      <div class=\"div-line\" style=\"margin-top: 70px\">\n        <el-collapse>\n          <el-collapse-item title=\"断言\" name=\"1\">\n            <el-form :inline=\"true\" label-width=\"60px\">\n              <div v-for=\"(item, index) in assertList\" :key=\"index\">\n                <el-form-item>\n                  <el-col :span=\"4\">\n                    <el-input\n                      v-model=\"item.name\"\n                      placeholder=\"名称\"\n                      style=\"width: 200px\"\n                    />\n                  </el-col>\n                  <el-col :span=\"4\" style=\"margin-left: 70px;\">\n                    <el-input\n                      v-model=\"item.assert_extract\"\n                      placeholder=\"断言表达式\"\n                      style=\"width: 200px\"\n                    />\n                  </el-col>\n                  <el-col class=\"line\" :span=\"3\" style=\"margin-left: 70px;\">\n                    <el-select\n                      v-model=\"item.assert_type\"\n                      placeholder=\"断言类型\"\n                      @change=\"changeAssert\"\n                    >\n                      <el-option\n                        v-for=\"i in assertOption\"\n                        :key=\"i.value\"\n                        :label=\"i.label\"\n                        :value=\"i.value\"\n                      />\n                    </el-select>\n                  </el-col>\n                  <el-col :span=\"4\" style=\"margin-left: 10px;\">\n                    <el-input\n                      v-model=\"item.expect_text\"\n                      placeholder=\"断言预期值\"\n                      style=\"width: 100%\"\n                    />\n                  </el-col>\n                  <el-col class=\"line\" :span=\"3\">\n                    <el-button\n                      class=\"debug-button\"\n                      type=\"success\"\n                      plain\n                      size=\"small\"\n                      @click=\"assertClick(item)\"\n                    >断言</el-button>\n                  </el-col>\n                  <el-button\n                    type=\"text\"\n                    style=\"padding-right: 10px\"\n                    @click=\"removeAssert(index)\"\n                  >\n                    <i class=\"el-icon-remove-outline\" />\n                  </el-button>\n                </el-form-item>\n              </div>\n            </el-form>\n            <el-button\n              type=\"primary\"\n              size=\"mini\"\n              icon=\"el-icon-plus\"\n              plain\n              @click=\"addAssert()\"\n            >添加</el-button>\n          </el-collapse-item>\n        </el-collapse>\n        <el-collapse>\n          <el-collapse-item title=\"提取器\" name=\"2\">\n            <el-form label-width=\"60px\">\n              <div v-for=\"(item, index) in extractList\" :key=\"index\">\n                <el-form-item label=\"提取器\">\n                  <el-col :span=\"8\">\n                    <el-input\n                      v-model=\"item.name\"\n                      placeholder=\"变量名\"\n                      style=\"width: 200px\"\n                    />\n                  </el-col>\n                  <el-col class=\"line\" :span=\"2\">-</el-col>\n                  <el-col :span=\"8\">\n                    <el-input\n                      v-model=\"item.value\"\n                      placeholder=\"提取规则\"\n                      style=\"width: 100%\"\n                    />\n                  </el-col>\n                  <el-button\n                    type=\"text\"\n                    style=\"padding-right: 10px\"\n                    @click=\"removeExtract(index)\"\n                  >\n                    <i class=\"el-icon-remove-outline\" />\n                  </el-button>\n                </el-form-item>\n              </div>\n            </el-form>\n            <el-button\n              type=\"primary\"\n              size=\"mini\"\n              icon=\"el-icon-plus\"\n              plain\n              @click=\"addExtract()\"\n            >添加</el-button>\n            <el-button\n              type=\"success\"\n              size=\"mini\"\n              icon=\"el-icon-document-checked\"\n              plain\n              @click=\"checkExtract()\"\n            >检查</el-button>\n          </el-collapse-item>\n        </el-collapse>\n      </div>\n      <div style=\"height: 50px\">\n        <el-input\n          v-model=\"apiForm.name\"\n          placeholder=\"请输入用例名称\"\n          size=\"small\"\n          style=\"width: 60%; float: left\"\n        />\n        <el-button\n          v-if=\"title != '编辑接口'\"\n          type=\"primary\"\n          size=\"small\"\n          style=\"float: left\"\n          :disabled=\"saveFlag\"\n          @click=\"saveTestCase()\"\n        >保存</el-button>\n        <el-button\n          v-if=\"title == '编辑接口'\"\n          type=\"primary\"\n          size=\"small\"\n          style=\"float: left\"\n          :disabled=\"saveFlag\"\n          @click=\"updateTestCase()\"\n        >更新</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport jsonViewer from 'vue-json-viewer'\nimport { debugApi, getApiDetail, assertApi, createApi, checkExtract, updateApi } from '@/api/apis'\nimport { envsListByProject, getEnvsInfo } from '@/api/envs'\nimport dictDialog from '@/components/Api/dictDialog'\nimport aceCodeEditorDialog from '@/components/HttpRunner/aceCodeEditorDialog'\nexport default {\n  name: 'ApiDialog',\n  components: {\n    jsonViewer,\n    dictDialog,\n    aceCodeEditorDialog\n  },\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    mid: {\n      type: Number,\n      default: 1\n    },\n    pid: {\n      type: Number,\n      default: 1\n    },\n    cid: {\n      type: Number,\n      default: 1\n    }\n  },\n  data() {\n    return {\n      methodOption: [\n        {\n          value: 'get',\n          label: 'GET'\n        },\n        {\n          value: 'post',\n          label: 'POST'\n        },\n        {\n          value: 'put',\n          label: 'PUT'\n        },\n        {\n          value: 'delete',\n          label: 'DELETE'\n        }\n      ],\n      envLabel: '',\n      evnValue: '',\n      envsOption: [],\n      request_path: '',\n      activeName: 'first',\n      paramsType: 1,\n      json: {},\n      response: '',\n      assertType: 'include',\n      apiForm: {\n        name: '',\n        module_id: 0,\n        api_path: '',\n        method: 'get',\n        header: [],\n        params_type: 'params',\n        params_body: '',\n        response: '',\n        assert_list: [],\n        extract_list: [],\n        extract_result_list: []\n      },\n      params: [],\n      saveFlag: false,\n      extractList: [],\n      extractResultList: [],\n      assertList: [],\n      assertForm: {\n        name: '',\n        assert_type: '',\n        assert_extract: '',\n        expect_text: ''\n      },\n      assertLabel: '',\n      assertOption: [\n        {\n          value: 'contains',\n          label: 'CONTAINS'\n        },\n        {\n          value: 'equal',\n          label: 'EQUAL'\n        }\n      ],\n      timeLineHeight: '',\n      headerData: [{\n        name: '',\n        value: '',\n        // 是否显示新增按钮\n        show: 'true'\n      }],\n      paramData: [{\n        name: '',\n        value: '',\n        // 是否显示新增按钮\n        show: 'true'\n      }],\n      bodyFlag: false,\n      paramFlag: true,\n      language: 'json',\n      json_body: ''\n    }\n  },\n  mounted() {\n    console.info('title:', this.title)\n    // 窗口滑动\n    this.timeLineHeight = document.documentElement.clientHeight - 150\n    window.onresize = () => { this.timeLineHeight = document.documentElement.clientHeight - 150 }\n    // 初始化数据\n    this.apiForm.module_id = this.mid\n    if (this.cid !== 0) {\n      // 调用接口获取数据\n      this.getApiInfo()\n    }\n    this.getEnvsList(this.pid)\n  },\n  methods: {\n    // 获取一条用例信息\n    async getApiInfo() {\n      const resp = await getApiDetail(this.cid)\n      if (resp.success === true) {\n        // 接口获取数据\n        this.apiForm = resp.result\n        const header = resp.result.header.replace(/'/g, '\"')\n        const params_body = resp.result.params_body.replace(/'/g, '\"')\n        const response = resp.result.response.replace(/'/g, '\"')\n        // 将获取到的数据赋值给表单数据\n        this.apiForm.header = JSON.parse(header)\n        this.headerData = resp.result.header\n        // 获取头信息后，添加，是否可展示信息\n        this.headerData[this.headerData.length - 1]['show'] = 'true'\n        if (resp.result.params_type === 'json') {\n          this.apiForm.params_body = JSON.stringify(JSON.parse(params_body), null, 2)\n          this.bodyFlag = true\n          this.paramFlag = false\n        } else {\n          this.params = JSON.parse(params_body)\n          this.apiForm.params_body = ''\n          this.paramData = JSON.parse(params_body)\n          this.paramData[this.paramData.length - 1]['show'] = 'true'\n          this.bodyFlag = false\n          this.paramFlag = true\n        }\n        this.apiForm.response = JSON.parse(response)\n        this.extractList = resp.result.extract_list\n        this.assertList = resp.result.assert_list\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n    getInputJsonBody(value) {\n      this.json_body = value\n    },\n    // 发送请求\n    async sendClick() {\n      // 请求头参数转换\n      const req_header = []\n      for (var i = 0; i < this.headerData.length; i++) {\n        const head = {\n          name: this.headerData[i].name,\n          value: this.headerData[i].value\n        }\n        req_header.push(head)\n      }\n      // 入参进行转换\n      const req = {\n        method: this.apiForm.method,\n        url: this.request_path + this.apiForm.api_path,\n        header: req_header,\n        params_type: this.apiForm.params_type,\n        params_body: this.apiForm.params_type === 'params' ? JSON.stringify(this.paramData) : this.json_body\n      }\n      const resp = await debugApi(req)\n      if (resp.success === true) {\n        if (resp.result.response === 'Method not allowed') {\n          this.$message.error('接口请求方法错误！')\n        } else {\n          this.apiForm.response = JSON.parse(resp.result.response)\n        }\n      } else {\n        if (resp.error.code === '10044') {\n          this.$message.error(resp.error.message)\n        }\n        console.log(resp)\n      }\n    },\n    // 接口断言\n    async assertClick(item) {\n      const req = {\n        response: this.apiForm.response,\n        assert_type: item.assert_type,\n        assert_extract: item.assert_extract,\n        expect_text: item.expect_text\n      }\n      const resp = await assertApi(req)\n      if (resp.success === true) {\n        this.$message.success('断言成功')\n      } else {\n        this.$message.error('断言失败')\n      }\n    },\n    // 保存用例\n    async saveTestCase() {\n      // 请求头参数转换\n      const req_header = this.dictHeaderData()\n      const req_params = this.dictParamsData()\n      if (this.apiForm.params_type !== 'json') {\n        this.apiForm.params_body = req_params\n      } else {\n        this.apiForm.params_body = this.json_body\n      }\n      this.apiForm.assert_list = this.assertList\n      this.apiForm.extract_list = this.extractList\n      this.apiForm.extract_result_list = this.extractResultList\n      this.apiForm.header = req_header\n      this.apiForm.response = JSON.stringify(this.apiForm.response)\n      console.info('req:', this.apiForm)\n      const resp = await createApi(this.apiForm)\n      if (resp.success === true) {\n        this.$message.success('保存成功')\n        this.saveFlag = true\n        // 延时器\n        setTimeout(() => {\n          this.$emit('close')\n          this.$emit('refresh')\n        }, 500)\n      } else {\n        this.$message.error('保存失败')\n      }\n    },\n    // 更新用例\n    async updateTestCase() {\n      // 请求头参数转换\n      const req_header = this.dictHeaderData()\n      const req_params = this.dictParamsData()\n      if (this.apiForm.params_type !== 'json') {\n        this.apiForm.params_body = req_params\n      } else {\n        this.apiForm.params_body = this.json_body\n      }\n      this.apiForm.assert_list = this.assertList\n      this.apiForm.extract_list = this.extractList\n      this.apiForm.extract_result_list = this.extractResultList\n      this.apiForm.header = req_header\n      this.apiForm.response = JSON.stringify(this.apiForm.response)\n      const resp = await updateApi(this.cid, this.apiForm)\n      if (resp.success === true) {\n        this.$message.success('更新成功')\n        this.saveFlag = true\n        // 延时器\n        setTimeout(() => {\n          this.$emit('close')\n          this.$emit('refresh')\n        }, 500)\n      } else {\n        this.$message.error('更新失败')\n      }\n    },\n    // 添加提取规则\n    addExtract() {\n      this.extractList.push({ name: '', value: '' })\n    },\n    // 删除提取规则\n    removeExtract(index) {\n      this.extractList.splice(index, 1)\n    },\n    changeAssert(value) {\n      this.assert_type = value\n      this.assertLabel = this.assertOption.find(\n        (item) => item.value === value\n      ).label\n    },\n    // 添加提取规则\n    addAssert() {\n      this.assertList.push({ name: '', assert_type: '', assert_extract: '', expect_text: '' })\n    },\n    // 删除提取规则\n    removeAssert(index) {\n      this.assertList.splice(index, 1)\n    },\n    // 校验提取规则\n    async checkExtract() {\n      if (this.extractList.length === 0) {\n        this.$message.error('请添加提取器')\n        return\n      }\n      const req = {\n        response: this.apiForm.response,\n        extractList: this.extractList\n      }\n      const resp = await checkExtract(req)\n      if (resp.success === true) {\n        this.extractResultList = resp.result\n        this.$message.success('提取器校验成功')\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    },\n    // 关闭\n    closeDialog() {\n      this.$emit('close')\n    },\n    // 根据pid获取环境变量\n    async getEnvsList() {\n      const resp = await envsListByProject(this.pid)\n      if (resp.success === true) {\n        for (let i = 0; i < resp.result.length; i++) {\n          this.envsOption.push({\n            value: resp.result[i].id,\n            label: resp.result[i].name\n          })\n        }\n        // this.$message.success(\"查询成功！\")\n      } else {\n        this.$message.error('查询环境失败！')\n      }\n    },\n    // 获取选中的环境的base_url\n    async changeEnvs(value) {\n      this.evnValue = value\n      this.envLabel = this.envsOption.find(\n        (item) => item.value === value\n      ).label\n      const resp = await getEnvsInfo(value)\n      if (resp.success === true) {\n        const res = resp.result\n        this.request_path = res.protocol + res.base_url\n        console.info('url:', this.request_path)\n      } else {\n        this.$message.error('查询环境信息失败！')\n      }\n    },\n    changeJsonRadio() {\n      this.bodyFlag = true\n      this.paramFlag = false\n    },\n    changeRadio() {\n      this.bodyFlag = false\n      this.paramFlag = true\n    },\n    dictHeaderData() {\n      const req_header = []\n      for (var i = 0; i < this.headerData.length; i++) {\n        const head = {\n          name: this.headerData[i].name,\n          value: this.headerData[i].value\n        }\n        req_header.push(head)\n      }\n      return req_header\n    },\n    dictParamsData() {\n      const req_params = []\n      for (var i = 0; i < this.paramData.length; i++) {\n        const param = {\n          name: this.paramData[i].name,\n          value: this.paramData[i].value\n        }\n        req_params.push(param)\n      }\n      return req_params\n    }\n  }\n}\n</script>\n\n<style>\ndiv.jsoneditor {\n  border: thin solid #ced4da;\n}\ndiv.jsoneditor-menu {\n  display: none;\n}\n.ace-jsoneditor .ace_gutter {\n  background: white;\n}\ndiv.jsoneditor-outer.has-main-menu-bar {\n  margin-top: 0px;\n  padding-top: 0px;\n}\n.per-label {\n  margin-right: 10px;\n  margin-bottom: 4px;\n  font-size: 1rem;\n}\n</style>\n\n<style scoped>\n.debug-button {\n  float: right;\n  margin-right: 20px;\n}\n.div-line {\n  height: auto;\n  width: 100%;\n  text-align: left;\n  margin-bottom: 10px;\n}\n.title-text {\n  font-family: \"Lucida Calligraphy\", cursive, serif, sans-serif;\n  font-size: 18px;\n  font-weight: bolder;\n}\n</style>\n"]}]}