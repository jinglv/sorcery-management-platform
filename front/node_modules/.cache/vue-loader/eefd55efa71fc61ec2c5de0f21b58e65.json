{"remainingRequest":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/demandDetailDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeanlv/sorcery-management-platform/front/src/components/Cases/demandDetailDialog.vue","mtime":1702437064858},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1698032214874},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1698032215054},{"path":"/Users/jeanlv/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1698032217227}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldERlbWFuZERldGFpbCB9IGZyb20gJ0AvYXBpL2Nhc2VzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEZW1hbmREZXRhaWxEaWFsb2cnLAogIGNvbXBvbmVudHM6IHt9LAogIGZpbHRlcnM6IHsKICAgIHJlcXVpcmVtZW50c1R5cGUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAnYnVzaW5lc3MnKSB7CiAgICAgICAgcmV0dXJuICfkuJrliqHnsbvpnIDmsYInCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdpbXByb3ZlJykgewogICAgICAgIHJldHVybiAnQnVn5pS56L+b57G76ZyA5rGCJwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAndGVjaG5pY2FsJykgewogICAgICAgIHJldHVybiAn5oqA5pyv57G76ZyA5rGCJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAn5pyq55+l57G75Z6LJwogICAgICB9CiAgICB9CiAgfSwKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgZGlkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dUaXRsZTogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IHRydWUsCiAgICAgIGRlbWFuZERldGFpbEZvcm06IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBwcm9qZWN0X25hbWU6ICcnLAogICAgICAgIHZlcnNpb25fbnVtYmVyOiAnJywKICAgICAgICByZXF1aXJlbWVudHNfdHlwZTogJycsCiAgICAgICAgcmVxdWlyZW1lbnRzOiAnJywKICAgICAgICByZXF1aXJlbWVudHNfdXBsb2FkX2ZpbGU6IFtdLAogICAgICAgIGRlbWFuZF9hbmFseXNpczogJycsCiAgICAgICAgZGVzY3JpYmU6ICcnCiAgICAgIH0sCiAgICAgIGZpbGVMaXN0OiBbXQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2hvd1RpdGxlID0gdGhpcy50aXRsZQogICAgdGhpcy5nZXREZW1hbmREZXRhaWwoKQogIH0sCiAgbW91bnRlZCgpIHsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCdjYW5jZWwnLCB7fSkKICAgIH0sCiAgICBhc3luYyBnZXREZW1hbmREZXRhaWwoKSB7CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBnZXREZW1hbmREZXRhaWwodGhpcy5kaWQpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmRlbWFuZERldGFpbEZvcm0gPSByZXNwLnJlc3VsdAogICAgICAgIGNvbnN0IGZpbGVzID0gSlNPTi5wYXJzZShyZXNwLnJlc3VsdC5yZXF1aXJlbWVudHNfdXBsb2FkX2ZpbGUucmVwbGFjZSgvJy9nLCAnIicpKQogICAgICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IGZpbGVJbmZvcyA9IHsKICAgICAgICAgICAgICBuYW1lOiBmaWxlc1tpXSwKICAgICAgICAgICAgICB1cmw6ICcvc3RhdGljL2ZpbGUvJyArIGZpbGVzW2ldCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5maWxlTGlzdC5wdXNoKGZpbGVJbmZvcykKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kZW1hbmREZXRhaWxGb3JtLnJlcXVpcmVtZW50c191cGxvYWRfZmlsZSA9IFtdCiAgICAgICAgfQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5p+l6K+i5oiQ5YqfJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZXJyb3IubWVzc2FnZSkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["demandDetailDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"demandDetailDialog.vue","sourceRoot":"src/components/Cases","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"70%\"\n    :before-close=\"closeDialog\"\n    :append-to-body=\"true\"\n    :close-on-click-modal=\"false\"\n  >\n    <el-form\n      ref=\"ruleForm\"\n      :model=\"demandDetailForm\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-col :span=\"8\">\n        <el-form-item label=\"需求名称：\" prop=\"name\">{{ demandDetailForm.name }}</el-form-item>\n      </el-col>\n      <el-col :span=\"8\">\n        <el-form-item label=\"项目：\" prop=\"project_name\">{{ demandDetailForm.project_name }}</el-form-item>\n      </el-col>\n      <el-col :span=\"8\">\n        <el-form-item label=\"需求类型：\" prop=\"requirements_type\">\n          {{ demandDetailForm.requirements_type | requirementsType }}\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"8\">\n        <el-form-item label=\"需求连接：\" prop=\"requirements\">{{ demandDetailForm.requirements }}</el-form-item>\n      </el-col>\n      <el-form-item label=\"需求文件：\" prop=\"requirements_upload_file\">\n        <div v-for=\"(file, index) in fileList\" :key=\"index\">\n          <el-link :href=\"file.url\" target=\"_blank\">{{ file.name }}</el-link>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"需求分析：\" prop=\"requirements\">\n        <div class=\"w-e-text\" style=\"height: 400px; overflow-y: auto;\" v-html=\"demandDetailForm.demand_analysis\" />\n      </el-form-item>\n      <el-form-item label=\"描述：\" prop=\"describe\">{{ demandDetailForm.describe }}</el-form-item>\n      <el-form-item style=\"text-align: right\">\n        <el-button @click=\"closeDialog\">返回</el-button>\n      </el-form-item>\n    </el-form>\n  </el-dialog>\n</template>\n\n<script>\nimport { getDemandDetail } from '@/api/cases'\n\nexport default {\n  name: 'DemandDetailDialog',\n  components: {},\n  filters: {\n    requirementsType(value) {\n      if (value === 'business') {\n        return '业务类需求'\n      } else if (value === 'improve') {\n        return 'Bug改进类需求'\n      } else if (value === 'technical') {\n        return '技术类需求'\n      } else {\n        return '未知类型'\n      }\n    }\n  },\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    did: {\n      type: Number,\n      default: 1\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      demandDetailForm: {\n        name: '',\n        project_name: '',\n        version_number: '',\n        requirements_type: '',\n        requirements: '',\n        requirements_upload_file: [],\n        demand_analysis: '',\n        describe: ''\n      },\n      fileList: []\n    }\n  },\n  created() {\n    this.showTitle = this.title\n    this.getDemandDetail()\n  },\n  mounted() {\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    async getDemandDetail() {\n      const resp = await getDemandDetail(this.did)\n      if (resp.success === true) {\n        this.demandDetailForm = resp.result\n        const files = JSON.parse(resp.result.requirements_upload_file.replace(/'/g, '\"'))\n        if (files.length > 0) {\n          for (let i = 0; i < files.length; i++) {\n            const fileInfos = {\n              name: files[i],\n              url: '/static/file/' + files[i]\n            }\n            this.fileList.push(fileInfos)\n          }\n        } else {\n          this.demandDetailForm.requirements_upload_file = []\n        }\n        this.$message.success('查询成功')\n      } else {\n        this.$message.error(resp.error.message)\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n#image {\n  text-align: left;\n}\n\n#editor_requirements {\n  border: 1px solid #ccc;\n  z-index: 100; /* 按需定义 */\n}\n\n#editor_demand {\n  border: 1px solid #ccc;\n  z-index: 100; /* 按需定义 */\n}\n</style>\n"]}]}