{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/views/infos/yapi/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/views/infos/yapi/index.vue","mtime":1691397319234},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFlhcGlQcm9qZWN0SW5mbywgZ2V0WWFwaUNhdGVnb3J5TGlzdCwgZ2V0WWFwaUFwaUxpc3QgfSBmcm9tICdAL2FwaS9pbmZvcycKaW1wb3J0IHlhcGlBcGlEZXRhaWxEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL0luZm9zL3lhcGlBcGlEZXRhaWxEaWFsb2cnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgeWFwaUFwaURldGFpbERpYWxvZwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHlhcGlGcm9tOiB7CiAgICAgICAgeWFwaUJhc2VVcmw6ICdodHRwczovL3lhcGlwcmQuc2VyZXMuY24nLAogICAgICAgIHlhcGlUb2tlbjogJzc3ZWM0Y2U4NDk4MjhkMWNmMDM2ZGRlNzNiZmM2MDRjN2I1ZWNmNDUzMTFhZDI3ZGM0MTg0ZmI5MzE3M2ExNGQnCiAgICAgIH0sCiAgICAgIHByb2plY3RfaWQ6IDEsCiAgICAgIHByb2plY3RfbmFtZTogJycsCiAgICAgIGNhdGVnb3J5T3B0aW9uOiBbXSwKICAgICAgY2F0ZWdvcnlJZDogMSwKICAgICAgY2F0ZWdvcnlOYW1lOiAnJywKICAgICAgY2F0ZWdvcnlMaXN0RnJvbTogewogICAgICAgIHlhcGlfYmFzZV91cmw6ICcnLAogICAgICAgIHlhcGlfdG9rZW46ICcnCiAgICAgIH0sCiAgICAgIHNob3dGbGFnOiBmYWxzZSwKICAgICAgYXBpRGF0YTogW10sCiAgICAgIHJlcTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogNgogICAgICB9LAogICAgICB0b3RhbDogMCwKICAgICAgZHJhd2VyOiBmYWxzZSwKICAgICAgYXBpSWQ6IDAsCiAgICAgIGFwaURldGFpbFRpdGxlOiAnJwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPlllhcGnpobnnm67kv6Hmga8KICAgIGFzeW5jIGdldFlhcGlQcm9qZWN0SW5mbygpIHsKICAgICAgY29uc3QgcmVxID0gewogICAgICAgIHlhcGlfYmFzZV91cmw6IHRoaXMueWFwaUZyb20ueWFwaUJhc2VVcmwsCiAgICAgICAgeWFwaV90b2tlbjogdGhpcy55YXBpRnJvbS55YXBpVG9rZW4KICAgICAgfQogICAgICBjb25zdCByZXNwID0gYXdhaXQgZ2V0WWFwaVByb2plY3RJbmZvKHJlcSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMucHJvamVjdF9pZCA9IHJlc3AucmVzdWx0LnByb2plY3RfaWQKICAgICAgICB0aGlzLnByb2plY3RfbmFtZSA9IHJlc3AucmVzdWx0LnByb2plY3RfbmFtZQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5p+l6K+i5oiQ5Yqf77yBJykKICAgICAgICB0aGlzLnNob3dGbGFnID0gdHJ1ZQogICAgICAgIHRoaXMuY2xpY2tDYXRlZ29yeUxpc3QoKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICAvLyDpobnnm67liIbnsbvliJfooagKICAgIGFzeW5jIGNsaWNrQ2F0ZWdvcnlMaXN0KCkgewogICAgICBjb25zdCByZXEgPSB7CiAgICAgICAgcHJvamVjdF9pZDogdGhpcy5wcm9qZWN0X2lkLAogICAgICAgIHlhcGlfYmFzZV91cmw6IHRoaXMueWFwaUZyb20ueWFwaUJhc2VVcmwsCiAgICAgICAgeWFwaV90b2tlbjogdGhpcy55YXBpRnJvbS55YXBpVG9rZW4KICAgICAgfQogICAgICBjb25zdCByZXNwID0gYXdhaXQgZ2V0WWFwaUNhdGVnb3J5TGlzdChyZXEpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmNhdGVnb3J5SWQgPSByZXNwLnJlc3VsdFswXS5jYXRlZ29yeV9pZAogICAgICAgIHRoaXMuY2F0ZWdvcnlOYW1lID0gcmVzcC5yZXN1bHRbMF0uY2F0ZWdvcnlfbmFtZQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcC5yZXN1bHQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuY2F0ZWdvcnlPcHRpb24ucHVzaCh7CiAgICAgICAgICAgIHZhbHVlOiByZXNwLnJlc3VsdFtpXS5jYXRlZ29yeV9pZCwKICAgICAgICAgICAgbGFiZWw6IHJlc3AucmVzdWx0W2ldLmNhdGVnb3J5X25hbWUKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMuYXBpTGlzdCh0aGlzLmNhdGVnb3J5SWQpCiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmn6Xor6LmiJDlip/vvIEiKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouWksei0pe+8gScpCiAgICAgIH0KICAgIH0sCiAgICAvLyDpobnnm67liIbnsbvmjqXlj6PliJfooagKICAgIGFzeW5jIGFwaUxpc3QoY2F0ZWdvcnlJZCkgewogICAgICBjb25zdCByZXEgPSB7CiAgICAgICAgY2F0ZWdvcnlfaWQ6IGNhdGVnb3J5SWQsCiAgICAgICAgeWFwaV9iYXNlX3VybDogdGhpcy55YXBpRnJvbS55YXBpQmFzZVVybCwKICAgICAgICB5YXBpX3Rva2VuOiB0aGlzLnlhcGlGcm9tLnlhcGlUb2tlbiwKICAgICAgICBwYWdlOiB0aGlzLnJlcS5wYWdlLAogICAgICAgIHNpemU6IHRoaXMucmVxLnNpemUKICAgICAgfQogICAgICBjb25zdCByZXNwID0gYXdhaXQgZ2V0WWFwaUFwaUxpc3QocmVxKQogICAgICBpZiAocmVzcC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5hcGlEYXRhID0gcmVzcC5yZXN1bHQubGlzdAogICAgICAgIHRoaXMudG90YWwgPSByZXNwLnJlc3VsdC5jb3VudAogICAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5p+l6K+i5oiQ5Yqf77yBIikKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmn6Xor6LlpLHotKXvvIEnKQogICAgICB9CiAgICB9LAogICAgLy8g5L+u5pS56YCJ5Lit5YiG57G7CiAgICBjaGFuZ2VDYXRlZ29yeSh2YWx1ZSkgewogICAgICB0aGlzLmNhdGVnb3J5SWQgPSB2YWx1ZQogICAgICB0aGlzLmFwaUxpc3QodmFsdWUpCiAgICB9LAogICAgLy8g6Lez6L2s5Yiw56ys5Yeg6aG1CiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLnJlcS5wYWdlID0gdmFsCiAgICAgIHRoaXMuYXBpTGlzdCh0aGlzLmNhdGVnb3J5SWQpCiAgICB9LAogICAgLy8g5Yib5bu65qih5Z2X5YWz6ZetCiAgICBjbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5kaWFsb2dGbGFnID0gZmFsc2UKICAgICAgdGhpcy5hcGlMaXN0KHRoaXMuY2F0ZWdvcnlJZCkKICAgIH0sCiAgICAvLyDmn6XnnIvmjqXlj6Por6bmg4UKICAgIGFwaURldGFpbERpYWxvZyhyb3cpIHsKICAgICAgLy8g54K55Ye76I635Y+W55So5L6LCiAgICAgIHRoaXMuYXBpSWQgPSByb3cuYXBpX2lkCiAgICAgIHRoaXMuZHJhd2VyID0gdHJ1ZQogICAgICB0aGlzLmFwaURldGFpbFRpdGxlID0gJ+afpeeci+aOpeWPo+ivpuaDhScKICAgIH0sCiAgICAvLyDkvKDpgJLlrZDnu4Tku7bvvIzlhbPpl63mir3lsYkKICAgIGNsb3NlRHJhd2VyKCkgewogICAgICB0aGlzLmRyYXdlciA9IGZhbHNlCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/infos/yapi","sourcesContent":["<template>\n  <div id=\"yapi-api\">\n    <el-form :inline=\"true\" :model=\"yapiFrom\" class=\"demo-form-inline\">\n      <el-form-item label=\"Yapi基础地址\">\n        <el-input v-model=\"yapiFrom.yapiBaseUrl\" placeholder=\"请输入Yapi基础地址\" style=\"width: 250px;\" />\n      </el-form-item>\n      <el-form-item label=\"Yapi项目Token\">\n        <el-input v-model=\"yapiFrom.yapiToken\" placeholder=\"请输入Yapi项目Token\" style=\"width: 600px;\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"getYapiProjectInfo()\">查询</el-button>\n      </el-form-item>\n    </el-form>\n    <el-form v-show=\"showFlag\" :inline=\"true\" class=\"demo-form-inline\">\n      <el-form-item label=\"Yapi项目名称:\">{{ project_name }}</el-form-item>\n    </el-form>\n    <div style=\"text-align: left\">\n      <el-form :inline=\"true\">\n        <el-form-item label=\"Yapi项目分类\">\n          <el-select\n            v-model=\"categoryName\"\n            size=\"medium\"\n            placeholder=\"请选择项目分类\"\n            @change=\"changeCategory\"\n          >\n            <el-option\n              v-for=\"item in categoryOption\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"接口总数量:\" style=\"float: right\">{{ total }}</el-form-item>\n      </el-form>\n    </div>\n    <div style=\"overflow-y: auto;\">\n      <el-table\n        :data=\"apiData\"\n        border\n        stripe\n        style=\"width: 100%\"\n      >\n        <el-table-column\n          prop=\"api_id\"\n          label=\"接口ID\"\n          width=\"200\"\n        />\n        <el-table-column\n          prop=\"api_name\"\n          label=\"接口名称\"\n          width=\"250\"\n        />\n        <el-table-column\n          prop=\"api_path\"\n          label=\"接口地址\"\n        />\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"250\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"text\"\n              @click=\"apiDetailDialog(scope.row)\"\n            >查看接口详情</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        background\n        layout=\"prev, pager, next\"\n        style=\"text-align: right\"\n        :page-size=\"req.size\"\n        :total=\"total\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n    <el-drawer\n      :title=\"apiDetailTitle\"\n      :visible.sync=\"drawer\"\n      direction=\"rtl\"\n      size=\"50%\"\n    >\n      <yapi-api-detail-dialog v-if=\"drawer\" :url=\"yapiFrom.yapiBaseUrl\" :token=\"yapiFrom.yapiToken\" :aid=\"apiId\" @close=\"closeDrawer()\" />\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport { getYapiProjectInfo, getYapiCategoryList, getYapiApiList } from '@/api/infos'\nimport yapiApiDetailDialog from '@/components/Infos/yapiApiDetailDialog'\n\nexport default {\n  components: {\n    yapiApiDetailDialog\n  },\n  data() {\n    return {\n      yapiFrom: {\n        yapiBaseUrl: 'https://yapiprd.seres.cn',\n        yapiToken: '77ec4ce849828d1cf036dde73bfc604c7b5ecf45311ad27dc4184fb93173a14d'\n      },\n      project_id: 1,\n      project_name: '',\n      categoryOption: [],\n      categoryId: 1,\n      categoryName: '',\n      categoryListFrom: {\n        yapi_base_url: '',\n        yapi_token: ''\n      },\n      showFlag: false,\n      apiData: [],\n      req: {\n        page: 1,\n        size: 6\n      },\n      total: 0,\n      drawer: false,\n      apiId: 0,\n      apiDetailTitle: ''\n    }\n  },\n  mounted() {\n  },\n  methods: {\n    // 获取Yapi项目信息\n    async getYapiProjectInfo() {\n      const req = {\n        yapi_base_url: this.yapiFrom.yapiBaseUrl,\n        yapi_token: this.yapiFrom.yapiToken\n      }\n      const resp = await getYapiProjectInfo(req)\n      if (resp.success === true) {\n        this.project_id = resp.result.project_id\n        this.project_name = resp.result.project_name\n        this.$message.success('查询成功！')\n        this.showFlag = true\n        this.clickCategoryList()\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 项目分类列表\n    async clickCategoryList() {\n      const req = {\n        project_id: this.project_id,\n        yapi_base_url: this.yapiFrom.yapiBaseUrl,\n        yapi_token: this.yapiFrom.yapiToken\n      }\n      const resp = await getYapiCategoryList(req)\n      if (resp.success === true) {\n        this.categoryId = resp.result[0].category_id\n        this.categoryName = resp.result[0].category_name\n        for (let i = 0; i < resp.result.length; i++) {\n          this.categoryOption.push({\n            value: resp.result[i].category_id,\n            label: resp.result[i].category_name\n          })\n        }\n        this.apiList(this.categoryId)\n        // this.$message.success(\"查询成功！\")\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 项目分类接口列表\n    async apiList(categoryId) {\n      const req = {\n        category_id: categoryId,\n        yapi_base_url: this.yapiFrom.yapiBaseUrl,\n        yapi_token: this.yapiFrom.yapiToken,\n        page: this.req.page,\n        size: this.req.size\n      }\n      const resp = await getYapiApiList(req)\n      if (resp.success === true) {\n        this.apiData = resp.result.list\n        this.total = resp.result.count\n        // this.$message.success(\"查询成功！\")\n      } else {\n        this.$message.error('查询失败！')\n      }\n    },\n    // 修改选中分类\n    changeCategory(value) {\n      this.categoryId = value\n      this.apiList(value)\n    },\n    // 跳转到第几页\n    handleCurrentChange(val) {\n      this.req.page = val\n      this.apiList(this.categoryId)\n    },\n    // 创建模块关闭\n    closeDialog() {\n      this.dialogFlag = false\n      this.apiList(this.categoryId)\n    },\n    // 查看接口详情\n    apiDetailDialog(row) {\n      // 点击获取用例\n      this.apiId = row.api_id\n      this.drawer = true\n      this.apiDetailTitle = '查看接口详情'\n    },\n    // 传递子组件，关闭抽屉\n    closeDrawer() {\n      this.drawer = false\n    }\n  }\n}\n</script>\n"]}]}