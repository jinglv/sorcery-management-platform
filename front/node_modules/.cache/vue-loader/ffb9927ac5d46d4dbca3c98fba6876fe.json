{"remainingRequest":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/debugtalkDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvjing/sorcery-management-platform/front/src/components/HttpRunner/debugtalkDialog.vue","mtime":1688028447751},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/babel-loader/lib/index.js","mtime":1679466716072},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/cache-loader/dist/cjs.js","mtime":1679466716417},{"path":"/Users/lvjing/sorcery-management-platform/front/node_modules/vue-loader/lib/index.js","mtime":1679466707590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJ1biwgdXBkYXRlSHR0cFJ1bm5lclByb2plY3QgfSBmcm9tICdAL2FwaS9odHRwcnVubmVyJwppbXBvcnQgQWNlQ29kZUVkaXRvckRpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvSHR0cFJ1bm5lci9hY2VDb2RlRWRpdG9yRGlhbG9nLnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBY2VDb2RlRWRpdG9yRGlhbG9nCiAgfSwKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgaGlkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIHBpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCiAgICBobmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBkZXNjOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGNvZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgZWNvZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1RpdGxlOiAnJywKICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwKICAgICAgbGFuZ3VhZ2U6ICdweXRob24nLAogICAgICBjb2RlczogJycsCiAgICAgIGluX2NvZGU6ICcnLAogICAgICByZXN1bHQ6ICcnLAogICAgICBzYXZlRmxhZzogZmFsc2UKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy50aXRsZSA9PT0gJ2RlYnVndGFsaycpIHsKICAgICAgdGhpcy5zaG93VGl0bGUgPSAnRGVidWdUYWxrJwogICAgfQogICAgY29uc29sZS5pbmZvKCdpbiBjb2RlOicsIHRoaXMuY29kZSkKICAgIHRoaXMuY29kZXMgPSB0aGlzLmNvZGUKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCdjYW5jZWwnLCB7fSkKICAgIH0sCiAgICBnZXRDb2RlKGNvZGUpIHsKICAgICAgdGhpcy5pbl9jb2RlID0gY29kZQogICAgfSwKICAgIC8vIOi/kOihjAogICAgYXN5bmMgcnVuRGVidWd0YWxrKCkgewogICAgICAvLyB0aGlzLmdldENvZGUoKQogICAgICBjb25zdCByZXEgPSB7CiAgICAgICAgY29kZTogdGhpcy5pbl9jb2RlID09PSAnJyA/IHRoaXMuY29kZSA6IHRoaXMuaW5fY29kZQogICAgICB9CiAgICAgIGNvbnNvbGUuaW5mbygnY29kZScsIHJlcSkKICAgICAgY29uc29sZS5pbmZvKCdpbl9jb2RlJywgcmVxKQogICAgICBjb25zdCByZXNwID0gYXdhaXQgcnVuKHJlcSkKICAgICAgaWYgKHJlc3Auc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzcC5yZXN1bHQKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmiafooYzlpLHotKXvvIEnKQogICAgICB9CiAgICB9LAogICAgLy8g5pu05pawCiAgICBhc3luYyB1cGRhdGVJbmZvKCkgewogICAgICBjb25zdCByZXEgPSB7CiAgICAgICAgJ3Byb2plY3RfaWQnOiB0aGlzLnBpZCwKICAgICAgICAnZW52X2NvZGUnOiB0aGlzLmVjb2RlLAogICAgICAgICduYW1lJzogdGhpcy5obmFtZSwKICAgICAgICAnZGVzY3JpYmUnOiB0aGlzLmRlc2MsCiAgICAgICAgJ2NvZGUnOiB0eXBlb2YgKHRoaXMuaW5fY29kZSkgPT09ICd1bmRlZmluZWQnID8gJycgOiB0aGlzLmluX2NvZGUKICAgICAgfQogICAgICBjb25zb2xlLmluZm8oJ3JlcScsIHJlcSkKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHVwZGF0ZUh0dHBSdW5uZXJQcm9qZWN0KHRoaXMuaGlkLCByZXEpCiAgICAgIGlmIChyZXNwLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCkKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/neWtmOaIkOWKnycpCiAgICAgICAgdGhpcy5zYXZlRmxhZyA9IHRydWUKICAgICAgICAvLyDlu7bml7blmagKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJykKICAgICAgICB9LCA1MDApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5L+d5a2Y5aSx6LSlJykKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["debugtalkDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"debugtalkDialog.vue","sourceRoot":"src/components/HttpRunner","sourcesContent":["<template>\n  <el-dialog\n    :title=\"showTitle\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1100px\"\n    :before-close=\"closeDialog\"\n  >\n    <el-row :gutter=\"20\">\n      <el-col :span=\"12\">\n        <div align=\"right\">\n          <el-button size=\"small\" type=\"primary\" @click=\"runDebugtalk()\">点击运行</el-button>\n          <el-button size=\"small\" type=\"success\" :disabled=\"saveFlag\" @click=\"updateInfo()\">提交保存</el-button>\n        </div>\n        <div style=\"margin-top: 10px;\">\n          <ace-code-editor-dialog ref=\"ace\" :value=\"codes\" class=\"ace-editor\" :min-lines=\"25\" :mode-path=\"language\" @getCode=\"getCode\" />\n        </div>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-button size=\"small\" type=\"warning\" disabled>运行结果</el-button>\n        <div style=\"margin-top: 10px;\">\n          <ace-code-editor-dialog ref=\"ace\" v-model=\"result\" class=\"ace-editor\" :min-lines=\"25\" :mode-path=\"language\" />\n        </div>\n      </el-col>\n    </el-row>\n    <div class=\"dialog-footer\" align=\"right\">\n      <el-button @click=\"closeDialog()\">取消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { run, updateHttpRunnerProject } from '@/api/httprunner'\nimport AceCodeEditorDialog from '@/components/HttpRunner/aceCodeEditorDialog.vue'\n\nexport default {\n  components: {\n    AceCodeEditorDialog\n  },\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    hid: {\n      type: Number,\n      default: 1\n    },\n    pid: {\n      type: Number,\n      default: 1\n    },\n    hname: {\n      type: String,\n      default: null\n    },\n    desc: {\n      type: String,\n      default: null\n    },\n    code: {\n      type: String,\n      default: null\n    },\n    ecode: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      showTitle: '',\n      dialogVisible: true,\n      language: 'python',\n      codes: '',\n      in_code: '',\n      result: '',\n      saveFlag: false\n    }\n  },\n  mounted() {\n    if (this.title === 'debugtalk') {\n      this.showTitle = 'DebugTalk'\n    }\n    console.info('in code:', this.code)\n    this.codes = this.code\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('cancel', {})\n    },\n    getCode(code) {\n      this.in_code = code\n    },\n    // 运行\n    async runDebugtalk() {\n      // this.getCode()\n      const req = {\n        code: this.in_code === '' ? this.code : this.in_code\n      }\n      console.info('code', req)\n      console.info('in_code', req)\n      const resp = await run(req)\n      if (resp.success === true) {\n        this.result = resp.result\n      } else {\n        this.$message.error('执行失败！')\n      }\n    },\n    // 更新\n    async updateInfo() {\n      const req = {\n        'project_id': this.pid,\n        'env_code': this.ecode,\n        'name': this.hname,\n        'describe': this.desc,\n        'code': typeof (this.in_code) === 'undefined' ? '' : this.in_code\n      }\n      console.info('req', req)\n      const resp = await updateHttpRunnerProject(this.hid, req)\n      if (resp.success === true) {\n        this.closeDialog()\n        this.$message.success('保存成功')\n        this.saveFlag = true\n        // 延时器\n        setTimeout(() => {\n          this.$emit('close')\n        }, 500)\n      } else {\n        this.$message.error('保存失败')\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n  .el-row {\n    margin-bottom: 20px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n  .el-col {\n    border-radius: 4px;\n  }\n</style>\n"]}]}